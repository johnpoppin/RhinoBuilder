<html>
<head>

<link rel="icon" href="colors/favicon.png" type="image/gif" sizes="16x16" />

<title>CrashRhinoceros.com</title>

<style>
	a:link {text-decoration:none; color:darkblue;}
	a:visited {text-decoration:none; color:darkblue;}
	a:hover {text-decoration:underline; color:darkblue;}
	a:active {text-decoration:underline; color:darkblue;}
</style>

<style type="text/css">

textarea
{
	height:20px;
	width:31px;
	resize:none;
	font-size:11px;
	font-family:Arial;
	font-weight:bold;
}

</style>

<script>

/*

FINISHING NOTES:

NAH		add vegetation on the sides of desert rivers

DONE!	fix desert depth

DONE!	get loading map arrays working

MEH		fix Instructions / About screens for all levels of the app

PRESET1:
U05000500300300100205001003080114008010035100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001110000000000000000000000000000000000000000000000011000000000110000000000000001000111000000000000000100000000011111000000000000111010100000000000000000001100001111110000010000011111110000000000000000000111000011111000000100000010111000000010000000000000000000011100000000000000001100000001110000000000000000001001000000010000000111000000111000000000000000000001110000000100000001100000001110000000000000000000011100000000000000111000000011110000000000000000000111100000000000011111000000111100000000000110001111111000000000000111110000000111000000000011100111100110000000000000111110000011100000000000110000110000110000000000001111111100111000000000001100001100001100000000000001111111111111000000000011000011000011000000000000011111111110000000000000000000000000000000000000000011101011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001100000000000000110000000000000000000000000000000011000000000000011110000000000000000001100000000000000000000000000111100000000000000000011000000000000000000000000000110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111100000000000000000000100001000000000000000011001111100000000000000000011111110000000000000001110111111100000000000000101011111110000000000000001001111111110000000000000111100000110000000000000000010111111110000000000000110000000111100000000000000001110001110000000000011100000000111000000000000000001000001100000000001110000000000110000000000000000011000010000000000001100000000001100000000000000000110000100000000000011000011000011000000000001000001100001100000000001110000110000100000000000110000011000011000000000001100000000001100000000000100001110000100000000000001100000000110000000000001100010100000000000000000001000000001000000000000011111110000000000000000000011000000110000000000000000101000000000000110000000010000001000000000000000000000000000000001100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

AZEROTH:
U05000500300300100302501003080108006008025000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000111100000000000000000000000000000000000000000000011111100000000000000000000000000000000000000000000111111000000000000000000000000000000000000000000001111110000000000000000000000000000000001100000000001111000000111100000000000000000000001111100000000000000000111111100000000000000000011111111100000000000000111111111100000000000001001111111111100000000000111111111111000000000011111111111111111000000000001111111111110000000001111111111011111110000000000011111111111100000000001111111100011111100000000000111111111111000000000001100111101111110000000000011111111111111110000000011001111111111000000000000111111111111111100000000111111111111110000000000001111111111111000000000001111111111111000000000000111111111111110000000000011110111111110000000001111111111111111111000000000000000111111000000000010111111111111111110000000000000000111100000000000011111111111111100000000000000000001111000000000011111111111111110000000000000000000111111000000000001111111111111100000000000000000001111111000000000011111111111111100000000000000110111111111000000000111111111111111000000000000111111111001111000000011111111111111110000000000001111111110011111000000111111111111111100000000000111111111100111100000001111111111111000000000000000011111111111110000001011111111111110000000000000000111111111111100000001111111111111100000000000000001111111111111100000011111111111111100000000000000111111111111111000000111111111111101000000000000000111111111111100000001111111111111101000000000000001111111111111000000110111111111111010000000000000011111111111111000001101111111111111100000000000001111111111111010000011011111111111111000000000000011111111111110000000110111111111111110000000000010111111111111100000001101111111111111100000000000000011111111111000000000011111111111111000000000000000011111111110000000001111111111111110000000000000000111111111000000000011111111111111110000000000000001111111100000000000111111111111111100000000000000011111000000000000001111111111111110000000000000000100000000000000000011111110111111000000000000000001000000000000000000111111000011110000000000000000000000000000000000000111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

	preset1:05000500300300100302501003080108006008025000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000111111110000000000111111111110000000000011110000011111111100000000011111111111110000000000011100001111111111000000011111111111111100000000000111000011111111110000001111111111111111000000000000000000111111111000000011111111111111110000000000000000111111111111000000111111111111111100000000000000001111111111110000001111111111111111000000000000000111111111111100000011111111111111110000000000000011111111111111000000011111111111111100000000001101111111111111110000000111111111111111000000000011111111111101111000000001111111111111110000000000101111111111001110000000011111111111111100000000001011111111111011110000000111111111111111000000000010011111111110011000000001111111111111110000000000000011111111110110000000011111111111010000000000000000011011111101100000000111111111100000000000000000000110111110000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000110000000000000000000000000000000000000000000000001100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111000000111000000000000000001000111110000000000000000000000000000000000000001101110111010000000000000000000000000000000000000101111101001100000000000000000100000000000000000011011111111110100000000000001111111000000000000000111011111111010000000000000111111111000000000000010011111111111110000000000001111111110000000000000111111111111110000000000000011111111100000000000001111111111111011000000000001111111111100000000000010111100000111110000000000001111111110000000000000011110000000111100000000000011111111100000000000001111100000001111000000000010111111111000000000000011111000000011100000000000100111111100000000000000110111000001111000000000001000001000000000000000000110111000111100000000000010000000000000000000000001101010001100010000000000100000000000000000000000010000000000000100000000001111111000000000000000000000000000000111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

	TERRAIN TYPES:

	Elevation Locked:
		high mountains
		low mountains
		hills meadow
		boreal
		mixed forest
		forest
		trees
		scrub
		long grass
		grass

	Open:
	sand
	lava
	tundra
	ice
	swamp
	dirt

	Climatological:
		ice
		swamp
		tundra
		desert
		quasi desert
		rain forest

	Determine how many land levels are being shown

	Determine high polar, high middle, tropical, low middle and low polar latitudes

		high polar		10%
		high middle		30%
		tropical		20%
		low middle		30%
		low polar		10%

	Determine base vegetation for elevations shown

	Draw map with base vegetations

	BASE VEGETATION

		POLAR LATITUDES
		x	tundra
		x	scrub
		x	boreal
		x	hills (scrub)
		x	low mountains (tundra)
		x	high mountains (barren)

		MIDDLE LATITUDES
		x	grass
		x	scrub
		x	trees
		x	forest
		x	mixed forest
		x	boreal
		x	hills (meadow)
		x	low mountains (tundra)
		x	high mountains (barren)


		if waterLevel is 10, then do the following loop:

		MID LATITUDE	POLAR			TROPICAL
		high hmountains	high mountains	high mountains
		low mountains	low mountains	low mountains lush
		hills meadow	hills scrub		hills lush
		boreal			boreal			rainforest
		mixed forest	boreal			rainforest
		forest			boreal			rainforest
		trees			trees polar		rainforest
		scrub			scrub polar		rainforest
		longgrass		tundra long		trees
		grass			tundra			grass

x	boreal
x	forest
x	grass
x	high mountains
x	hills lush
x	hills meadow
x	hills scrub
x	longgrass
x	low mountains
x	low mountains lush
x	mixed forest
x	rainforest
x	scrub
x	scrub polar
x	trees
x	trees polar
x	tundra
	tundra long

		TROPICAL LATITUDE
		x	grass
		x	rainforest
		x	forest
		x	mixed forest
		x	boreal
		x	hills (meadow)
		x	low mountains (tundra)
		x	high mountains (barren)

	deserts occur at latitude of tropics

*/

var browserName=navigator.appName;
var platformName=navigator.platform;
var userAgent=navigator.userAgent;
var screenW=screen.width;
var screenH=screen.height;
var specificBrowser="";
var masterTop=5;
var leftMargin=5;
var indent=15;
var bumpDown=5;
var checkboxNumber=0;
var checkboxX=0;
var checkboxY=0;
var checkboxSize=11;
var windowWidth=window.innerWidth;
var growth = new Array(31);
var growth2 = new Array(31);

	for (x=0;x<=31;x++)
	{
		growth[x] = 0-0;
//		growth2[x] = 0-0;
	}

	growth[0] = 0;

var drawingLand = 1;
var boxNumber = 0;
var checkboxArray = new Array(2500);

	for (x=1;x<=2500;x++)
	{
		checkboxArray[x] = "ocean";
	}

var boxAddressArray = new Array(50);

	for (x=1;x<=50;x++)
	{
		boxAddressArray[x] = new Array(50);
	}

var rangePointArrayX = new Array(10000);
var rangePointArrayY = new Array(10000);
var rangePointArrayIndex = 0;

var changeX = 0;
var changeY = 0;
var brushSize = 0;
var q = 0;
var r = 0;
var s = 0;
var x = 0;
var y = 0;
var z = 0;
var Xb = 0;
var Yb = 0;
var xx = 0;
var yy = 0;
var bx = 0;
var by = 0;
var bxx = 0;
var byy = 0;
var activePreset = 1;
var settingPreset = 0;
var restoringPreset = 0;
var mapSizeX = 0;
var mapSizeY = 0;
var elevations = 0;
var numMtnRanges = 0;
var maxMtnLength = 0;
var maxMtnGirth = 0;
var numHillRanges = 0;
var maxHillLength = 0;
var maxHillGirth = 0;
var hillCurvyness = 0;
var landSlope = 0;
var numVolcanoes = 0;
var maxVolcanoSize = 0;
var landUniformity = 0;
var presetString = "";
var preset1 = "";
var preset2 = "";
var preset3 = "";
var preset4 = "";
var preset5 = "";
var preset6 = "";

//					            1111111111222222222233333333334444444444
//					  01234567890123456789012345678901234567890123456789

/*

PRESET1:
U05000500300300100205001003080114008010035100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001110000000000000000000000000000000000000000000000011000000000110000000000000001000111000000000000000100000000011111000000000000111010100000000000000000001100001111110000010000011111110000000000000000000111000011111000000100000010111000000010000000000000000000011100000000000000001100000001110000000000000000001001000000010000000111000000111000000000000000000001110000000100000001100000001110000000000000000000011100000000000000111000000011110000000000000000000111100000000000011111000000111100000000000110001111111000000000000111110000000111000000000011100111100110000000000000111110000011100000000000110000110000110000000000001111111100111000000000001100001100001100000000000001111111111111000000000011000011000011000000000000011111111110000000000000000000000000000000000000000011101011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001100000000000000110000000000000000000000000000000011000000000000011110000000000000000001100000000000000000000000000111100000000000000000011000000000000000000000000000110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111100000000000000000000100001000000000000000011001111100000000000000000011111110000000000000001110111111100000000000000101011111110000000000000001001111111110000000000000111100000110000000000000000010111111110000000000000110000000111100000000000000001110001110000000000011100000000111000000000000000001000001100000000001110000000000110000000000000000011000010000000000001100000000001100000000000000000110000100000000000011000011000011000000000001000001100001100000000001110000110000100000000000110000011000011000000000001100000000001100000000000100001110000100000000000001100000000110000000000001100010100000000000000000001000000001000000000000011111110000000000000000000011000000110000000000000000101000000000000110000000010000001000000000000000000000000000000001100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

AZEROTH:
U05000500300300100205001003080115000008035100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000110000000000000000000000000000000000000000000000011110000000000000000000000000000001110000000000000111100000000000000000000000000001111110000000000000110000000000000000000000000001111111110000000000000000000001100000000000000111111111111110000000000000000001111100000000001111111111111111000000000000000000111111100000000111100011110011110000000000000000111111111000000000110000011000111100000000000000001111111110000000000100100110011110000000000000000011111111111100000001000001111111000000000000000000111111111111000000011000111111110000000000000000011111111110000000000111111111111100000000000000000111111111000000000001100011111110000000000000001111111111110000000000000000011111100000000000000001111111111110000000000000000000000000000000000000011111111111111000000000000001111110000000000000000111111111111110000000000000011111100000000000000000111111111110000000000000001111011100000000000000011111111111000000000001111111100011100000000000001111111111110000000000011111111000111000000000000011111111111000000000000111111110001110000000000000111111111110010000000000111111110111000000000000001111111111100000000000001111111111110000000000000001111111111000000000000011111111111100000000000001001111111111000000000000111111111111100000000000010011111111110000000000001111111111110000000000000100111111111100000000000011111111111100000000000000011111111111000000000000011111111111100000000000000111111111111000000000001111111111000000000000000001111111111100000000000111111111111000000000000000011111111111000000000001111111111110000000000000000111110011100000000000011111111111000000000000000001111000000000000000000001111111110000000000000000000000000000000000000000001111111100000000000000000000000000000000000000000011111100000000000000000000000000000100000000000000111100000000000000000000000000000000000000000000001000000000000000000000000000000000010000000000000010000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

USA:
U05000500300300100302501003080108006008025100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101000000000000000000000000000000000000000000000001111111000000000000000000000000000011000000000000011111111111110000000000000000000000110000000000000111111111111111111111100000000000001110000000000011111111111111111111111011000000001111000000000000111111111111111111111111100000000111100000000000001111111111111111111111110001000001111000000000000111111111111111111111111000111000111110000000000001111111001111111111111110001110111111000000000000011111110010111111111111100011111111110000000000000011111100001111111111111000111111111000000000000000111111100011111111111111011111111100000000000000001111111101111111111111111111111111100000000000000011111111111111111111111111111111111000000000000000011111111111111111111111111111111110000000000000000011111111111111111111111111111111000000000000000000111111111111111111111111111111100000000000000000000001111111111111111111111111110000000000000000000000000111111111111111111111111100000000000000000000000000000111111111111111111111000000000000000000000000000000111111111111110010110000000000000000000000000000000101111110001100000110000000000000000000000000000000001110000000000001110000000000000000000000000000000001000000000000001100000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111000000000000000000000000000000000000000000000011110000000000000000000000000000000000000000000000111100000000000000100100000000000000000000001000001101100000000000000000011000000000000000000000100010001000000000000000000000100000000000000000000111000001000000000000000000001100000000000000000000000000010000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

BRITANNIA:
U05000500300400100205001003080111000004035100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010001100000000000000000000000000000000000000000000101001111000010000111000000000000000000000000000011100001100111110000111011001110000000000000000000111100111000011100000111100101000000000000000000011111111100001111000000110111101000000000000000001111111110001111111000011111111101110000000001100001111111100111111111001111111111111100000000001101111111110011111111100011111111110110010000000001111111111111111111111010011111101000101100000000011111111111111111111111110111111011111011000000000111111111111111111111111011111110111010110000000000011111111111111111111111111111100000001110000000000111111111111111111101111111110000000110100000000010111111111111111110001111100000000001101000000001100111111111111111011111110000000000001000000000001101111111111111110111011100000000010010000000000101111111111111111101100010000000000100000000000000111111111111111110000000000000000001110000000000001111111111111001000000000000000000011111100000000001111111111000000000000000000000000011111000000000001111111110000000000000000000000000011100000000000011111111000000000000000000000000000111100000001100111111111010000000000000000000000001110000000001101111111110000000000000000000000000011110000000000111111111111010000000000000000000000111000000000001111111111110000000000000000000000001010000000000001111111111111000000000000000000000010000000000000001111111111110000011000000000000000000000000000000001101111111000001111000000000000000000000000000000011011111110000110010000000010000000000000000000000100111111100001100000000001100000000000000000000001001111111000001000000000110000000000000000000001010011111111000001100000001100000000000000000000000000011111111000000000000001100000000100000000000000000011111100100000000000001000000001000000000000000000101111001000000000000000000000010000000000000000000111111000000000000000000001000100000000001000000001110100000000000010000000011001000000000010100000011101000000000001110000000011110000000000010000000011010000000000001000000000111000000000001100000000010100000000000000000000011011000000000011100000000100010000000000000000000100010000000000100000000000010001100011000001000001101100000000000010000000000001000011111000111000001110000000000001100000000000000100110010001111000110110000000000000000000000000001000110000010100001000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

SOSARIA:
U05000500300100300210001003060113002012030100000000000000000001100000000000000000000000000000000000000000000000011100001110000000000011100000000000000000000000000011110000111000000000000011000000000000000000000001111111111110000000011010000000111100000000000000011011111111100000000000000011101111110000001110000100011111111111001111111111111011111100000111110000100111111111110001111111111111111111000001111100000001111111100000111111111111111111110000011111000000011111111100011111111111111111111100000111110000000111110111110011111111111111111110000000111000000001111001111110111111111111111111100001001110000000001100011111111111111111111111111000000011110000000000000000111111111111111111111100000001111100000000100011111111111111111111111111110010111111000000011110111111111111111111111111111110001111110000000111101111111111111111111111111111111111111000000001111111111111111111111111111111111111111110000000001111111111111111111111111111111111111111100000000011111111111111111111111111111111111111110000000000111111111111111111111111111111111111011100000000000111111111111111111111111111111111110011000000000011111111111111111111111111111111111010100000000000111111111111111111111111111111111110000000000000001111111111111111111111111111111111111001100000000011111111110011111111101111111111111110011000000001111111111000011111111111111111111111001110000000011111111111000011111111111111111111111011000000000011111111111001111111111111111111111100110000000000111111111111111111111111111111111111000110000000001111111111111111111111111111011111100100100000000001111111111111111111111111110100000010011000000000011111111111111110111111111100011100110010000000000111111111111111100101111110001111100100000000000011111110000001111000011111111111111000010000000000111100000010000110001111111111111110001111000000001100000000000000001000111111111111110011110000000000000000000001000111111111111111111100011000000000000000000000011001111111111111111111110000000000000000000000000000111111111111111111111110000000000000000000000000001111111111111111111111111000000000011110000000000111111111111111110111111110000000001111110000001111111111111111111101011111110000000010000100001111111111111111111100010111101110000000110011000111111111111111111111100001110011100000000100100001111111011110111111111101111100010000000001001000011110000011001111111111011111100000000000010010000000000000000011110001100011111110010000000000000000000000000000000000000000000111111100000000000000000000000000000000000000000000011111000000000000000000000000000000000000000000000001111

WORLD:
U10001000300500050308000503080106008010030100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111100010000000100000000000000000000000000001000001111000000010001110010000000000000000111110110110011100000110011111111111111000000000011111111111101100100011111111111111111111100000001101111110010000000001111111111111111111100100000010011111100110000000001111111111111111001000000000000011111111100000011111111111111011111000000000000000111100111000000011001111111111111110000000000000011111111000000000111100111111111111100000000000000110111100000000000011111011111111101000000000000000111110000000000000000111111111111100100000000000011111100000000001110001111111111111010000000000000011000000000000011111111011111111110000000001000001110000000000001111111111101111111110000000000000001100100000000011111111111001101110000000001000000001100000000000111111110110011001100000000000000000001110000000001111111110000010011000000000000000000000011000000011111111110000000010010000000000000000001111000000010111111100000000000000000000000000000011111000000000111110000000010100000000000000000000011110000000001111100000000011000100000000000000001111111000000001110000000000000000110000000000000011111110000000111000000000000010000000000000000000011111000000001110000000000000001000000000000000000111110000000011110100000000000111000000000000000000101100000000111101000000000011111000000000000000001110000000001110000000000001111110000000000000000011100000000001100000000000011111100000000000000000110000000000010000000000000110111000000000000000001100000000000000000000000000001100001000000000000011000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000001111011111111100000000000000000000001111000001111111111111111111000000000000000000011111100000111111111111111111000000000000000000000000011111111111011001111010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

*/
var preset1Default = "D05000500300300100205001003080114008010035100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001110000000000000000000000000000000000000000000000011000000000110000000000000001000111000000000000000100000000011111000000000000111010100000000000000000001100001111110000010000011111110000000000000000000111000011111000000100000010111000000010000000000000000000011100000000000000001100000001110000000000000000001001000000010000000111000000111000000000000000000001110000000100000001100000001110000000000000000000011100000000000000111000000011110000000000000000000111100000000000011111000000111100000000000110001111111000000000000111110000000111000000000011100111100110000000000000111110000011100000000000110000110000110000000000001111111100111000000000001100001100001100000000000001111111111111000000000011000011000011000000000000011111111110000000000000000000000000000000000000000011101011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001100000000000000110000000000000000000000000000000011000000000000011110000000000000000001100000000000000000000000000111100000000000000000011000000000000000000000000000110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111100000000000000000000100001000000000000000011001111100000000000000000011111110000000000000001110111111100000000000000101011111110000000000000001001111111110000000000000111100000110000000000000000010111111110000000000000110000000111100000000000000001110001110000000000011100000000111000000000000000001000001100000000001110000000000110000000000000000011000010000000000001100000000001100000000000000000110000100000000000011000011000011000000000001000001100001100000000001110000110000100000000000110000011000011000000000001100000000001100000000000100001110000100000000000001100000000110000000000001100010100000000000000000001000000001000000000000011111110000000000000000000011000000110000000000000000101000000000000110000000010000001000000000000000000000000000000001100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
var preset2Default = "D05000500300300100302501003080108006008025100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101000000000000000000000000000000000000000000000001111111000000000000000000000000000011000000000000011111111111110000000000000000000000110000000000000111111111111111111111100000000000001110000000000011111111111111111111111011000000001111000000000000111111111111111111111111100000000111100000000000001111111111111111111111110001000001111000000000000111111111111111111111111000111000111110000000000001111111001111111111111110001110111111000000000000011111110010111111111111100011111111110000000000000011111100001111111111111000111111111000000000000000111111100011111111111111011111111100000000000000001111111101111111111111111111111111100000000000000011111111111111111111111111111111111000000000000000011111111111111111111111111111111110000000000000000011111111111111111111111111111111000000000000000000111111111111111111111111111111100000000000000000000001111111111111111111111111110000000000000000000000000111111111111111111111111100000000000000000000000000000111111111111111111111000000000000000000000000000000111111111111110010110000000000000000000000000000000101111110001100000110000000000000000000000000000000001110000000000001110000000000000000000000000000000001000000000000001100000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111000000000000000000000000000000000000000000000011110000000000000000000000000000000000000000000000111100000000000000100100000000000000000000001000001101100000000000000000011000000000000000000000100010001000000000000000000000100000000000000000000111000001000000000000000000001100000000000000000000000000010000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
var preset3Default = "D05000500300300100205001003080115000008035100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000110000000000000000000000000000000000000000000000011110000000000000000000000000000001110000000000000111100000000000000000000000000001111110000000000000110000000000000000000000000001111111110000000000000000000001100000000000000111111111111110000000000000000001111100000000001111111111111111000000000000000000111111100000000111100011110011110000000000000000111111111000000000110000011000111100000000000000001111111110000000000100100110011110000000000000000011111111111100000001000001111111000000000000000000111111111111000000011000111111110000000000000000011111111110000000000111111111111100000000000000000111111111000000000001100011111110000000000000001111111111110000000000000000011111100000000000000001111111111110000000000000000000000000000000000000011111111111111000000000000001111110000000000000000111111111111110000000000000011111100000000000000000111111111110000000000000001111011100000000000000011111111111000000000001111111100011100000000000001111111111110000000000011111111000111000000000000011111111111000000000000111111110001110000000000000111111111110010000000000111111110111000000000000001111111111100000000000001111111111110000000000000001111111111000000000000011111111111100000000000001001111111111000000000000111111111111100000000000010011111111110000000000001111111111110000000000000100111111111100000000000011111111111100000000000000011111111111000000000000011111111111100000000000000111111111111000000000001111111111000000000000000001111111111100000000000111111111111000000000000000011111111111000000000001111111111110000000000000000111110011100000000000011111111111000000000000000001111000000000000000000001111111110000000000000000000000000000000000000000001111111100000000000000000000000000000000000000000011111100000000000000000000000000000100000000000000111100000000000000000000000000000000000000000000001000000000000000000000000000000000010000000000000010000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
var preset4Default = "D10001000300500050308000503080106008010030100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111100010000000100000000000000000000000000001000001111000000010001110010000000000000000111110110110011100000110011111111111111000000000011111111111101100100011111111111111111111100000001101111110010000000001111111111111111111100100000010011111100110000000001111111111111111001000000000000011111111100000011111111111111011111000000000000000111100111000000011001111111111111110000000000000011111111000000000111100111111111111100000000000000110111100000000000011111011111111101000000000000000111110000000000000000111111111111100100000000000011111100000000001110001111111111111010000000000000011000000000000011111111011111111110000000001000001110000000000001111111111101111111110000000000000001100100000000011111111111001101110000000001000000001100000000000111111110110011001100000000000000000001110000000001111111110000010011000000000000000000000011000000011111111110000000010010000000000000000001111000000010111111100000000000000000000000000000011111000000000111110000000010100000000000000000000011110000000001111100000000011000100000000000000001111111000000001110000000000000000110000000000000011111110000000111000000000000010000000000000000000011111000000001110000000000000001000000000000000000111110000000011110100000000000111000000000000000000101100000000111101000000000011111000000000000000001110000000001110000000000001111110000000000000000011100000000001100000000000011111100000000000000000110000000000010000000000000110111000000000000000001100000000000000000000000000001100001000000000000011000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000001111011111111100000000000000000000001111000001111111111111111111000000000000000000011111100000111111111111111111000000000000000000000000011111111111011001111010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
var preset5Default = "D05000500300400100205001003080111000004035100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010001100000000000000000000000000000000000000000000101001111000010000111000000000000000000000000000011100001100111110000111011001110000000000000000000111100111000011100000111100101000000000000000000011111111100001111000000110111101000000000000000001111111110001111111000011111111101110000000001100001111111100111111111001111111111111100000000001101111111110011111111100011111111110110010000000001111111111111111111111010011111101000101100000000011111111111111111111111110111111011111011000000000111111111111111111111111011111110111010110000000000011111111111111111111111111111100000001110000000000111111111111111111101111111110000000110100000000010111111111111111110001111100000000001101000000001100111111111111111011111110000000000001000000000001101111111111111110111011100000000010010000000000101111111111111111101100010000000000100000000000000111111111111111110000000000000000001110000000000001111111111111001000000000000000000011111100000000001111111111000000000000000000000000011111000000000001111111110000000000000000000000000011100000000000011111111000000000000000000000000000111100000001100111111111010000000000000000000000001110000000001101111111110000000000000000000000000011110000000000111111111111010000000000000000000000111000000000001111111111110000000000000000000000001010000000000001111111111111000000000000000000000010000000000000001111111111110000011000000000000000000000000000000001101111111000001111000000000000000000000000000000011011111110000110010000000010000000000000000000000100111111100001100000000001100000000000000000000001001111111000001000000000110000000000000000000001010011111111000001100000001100000000000000000000000000011111111000000000000001100000000100000000000000000011111100100000000000001000000001000000000000000000101111001000000000000000000000010000000000000000000111111000000000000000000001000100000000001000000001110100000000000010000000011001000000000010100000011101000000000001110000000011110000000000010000000011010000000000001000000000111000000000001100000000010100000000000000000000011011000000000011100000000100010000000000000000000100010000000000100000000000010001100011000001000001101100000000000010000000000001000011111000111000001110000000000001100000000000000100110010001111000110110000000000000000000000000001000110000010100001000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
var preset6Default = "D05000500300100300210001003060113002012030100000000000000000001100000000000000000000000000000000000000000000000011100001110000000000011100000000000000000000000000011110000111000000000000011000000000000000000000001111111111110000000011010000000111100000000000000011011111111100000000000000011101111110000001110000100011111111111001111111111111011111100000111110000100111111111110001111111111111111111000001111100000001111111100000111111111111111111110000011111000000011111111100011111111111111111111100000111110000000111110111110011111111111111111110000000111000000001111001111110111111111111111111100001001110000000001100011111111111111111111111111000000011110000000000000000111111111111111111111100000001111100000000100011111111111111111111111111110010111111000000011110111111111111111111111111111110001111110000000111101111111111111111111111111111111111111000000001111111111111111111111111111111111111111110000000001111111111111111111111111111111111111111100000000011111111111111111111111111111111111111110000000000111111111111111111111111111111111111011100000000000111111111111111111111111111111111110011000000000011111111111111111111111111111111111010100000000000111111111111111111111111111111111110000000000000001111111111111111111111111111111111111001100000000011111111110011111111101111111111111110011000000001111111111000011111111111111111111111001110000000011111111111000011111111111111111111111011000000000011111111111001111111111111111111111100110000000000111111111111111111111111111111111111000110000000001111111111111111111111111111011111100100100000000001111111111111111111111111110100000010011000000000011111111111111110111111111100011100110010000000000111111111111111100101111110001111100100000000000011111110000001111000011111111111111000010000000000111100000010000110001111111111111110001111000000001100000000000000001000111111111111110011110000000000000000000001000111111111111111111100011000000000000000000000011001111111111111111111110000000000000000000000000000111111111111111111111110000000000000000000000000001111111111111111111111111000000000011110000000000111111111111111110111111110000000001111110000001111111111111111111101011111110000000010000100001111111111111111111100010111101110000000110011000111111111111111111111100001110011100000000100100001111111011110111111111101111100010000000001001000011110000011001111111111011111100000000000010010000000000000000011110001100011111110010000000000000000000000000000000000000000000111111100000000000000000000000000000000000000000000011111000000000000000000000000000000000000000000000001111";

//	U10001000240500100210001003060100012012015100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001100000000000000000000000000000000000000000000000011000000000000000000000000000000000000000000000000000000000001100000011111111000001000000001011100000000000000011100001111110000000000000000110111000000000000000010000011110000000000000000011111110000000000000000000000111100000000000000111111111000000000000000000000001111100000100000001111111100000001100000000000000010111000011000000000111110000000011000000000000001000110000110000000011111100000000100000000001111100000111111100000000011100000000010000000000111110000001111100000000000001000010000111000000001111110000011111000000100000000000000011110000000011111110001111111100001000000100000000110000000000111111111111110111000000000111100000011000000000001100000000111100110000000001111100001111100000000010000000000110000100000000111111111111100000000000100000000001100001000000001111111111111110000000001000000000011000010000000001111111111010000000000010000110000100000100000000001111111100100000000000100001100001000001000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000010000000000000000000010000000000000000000000000000110000000000000000000000000000000000000000000000111100000000000000000000000000000000000000001000000111000000000000000000000000001110000011000000000000000000001000111110000000000011110001111000000000000000000101110111010000000000000110011110000000000000000001111111101100000000000000111111100000000000000001011111111110100000000000000111111100111000000000111111111111010000000000000000011111111111000000010111111111111110000000000000000111111111110000000111110000001111000000000010000001111111111000000001111000000001111000000000110000011111100110000000011100000000001110000000001100000011110001110000000011000000000011100000000011000000111000011100000001110000000000111000000000110000001110000110000000011100001100001100000000001100000011100000000000000111000000000011000000000011000001111000000000000000110000000000100000000000111000111111000000000000001110000000011000000000001111111111110000000000000010100000000100000000000011111111111000001000000000001100000011000000000000011001111100000011000000000011100001110000000000000000000000000000010000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

var time = new Date();
var hours = time.getHours();
var minutes = time.getMinutes();
var seconds = time.getSeconds();
var timeText = "";
var doBuildWorld = 0;
var doCheckForContinentSelection = 0;
var continentsAreSelected = 0;
var doGatherBuilderValues = 0;
var errorText = "";
var doInitWorldArrays = 0;
var worldArraysInitialized = 0;
var countInitializations = 0;
var doSeedMountainRanges = 0;
var mountainRangesSeeded = 0;
var goodSeedLocation = 0;
var mapArrayWorld = new Array(0);
var mapArrayMaster = new Array(0);
var mapArrayDev = new Array(0);
var mapArrayDev2 = new Array(0);
var errorCount = 0;
var buildFinished = 0;
var oldRangeDirection = "";
var doFlattenMap = 0;
var doPrintWorld = 0;
var doSeedVolcanoes = 0;
var volcanoesSeeded = 0;
var maxVolcanoSize = 0;
var volcanoCount = 0;
var volcanoXArray = new Array;
var volcanoYArray = new Array;
var numVolcanoes = 0;
var numVolcanoesStart = 0;
var volcanoXb = 0;
var volcanoYb = 0;
var levelCompleted = 0;
var doGrowWorld = 0;
var levelIsComplete = 0;
var levelComplete = 0;
var notEmptyTiles = 0;
var noContinentsSelected = 0;
var hillCurvynessFactor = 0;
var mountainTopX = 0;
var mountainTopY = 0;
var landCharacter = "";
var realHillLength = 0;
var landHo = 0;
var lowestLevel = 0;
var currentLevel = 0;
var doDetermineWaterLevel = 0;
var doSetWaterLevel = 0;
var waterLevel = 0;
var maxWaterLevel = 0;
var hillMultiplier = 0;
var hillMultiplierFactor = new Array(31);
var numRivers = 0;
var buttonAddRiver = 0;
var doAddRiver = 0;
var numShallows = 0;
var doAddShallows = 0;
var shallowsCount = 0;
var numBeaches = 0;
var doAddBeaches = 0;
var beachesCount = 0;
var numLavaFlows = 0;
var riverCurvyness = 60;
var lavaCurvyness = 60;
var eraseMods = 0;
var stage2Left = 5;
var canvasLeft = 0;
var buttonLeft = 0;
var sliderLeft = 0;
var textAreaLeft = 0;
var textLeft = 0;
var confineHills = 1;
var thisIsLava = 0;
var lastDirectionChosen = 0;
var oldRiverDirection = 0;
var waterAjacent = 0;
var buttonAddLavaFlow = 0;
var doAddLavaFlow = 0;
var divBuilderOn = 0;
var divConstructorOn = 0;
var divConstructorStage2On = 0;
var divSplashOn = 0;
var divInstructionsOn = 0;
var divAboutOn = 0;
var displayRunGif = 0;
var spin = 0;
var climate = 1;
var temperature = 1;
var divClimateBuilderOn = 0;
var plotCount = 0;
var editorX = 0;
var editorY = 0;
var riversNarrow=1;
var flowCharacter = "";
var worldMapDisplayOn = 0;
var editorSelection = 1;
var editorButtonChange = 0;
var desertDepth = 0;
var loadingMap = 0;
var desertCreation = 0;
var redSquareOn = 0;

function main()
{
	setTimeout("main();",100);
	if (desertCreation==1)
	{
		document.getElementById("waitingClimate").style.display="block";
		climateBuilderError.value = "[Commencing desert / lush zone creation.] - PLEASE WAIT...";
		climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
		desertCreation = 2;
	}
	else if (desertCreation==2)
	{
		desertCreation = 0;
		createDeserts();
	}
	else if (doPrintWorld==2)
	{
		printWorld();
//		getTime();
//		stage2Error.value += "\n" + timeText + " - [World printed.]";
		doPrintWorld = 0;
	}
	else if (doPrintWorld==1)
	{
		getTime();
		stage2Error.value = timeText + " - Drawing world...[main]"
		doPrintWorld = 2;
	}
	else if (buildFinished==1)
	{
		buildFinished = 0;
		getTime();
		constructorError.value += "\n" + timeText + " - [BUILD FINISHED] Click 'CONTINUE'.";
		constructorError.scrollTop = constructorError.scrollHeight;
		document.getElementById("waiting").style.display="none";
		document.getElementById("green").style.display="block";
		document.getElementById("buttonProceed").style.display="block";
	}
	else if (doSetWaterLevel==2)
	{
		getTime();
		constructorError.value += "\n" + timeText + " - [Water level set.]";
		constructorError.scrollTop = constructorError.scrollHeight;
		doSetWaterLevel = 0;
		buildFinished = 1;
	}
	else if (doSetWaterLevel==1)
	{
		getTime();
		constructorError.value += "\n" + timeText + " - Setting water level...";
		constructorError.scrollTop = constructorError.scrollHeight;
		setWaterLevel();
	}
	else if (doDetermineWaterLevel==2)
	{
		getTime();
		constructorError.value += "\n" + timeText + " - [Base water level: "+waterLevel+".]";
		constructorError.scrollTop = constructorError.scrollHeight;
		doDetermineWaterLevel = 0;
		doSetWaterLevel = 1;
	}
	else if (doDetermineWaterLevel==1)
	{
		getTime();
		constructorError.value += "\n" + timeText + " - Determining base water level...";
		constructorError.scrollTop = constructorError.scrollHeight;
		determineWaterLevel();
	}
	else if (doFlattenMap==2)
	{
		flattenMap();
		getTime();
		constructorError.value += "\n" + timeText + " - [Map flattened.]";
		constructorError.scrollTop = constructorError.scrollHeight;
		doFlattenMap = 0;
		doDetermineWaterLevel = 1;
	}
	else if (doFlattenMap==1)
	{
		getTime();
		constructorError.value += "\n" + timeText + " - Flattening map..."
		constructorError.scrollTop = constructorError.scrollHeight;
		doFlattenMap = 2;
	}
	else if (levelCompleted==1)
	{
		levelCompleted = 0;
		getTime();
		constructorError.value = constructorError.value + "\n" + timeText + " - [Level " + z + " created.]";
		constructorError.scrollTop = constructorError.scrollHeight;
		if (z==elevations)
		{
			doGrowWorld = 0;
			doFlattenMap = 1;
		}
		else
		{
			z = z + 1;
			doGrowWorld = 1;
		}
	}
	else if (doGrowWorld==1)
	{
		doGrowWorld = 0;
		growWorld();
	}
	else if (volcanoesSeeded==1)
	{
		volcanoesSeeded = 0;
		getTime();
		constructorError.value += "\n" + timeText + " - [Volcanoes seeded.]";
		constructorError.value += "\n" + timeText + " - [Level 1 created.]";
		constructorError.value += "\n" + timeText + " - Growing world...";
		constructorError.scrollTop = constructorError.scrollHeight;
		z = 2;
		doGrowWorld = 1;
	}
	else if (doSeedVolcanoes==2)
	{
		if (numVolcanoes==0)
		{
			doSeedVolcanoes = 0;
			volcanoesSeeded = 1;
		}
		else
		{
			seedVolcanoes();
		}
	}
	else if (doSeedVolcanoes==1)
	{
		getTime();
		constructorError.value += "\n" + timeText + " - Seeding volcanoes...";
		constructorError.scrollTop = constructorError.scrollHeight;
		if (numVolcanoes > 0)
		{
			doSeedVolcanoes = 2;
		}
		else
		{
			getTime();
			constructorError.value += "\n" + timeText + " - [No volcanoes.]";
			constructorError.value += "\n" + timeText + " - [Level 1 created.]";
			constructorError.value += "\n" + timeText + " - Growing world...";
			constructorError.scrollTop = constructorError.scrollHeight;
			doSeedVolcanoes = 0;
			z = 2;
			doGrowWorld = 1;
		}
	}
	else if (mountainRangesSeeded==1)
	{
		mountainRangesSeeded = 0;
		getTime();
		constructorError.value += "\n" + timeText + " - [Mountain ranges seeded.]";
		constructorError.scrollTop = constructorError.scrollHeight;
		doSeedVolcanoes = 1;
	}
	else if (doSeedMountainRanges==2)
	{
		doSeedMountainRanges = 0;
		seedMountainRanges();
	}
	else if (doSeedMountainRanges==1)
	{
		getTime();
		constructorError.value += "\n" + timeText + " - Seeding mountain ranges...";
		constructorError.scrollTop = constructorError.scrollHeight;
		if (numMtnRanges > 0)
		{
			doSeedMountainRanges = 2;
		}
		else
		{
			getTime();
			constructorError.value += "\n" + timeText + " - [No mountain ranges.]";
			constructorError.scrollTop = constructorError.scrollHeight;
			doSeedMountainRanges = 0;
			doSeedVolcanoes = 1;
		}
	}
	else if (worldArraysInitialized==1)
	{
		worldArraysInitialized = 0;
		getTime();
		constructorError.value += "\n" + timeText + " - [World arrays initialized. (" + countInitializations + ")]";
		constructorError.scrollTop = constructorError.scrollHeight;
		doSeedMountainRanges = 1;
	}
	else if (doInitWorldArrays==2)
	{
		doInitWorldArrays = 0;
		initWorldArrays();
	}
	else if (doInitWorldArrays==1)
	{
		getTime();
		constructorError.value += "\n" + timeText + " - Initializing world arrays...";
		constructorError.scrollTop = constructorError.scrollHeight;
		doInitWorldArrays = 2;
	}
	else if (doGatherBuilderValues==1)
	{
		getTime();
		constructorError.value += "\n" + timeText + " - Gathering values...";
		constructorError.scrollTop = constructorError.scrollHeight;
		gatherBuilderValues();
//		setHillMultiplier();
		getTime();
		constructorError.value += "\n" + timeText + " - [Values gathered.]";
		constructorError.scrollTop = constructorError.scrollHeight;
		doInitWorldArrays = 1;
		doGatherBuilderValues = 0;
	}
	else if (doCheckForContinentSelection==1)
	{
		getTime();
		constructorError.value += "\n" + timeText + " - Checking for continent selection...";
		checkForContinentSelection();
		if (continentsAreSelected==1)
		{
			getTime();
			constructorError.value += "\n" + timeText + " - [Continents selected.]";
			doGatherBuilderValues = 1;
		}
		else
		{
			getTime();
			constructorError.value += "\n" + timeText + " - [*** ERROR ***]: No continents selected!";
			document.getElementById("waiting").style.display="none";
			document.getElementById("red").style.display="block";
			document.getElementById("buttonReturnToBuilder").style.display="block";
		}
		doCheckForContinentSelection = 0;
	}
	else if (doBuildWorld==1)
	{
		gatherBuilderValues();
		if (errorText == "")
		{
			document.getElementById("divBuilder").style.display="none";
			document.getElementById("divConstructor").style.display="block";
			divBuilderOn = 0;
			divConstructorOn = 1;
			getTime();
			constructorError.value = timeText + " - [BUILD START]";
			doBuildWorld = 0;
			doCheckForContinentSelection = 1;
		}
		else
		{
			builderError.value += "\n[*** ERROR ***]" + errorText;
			errorText = "";
			doBuildWorld = 0;
		}
	}
	else if (doAddShallows==1)
	{
		numShallows = addShallowsTextArea.value;
		doAddShallows = 0;
		addShallows();
		shallowsCount = shallowsCount + 1;
		if (shallowsCount==1)
		{
			stage2Error.value = stage2Error.value + "\n"+shallowsCount+" shallow created.";
			stage2Error.scrollTop = stage2Error.scrollHeight;
		}
		else
		{
			stage2Error.value = stage2Error.value + "\n"+shallowsCount+" shallows created.";
			stage2Error.scrollTop = stage2Error.scrollHeight;
		}
		if (shallowsCount < numShallows)
		{
			doAddShallows = 1;
		}
		else
		{
			drawMap();
		}
	}
	else if (doAddBeaches==1)
	{
		numBeaches = addBeachesTextArea.value;
		doAddBeaches = 0;
		addBeaches();
		beachesCount = beachesCount + 1;
		if (beachesCount==1)
		{
			stage2Error.value = stage2Error.value + "\n"+beachesCount+" beach created.";
			stage2Error.scrollTop = stage2Error.scrollHeight;
		}
		else
		{
			stage2Error.value = stage2Error.value + "\n"+beachesCount+" beaches created.";
			stage2Error.scrollTop = stage2Error.scrollHeight;
		}
		if (beachesCount < numBeaches)
		{
			doAddBeaches = 1;
		}
		else
		{
			drawMap();
		}
	}
	else if (buttonAddLavaFlow==1)
	{
		buttonAddLavaFlow = 0;
		lavaFlowCount = 0;
		numLavaFlows = addLavaFlowsTextArea.value;

		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				mapArrayDev2[x][y] = mapArrayDev[x][y];
			}
		}

		doAddLavaFlow = 1;
	}
	else if (doAddLavaFlow==1)
	{
		doAddLavaFlow = 0;

		addLavaFlow();
		lavaFlowCount = lavaFlowCount + 1;
		if (lavaFlowCount==1)
		{
			stage2Error.value += "\n"+lavaFlowCount+" lava flow created.";
			stage2Error.scrollTop = stage2Error.scrollHeight;
		}
		else
		{
			stage2Error.value += "\n"+lavaFlowCount+" lava flows created.";
			stage2Error.scrollTop = stage2Error.scrollHeight;
		}
		if (lavaFlowCount < numLavaFlows)
		{
			doAddLavaFlow = 1;
		}
		else
		{
			for (y=1;y<=mapSizeY;y++)
			{
				for (x=1;x<=mapSizeX;x++)
				{
					mapArrayDev[x][y] = mapArrayDev2[x][y];
				}
			}
			drawMap();
		}
	}
	else if (buttonAddRiver==1)
	{
		buttonAddRiver = 0;
		riverCount = 0;
		numRivers = addRiversTextArea.value;

		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				mapArrayDev2[x][y] = mapArrayDev[x][y];
			}
		}

		doAddRiver = 1;
	}
	else if (doAddRiver==1)
	{
		doAddRiver = 0;

		addRiver();
		riverCount = riverCount + 1;
		if (riverCount==1)
		{
			stage2Error.value += "\n"+riverCount+" river created.";
			stage2Error.scrollTop = stage2Error.scrollHeight;
		}
		else
		{
			stage2Error.value += "\n"+riverCount+" rivers created.";
			stage2Error.scrollTop = stage2Error.scrollHeight;
		}
		if (riverCount < numRivers)
		{
			doAddRiver = 1;
		}
		else
		{
			for (y=1;y<=mapSizeY;y++)
			{
				for (x=1;x<=mapSizeX;x++)
				{
					mapArrayDev[x][y] = mapArrayDev2[x][y];
				}
			}
			drawMap();
		}
	}
	else if (displayRunGif > 0)
	{
		document.getElementById("rungif").style.display="block";
		displayRunGif = displayRunGif - 1;
	}
	else if (displayRunGif <= 0)
	{
		document.getElementById("rungif").style.display="none";
	}
}

function copyTextDisplayNCR()
{
	textArrayCopyString = "";
	textArrayNCRString = "";

	for (y=1;y<=mapSizeY;y++)
	{
		for (x=1;x<=mapSizeX;x++)
		{
			textArrayNCRString += mapArrayDev[x][y];
		}
	}

	if (specificBrowser=="Safari")
	{
 		window.prompt ("Text below is the RAW map data (with NO carriage returns).\n\nClick on the text in the box below, press 'Ctrl+A' (Select All), then press 'Ctrl+C' (Copy), then paste the text in to a text editor.\n\n*** Remember your world width and world height! ***", textArrayNCRString);
	}
	else
	{
		window.prompt ("Text below is the RAW map data (with NO carriage returns).\n\nSelect 'Copy' from 'Edit' menu or press 'Ctrl+C', then paste the text in to a text editor.\n\n*** Remember your world width and world height! ***", textArrayNCRString);
	}
}

function copyTextDisplay()
{
	textArrayCopyString = "";
	textArrayNCRString = "";

	for (y=1;y<=mapSizeY;y++)
	{
		for (x=1;x<=mapSizeX;x++)
		{
			textArrayCopyString += mapArrayDev[x][y];
		}
		textArrayCopyString += "\n";
	}

	if (specificBrowser=="Safari")
	{
 		window.prompt ("Text below is the FORMATTED map data (with carriage returns).\n\nClick on the text in the box below, press 'Ctrl+A' (Select All), then press 'Ctrl+C' (Copy), then paste the text in to a text editor.\n\n*** Remember your world width and world height! ***", textArrayCopyString);
 	}
 	else
 	{
 		window.prompt ("Text below is the FORMATTED map data (with carriage returns).\n\nSelect 'Copy' from 'Edit' menu or press 'Ctrl+C', then paste the text in to a text editor.\n\n*** Remember your world width and world height! ***", textArrayCopyString);
 	}
}

function closeAllDivs()
{
	document.getElementById("divSplash").style.display="none";
	document.getElementById("divConstructor").style.display="none";
	document.getElementById("divConstructorStage2").style.display="none";
	document.getElementById("divAbout").style.display="none";
	document.getElementById("divInstructions").style.display="none";
	document.getElementById("divBuilder").style.display="none";
	document.getElementById("divClimateBuilder").style.display="none";
	document.getElementById("divZoomEdit").style.display="none";
	document.getElementById("divLoad").style.display="none";
	document.getElementById("divWorldMap").style.display="none";
	document.getElementById("divCompressedText").style.display="none";
	document.getElementById("divDisplayText").style.display="none";
}

function openBuilder()
{
	closeAllDivs();
	document.getElementById("divBuilder").style.display="block";
	divSplashOn = 0;
	divConstructorOn = 0;
	divConstructorStage2On = 0;
	divAboutOn = 0;
	divInstructionsOn = 0;
	divBuilderOn = 1;
}

function instructions()
{
	closeAllDivs();
	document.getElementById("divInstructions").style.display="block";
}

function closeInstructions()
{
	closeAllDivs();

	if (divBuilderOn==1)
	{
		document.getElementById("divBuilder").style.display="block";
	}
	else if (divConstructorOn==1)
	{
		document.getElementById("divConstructor").style.display="block";
	}
	else if (divConstructorStage2On==1)
	{
		document.getElementById("divConstructorStage2").style.display="block";
	}
	else if (divSplashOn==1)
	{
		document.getElementById("divSplash").style.display="block";
	}
	else if (divClimateBuilderOn==1)
	{
		document.getElementById("divClimateBuilder").style.display="block";
	}
	else if (divLoadOn==1)
	{
		document.getElementById("divLoad").style.display="block";
	}
	else if (divWorldMapOn==1)
	{
		document.getElementById("divWorldMap").style.display="block";
	}
	else if (divCompressedTextOn==1)
	{
		document.getElementById("divCompressedText").style.display="block";
	}
	else if (divDisplayTextOn==1)
	{
		document.getElementById("divDisplayText").style.display="block";
	}
	else if (divZoomEditOn==1)
	{
		document.getElementById("divZoomEdit").style.display="block";
	}
}

function about()
{
	closeAllDivs();
	localStorage.aboutArrow = "1";
	document.getElementById("aboutArrowPic").style.display="none";
	document.getElementById("divAbout").style.display="block";
}

function closeAbout()
{
	closeAllDivs();

	if (divBuilderOn==1)
	{
		document.getElementById("divBuilder").style.display="block";
	}
	else if (divConstructorOn==1)
	{
		document.getElementById("divConstructor").style.display="block";
	}
	else if (divConstructorStage2On==1)
	{
		document.getElementById("divConstructorStage2").style.display="block";
	}
	else if (divSplashOn==1)
	{
		document.getElementById("divSplash").style.display="block";
	}
	else if (divClimateBuilderOn==1)
	{
		document.getElementById("divClimateBuilder").style.display="block";
	}
	else if (divLoadOn==1)
	{
		document.getElementById("divLoad").style.display="block";
	}
	else if (divWorldMapOn==1)
	{
		document.getElementById("divWorldMap").style.display="block";
	}
	else if (divCompressedTextOn==1)
	{
		document.getElementById("divCompressedText").style.display="block";
	}
	else if (divDisplayTextOn==1)
	{
		document.getElementById("divDisplayText").style.display="block";
	}
	else if (divZoomEditOn==1)
	{
		document.getElementById("divZoomEdit").style.display="block";
	}
}

function editLand()
{

/*

#range {
    -webkit-appearance: slider-vertical;
    width: 20px;
    height: 100px;
}

//	<!--
//	<input type="range" id="range" min="?" max="}" step="$" value="&" />
//	-->

types of land:
	deep water
	shallow water
	sand
	dirt
	tundra
	swamp
	grass
	long grass
	scrub
	trees
	forest
	boreal
	hills
	lava
	low mountains
	high mountains

*/

	document.getElementById("divConstructorStage2").style.display="none";
//	document.getElementById("divLandEditor").style.display="block";

}

function addLavaFlow()
{
//	for (y=1;y<=mapSizeY;y++)
//	{
//		for (x=1;x<=mapSizeX;x++)
//		{
//			mapArrayDev2[x][y] = mapArrayDev[x][y];
//		}
//	}

//	document.myform.adjustmentError.value = document.myform.adjustmentError.value + "\nRemoving burn zones...";
//	document.myform.adjustmentError.scrollTop = document.myform.adjustmentError.scrollHeight;

	//	REMOVE ALL BURN ZONES

//	for (y=1;y<=mapSizeY;y++)
//	{
//		for (x=1;x<=mapSizeX;x++)
//		{
//			if (mapArrayDev[x][y] == "-")
//			{
//				mapArrayDev[x][y] = "*";
//			}
//		}
//	}

	//	SELECT A VOLCANO POINT

	//	volcanoCount = number of volcanoes plotted
	//	volcanoXArray
	//	volcanoYArray

	selectedVolcano = Math.floor(Math.random()*volcanoCount)+1;

	flowX = volcanoXArray[selectedVolcano];
	flowY = volcanoYArray[selectedVolcano];

	//	PICK INITIAL FLOW DIRECTION

	oldFlowDirection = Math.floor(Math.random()*8)+1;

	thisIsLava = 1;

	riverX = flowX;
	riverY = flowY;

//	plotRiver();
	newPlotRiver3();

	pickRiverDirection();

	thisIsLava = 0;

	flowX = riverX;
	flowY = riverY;

//	stage2Error.value += "\nAdding burn zone.";
//	stage2Error.scrollTop = stage2Error.scrollHeight;

	for (y=1;y<=mapSizeY;y++)
	{
		for (x=1;x<=mapSizeX;x++)
		{
			if (mapArrayDev2[x][y]=="*")
			{
				for (def=(-1);def<=1;def++)
				{
					jkl = def;
					for (abc=(-1);abc<=1;abc++)
					{
						ghi = abc;
						if (def==0 && abc==0)
						{

						}
						else
						{
							try
							{
								if ((x+ghi) < 1)
								{
									ghix = mapSizeX;
								}
								else if ((x+ghi) > mapSizeX)
								{
									ghix = 1;
								}
								else
								{
									ghix = ((x-0)+(ghi-0));
								}

								if ((y+jkl) < 1)
								{
									jklx = mapSizeY;
								}
								else if ((y+jkl) > mapSizeY)
								{
									jklx = 1;
								}
								else
								{
									jklx = ((y-0)+(jkl-0));
								}
								/*
								if (mapArrayDev2[((x-0)+(ghix-0))][((y-0)+(jklx-0))] != "*" &&
									mapArrayDev2[((x-0)+(ghix-0))][((y-0)+(jklx-0))] != "-" &&
									mapArrayDev2[((x-0)+(ghix-0))][((y-0)+(jklx-0))] != "a" &&
									mapArrayDev2[((x-0)+(ghix-0))][((y-0)+(jklx-0))] != "b" &&
									mapArrayDev2[((x-0)+(ghix-0))][((y-0)+(jklx-0))] != "R" &&
									mapArrayDev2[((x-0)+(ghix-0))][((y-0)+(jklx-0))] != "X" &&
									mapArrayDev2[((x-0)+(ghix-0))][((y-0)+(jklx-0))] != "Q")
								{
									mapArrayDev2[((x-0)+(ghix-0))][((y-0)+(jklx-0))] = "-";
								//	stage2Error.value += "\nAdded burned tile at "+((x-0)+(ghix-0))+","+((y-0)+(jklx-0))+".";
								//	stage2Error.scrollTop = stage2Error.scrollHeight;
								}
								*/

								if (mapArrayDev2[ghix][jklx] != "*" &&
									mapArrayDev2[ghix][jklx] != "-" &&
									mapArrayDev2[ghix][jklx] != "R" &&
									mapArrayDev2[ghix][jklx] != "X" &&
									mapArrayDev2[ghix][jklx] != "a" &&
									mapArrayDev2[ghix][jklx] != "b" &&
									mapArrayDev2[ghix][jklx] != "Q")
								{
									mapArrayDev2[ghix][jklx] = "-";
								//	stage2Error.value += "\nAdded burned tile at "+((x-0)+(ghix-0))+","+((y-0)+(jklx-0))+".";
								//	stage2Error.scrollTop = stage2Error.scrollHeight;
								}
							}
							catch(err)
							{
								stage2Error.value += "\nERROR (addLavaFlow): x:"+x+", ghix:"+ghix+", y:"+y+", jklx:"+jklx;
								stage2Error.scrollTop = stage2Error.scrollHeight;
							}
						}
					}
				}
			}
		}
	}

	for (y=1;y<=mapSizeY;y++)
	{
		for (x=1;x<=mapSizeX;x++)
		{
			mapArrayDev[x][y] = mapArrayDev2[x][y];
		}
	}
}

function addRiver()
{

	goodRiverStartPoint = 0;

	var riverPointCount = 0;

	while (goodRiverStartPoint == 0)
	{
//		adjustedMapSizeX = mapSizeX;
//		adjustedMapSizeY = mapSizeY;

		riverX = Math.floor(Math.random()*mapSizeX)+1;
		riverY = Math.floor(Math.random()*mapSizeY)+1;

//		riverX = riverX + Math.round(mapSizeX * 0.1);
//		riverY = riverY + Math.round(mapSizeY * 0.1);

		riverPointCount = riverPointCount + 1;

		if (waterLevel==4)
		{
			if (mapArrayDev[riverX][riverY]=="b")
			{
				goodRiverStartPoint = 1;
			}
		}
		else if (waterLevel==5)
		{
			if (mapArrayDev[riverX][riverY]=="b")
			{
				goodRiverStartPoint = 1;
			}
		}
		else if (waterLevel==6)
		{
			if (mapArrayDev[riverX][riverY]=="b" ||
				mapArrayDev[riverX][riverY]=="c")
			{
				goodRiverStartPoint = 1;
			}
		}
		else if (waterLevel==7)
		{
			if (mapArrayDev[riverX][riverY]=="b" ||
				mapArrayDev[riverX][riverY]=="c")
			{
				goodRiverStartPoint = 1;
			}
		}
		else if (waterLevel==8)
		{
			if (mapArrayDev[riverX][riverY]=="b" ||
				mapArrayDev[riverX][riverY]=="c")
			{
				goodRiverStartPoint = 1;
			}
		}
		else if (waterLevel==9)
		{
			if (mapArrayDev[riverX][riverY]=="b" ||
				mapArrayDev[riverX][riverY]=="c" ||
				mapArrayDev[riverX][riverY]=="d")
			{
				goodRiverStartPoint = 1;
			}
		}
		else if (waterLevel==10)
		{
			if (mapArrayDev[riverX][riverY]=="b" ||
				mapArrayDev[riverX][riverY]=="c" ||
				mapArrayDev[riverX][riverY]=="d")
			{
				goodRiverStartPoint = 1;
			}
		}
		else if (waterLevel==11)
		{
			if (mapArrayDev[riverX][riverY]=="b" ||
				mapArrayDev[riverX][riverY]=="c" ||
				mapArrayDev[riverX][riverY]=="d")
			{
				goodRiverStartPoint = 1;
			}
		}
		else if (waterLevel==12)
		{
			if (mapArrayDev[riverX][riverY]=="b" ||
				mapArrayDev[riverX][riverY]=="c" ||
				mapArrayDev[riverX][riverY]=="d" ||
				mapArrayDev[riverX][riverY]=="e")
			{
				goodRiverStartPoint = 1;
			}
		}
		else if (waterLevel==13)
		{
			if (mapArrayDev[riverX][riverY]=="b" ||
				mapArrayDev[riverX][riverY]=="c" ||
				mapArrayDev[riverX][riverY]=="d" ||
				mapArrayDev[riverX][riverY]=="e")
			{
				goodRiverStartPoint = 1;
			}
		}
		else if (waterLevel==14)
		{
			if (mapArrayDev[riverX][riverY]=="b" ||
				mapArrayDev[riverX][riverY]=="c" ||
				mapArrayDev[riverX][riverY]=="d" ||
				mapArrayDev[riverX][riverY]=="e")
			{
				goodRiverStartPoint = 1;
			}
		}
		else if (waterLevel==15)
		{
			if (mapArrayDev[riverX][riverY]=="b" ||
				mapArrayDev[riverX][riverY]=="c" ||
				mapArrayDev[riverX][riverY]=="d" ||
				mapArrayDev[riverX][riverY]=="e")
			{
				goodRiverStartPoint = 1;
			}
		}
		else if (waterLevel==16)
		{
			if (mapArrayDev[riverX][riverY]=="b" ||
				mapArrayDev[riverX][riverY]=="c" ||
				mapArrayDev[riverX][riverY]=="d" ||
				mapArrayDev[riverX][riverY]=="e" ||
				mapArrayDev[riverX][riverY]=="f")
			{
				goodRiverStartPoint = 1;
			}
		}
		else if (waterLevel >= 17 && waterLevel <= 31)
		{
			if (mapArrayDev[riverX][riverY]=="b" ||
				mapArrayDev[riverX][riverY]=="c" ||
				mapArrayDev[riverX][riverY]=="d" ||
				mapArrayDev[riverX][riverY]=="e" ||
				mapArrayDev[riverX][riverY]=="f")
			{
				goodRiverStartPoint = 1;
			}
		}
		else if (riverPointCount==10000)
		{
			goodRiverStartPoint = 1;
		}
	}

//	stage2Error.value += "\nPicked "+riverX+","+riverY;
//	stage2Error.scrollTop = stage2Error.scrollHeight;

//	plotRiver();
	newPlotRiver3();

	pickRiverDirection();
}

function pickRiverDirection()
{
	riverEnd = 0;
	riverTries = 0;

	while (riverEnd==0)
	{

		var checkedTileValue = new Array(8);
		var directionOkay = new Array(8);

		for (x=1;x<=8;x++)
		{
			directionOkay[x] = 0;
		}

		try
		{
			landTile = mapArrayDev[riverX][riverY];
		}
		catch(err)
		{
			stage2Error.value += "\nERROR (pickRiverDirection, 653): "+riverX+","+riverY;
			stage2Error.scrollTop = stage2Error.scrollHeight;
		}

		setTileValue();
		centralTileValue = landTileValue;

	//	stage2Error.value += "\nPosition: 0, Character: "+landTile+", Value: "+landTileValue;
	//	stage2Error.scrollTop = stage2Error.scrollHeight;

		tilePosition = 1;

		//	CHECK AJACENT TILES

		waterAjacent = 0;

		for (y=(-1);y<=1;y++)
		{
			yb = y;
			for (x=(-1);x<=1;x++)
			{

				if (y==0 && x==0)
				{
					x = 1;
				}

				xb = x;

				if ((riverX + xb) < 1)
				{
					xb = (mapSizeX - 1);
				}
				else if ((riverX + xb) > mapSizeX)
				{
					xb = ((mapSizeX * (-1)) + 1);
				}

				if ((riverY + yb) < 1)
				{
					yb = (mapSizeY - 1);
				}
				else if ((riverY + yb) > mapSizeY)
				{
					yb = ((mapSizeY * (-1)) + 1);
				}

				try
				{
					landTile = mapArrayDev[((riverX-0)+(xb-0))][((riverY-0)+(yb-0))];
				}
				catch(err)
				{
					stage2Error.value += "\nERROR (pickRiverDirection, 706): "+(riverX+xb)+","+(riverY+yb);
					stage2Error.scrollTop = stage2Error.scrollHeight;
				}

				//	IS AJACENT TILE WATER?

				if (landTile=="X" || landTile=="Q")
				{
					waterAjacent = 1;
				}
				else
				{
					setTileValue();
					checkedTileValue[tilePosition] = landTileValue;
				//	stage2Error.value += "\nPosition: "+tilePosition+", Character: "+landTile+", Value: "+landTileValue;
				//	stage2Error.scrollTop = stage2Error.scrollHeight;
				}
				tilePosition++;
			}
		}
		if (waterAjacent==1)
		{
			riverEnd = 1;
		//	stage2Error.value += "\nWater ajacent!";
		//	stage2Error.scrollTop = stage2Error.scrollHeight;
		}
		else if (riverTries == 10000)
		{
			riverEnd = 1;
		//	stage2Error.value += "\nIn a hole!";
		//	stage2Error.scrollTop = stage2Error.scrollHeight;
		}
		else
		{
			riverTries += 1;

			//	SET LOWEST TILE VALUE

			lowestTileValue = centralTileValue;

			if (checkedTileValue[1] > centralTileValue)			{lowestTileValue = checkedTileValue[1];}

			if (checkedTileValue[2] > centralTileValue &&
				checkedTileValue[2] > checkedTileValue[1])		{lowestTileValue = checkedTileValue[2];}

			if (checkedTileValue[3] > centralTileValue &&
				checkedTileValue[3] > checkedTileValue[1] &&
				checkedTileValue[3] > checkedTileValue[2])		{lowestTileValue = checkedTileValue[3];}

			if (checkedTileValue[4] > centralTileValue &&
				checkedTileValue[4] > checkedTileValue[1] &&
				checkedTileValue[4] > checkedTileValue[2] &&
				checkedTileValue[4] > checkedTileValue[3])		{lowestTileValue = checkedTileValue[4];}

			if (checkedTileValue[5] > centralTileValue &&
				checkedTileValue[5] > checkedTileValue[1] &&
				checkedTileValue[5] > checkedTileValue[2] &&
				checkedTileValue[5] > checkedTileValue[3] &&
				checkedTileValue[5] > checkedTileValue[4])		{lowestTileValue = checkedTileValue[5];}

			if (checkedTileValue[6] > centralTileValue &&
				checkedTileValue[6] > checkedTileValue[1] &&
				checkedTileValue[6] > checkedTileValue[2] &&
				checkedTileValue[6] > checkedTileValue[3] &&
				checkedTileValue[6] > checkedTileValue[4] &&
				checkedTileValue[6] > checkedTileValue[5])		{lowestTileValue = checkedTileValue[6];}

			if (checkedTileValue[7] > centralTileValue &&
				checkedTileValue[7] > checkedTileValue[1] &&
				checkedTileValue[7] > checkedTileValue[2] &&
				checkedTileValue[7] > checkedTileValue[3] &&
				checkedTileValue[7] > checkedTileValue[4] &&
				checkedTileValue[7] > checkedTileValue[5] &&
				checkedTileValue[7] > checkedTileValue[6])		{lowestTileValue = checkedTileValue[7];}

			if (checkedTileValue[8] > centralTileValue &&
				checkedTileValue[8] > checkedTileValue[1] &&
				checkedTileValue[8] > checkedTileValue[2] &&
				checkedTileValue[8] > checkedTileValue[3] &&
				checkedTileValue[8] > checkedTileValue[4] &&
				checkedTileValue[8] > checkedTileValue[5] &&
				checkedTileValue[8] > checkedTileValue[6] &&
				checkedTileValue[8] > checkedTileValue[7])		{lowestTileValue = checkedTileValue[8];}

		//	stage2Error.value += "\nlowestTileValue = "+lowestTileValue;
		//	stage2Error.scrollTop = stage2Error.scrollHeight;

			//	SET OKAYED DIRECTIONS

			for (x=1;x<=8;x++)
			{
				if (checkedTileValue[x]==lowestTileValue)
				{
					directionOkay[x] = 1;
				//	stage2Error.value += "\ndirectionOkay["+x+"] = "+directionOkay[x];
				//	stage2Error.scrollTop = stage2Error.scrollHeight;
				}
			}

			//	111111111111111111111111111111111111111111111111

			if (thisIsLava==1)
			{
				curveChance = lavaCurvynessTextArea.value
			}
			else
			{
				curveChance = riverCurvynessTextArea.value;
			}

			if (directionOkay[1]==1 && oldRiverDirection==1)
			{
				var makeTheRiver = 0;
				while (makeTheRiver==0)
				{
					randomNumber = Math.floor(Math.random()*100)+1;
					if (randomNumber < curveChance)
					{
						randomNumber = Math.floor(Math.random()*100)+1;
						if (randomNumber < 51)
						{
							// GO LEFT!

							if (directionOkay[4]==1)
							{
								oldRiverDirection = 4;
								riverX = riverX - 1;
								riverY = riverY;
								makeTheRiver = 1;
							//	stage2Error.value += "\nLeft.";
							//	stage2Error.scrollTop = stage2Error.scrollHeight;
							}
						}
						else
						{
							// GO RIGHT!

							if (directionOkay[2]==1)
							{
								oldRiverDirection = 2;
								riverX = riverX;
								riverY = riverY - 1;
								makeTheRiver = 1;
							//	stage2Error.value += "\nRight.";
							//	stage2Error.scrollTop = stage2Error.scrollHeight;
							}
						}
					}
					else
					{
						oldRiverDirection = 1;
						riverX = riverX - 1;
						riverY = riverY - 1;
						makeTheRiver = 1;
					//	stage2Error.value += "\nStraight.";
					//	stage2Error.scrollTop = stage2Error.scrollHeight;
					}
				}
			}

			//	22222222222222222222222222222222222222222222222222222

			else if (directionOkay[2]==1 && oldRiverDirection==2)
			{
				var makeTheRiver = 0;
				while (makeTheRiver==0)
				{
					randomNumber = Math.floor(Math.random()*100)+1;
					if (randomNumber < curveChance)
					{
						randomNumber = Math.floor(Math.random()*100)+1;
						if (randomNumber < 51)
						{
							// GO LEFT!

							if (directionOkay[1]==1)
							{
								oldRiverDirection = 1;
								riverX = riverX - 1;
								riverY = riverY - 1;
								makeTheRiver = 1;
							//	stage2Error.value += "\nLeft.";
							//	stage2Error.scrollTop = stage2Error.scrollHeight;
							}
						}
						else
						{
							// GO RIGHT!

							if (directionOkay[3]==1)
							{
								oldRiverDirection = 3;
								riverX = riverX + 1;
								riverY = riverY - 1;
								makeTheRiver = 1;
							//	stage2Error.value += "\nRight.";
							//	stage2Error.scrollTop = stage2Error.scrollHeight;
							}
						}
					}
					else
					{
						oldRiverDirection = 2;
						riverX = riverX;
						riverY = riverY - 1;
						makeTheRiver = 1;
					//	stage2Error.value += "\nStraight.";
					//	stage2Error.scrollTop = stage2Error.scrollHeight;
					}
				}
			}

			//	33333333333333333333333333333333333333333333333333333

			else if (directionOkay[3]==1 && oldRiverDirection==3)
			{
				var makeTheRiver = 0;
				while (makeTheRiver==0)
				{
					randomNumber = Math.floor(Math.random()*100)+1;
					if (randomNumber < curveChance)
					{
						randomNumber = Math.floor(Math.random()*100)+1;
						if (randomNumber < 51)
						{
							// GO LEFT!

							if (directionOkay[2]==1)
							{
								oldRiverDirection = 2;
								riverX = riverX;
								riverY = riverY - 1;
								makeTheRiver = 1;
							//	stage2Error.value += "\nLeft.";
							//	stage2Error.scrollTop = stage2Error.scrollHeight;
							}
						}
						else
						{
							// GO RIGHT!

							if (directionOkay[5]==1)
							{
								oldRiverDirection = 5;
								riverX = riverX + 1;
								riverY = riverY;
								makeTheRiver = 1;
							//	stage2Error.value += "\nRight.";
							//	stage2Error.scrollTop = stage2Error.scrollHeight;
							}
						}
					}
					else
					{
						oldRiverDirection = 3;
						riverX = riverX + 1;
						riverY = riverY - 1;
						makeTheRiver = 1;
					//	stage2Error.value += "\nStraight.";
					//	stage2Error.scrollTop = stage2Error.scrollHeight;
					}
				}
			}

			//	44444444444444444444444444444444444444444444444444444

			else if (directionOkay[4]==1 && oldRiverDirection==4)
			{
				var makeTheRiver = 0;
				while (makeTheRiver==0)
				{
					randomNumber = Math.floor(Math.random()*100)+1;
					if (randomNumber < curveChance)
					{
						randomNumber = Math.floor(Math.random()*100)+1;
						if (randomNumber < 51)
						{
							// GO LEFT!

							if (directionOkay[6]==1)
							{
								oldRiverDirection = 6;
								riverX = riverX - 1;
								riverY = riverY + 1;
								makeTheRiver = 1;
							//	stage2Error.value += "\nLeft.";
							//	stage2Error.scrollTop = stage2Error.scrollHeight;
							}
						}
						else
						{
							// GO RIGHT!

							if (directionOkay[1]==1)
							{
								oldRiverDirection = 1;
								riverX = riverX - 1;
								riverY = riverY - 1;
								makeTheRiver = 1;
							//	stage2Error.value += "\nRight.";
							//	stage2Error.scrollTop = stage2Error.scrollHeight;
							}
						}
					}
					else
					{
						oldRiverDirection = 4;
						riverX = riverX - 1;
						riverY = riverY;
						makeTheRiver = 1;
					//	stage2Error.value += "\nStraight.";
					//	stage2Error.scrollTop = stage2Error.scrollHeight;
					}
				}
			}

			//	55555555555555555555555555555555555555555555555555555

			else if (directionOkay[5]==1 && oldRiverDirection==5)
			{
				var makeTheRiver = 0;
				while (makeTheRiver==0)
				{
					randomNumber = Math.floor(Math.random()*100)+1;
					if (randomNumber < curveChance)
					{
						randomNumber = Math.floor(Math.random()*100)+1;
						if (randomNumber < 51)
						{
							// GO LEFT!

							if (directionOkay[3]==1)
							{
								oldRiverDirection = 3;
								riverX = riverX + 1;
								riverY = riverY - 1;
								makeTheRiver = 1;
							//	stage2Error.value += "\nLeft.";
							//	stage2Error.scrollTop = stage2Error.scrollHeight;
							}
						}
						else
						{
							// GO RIGHT!

							if (directionOkay[8]==1)
							{
								oldRiverDirection = 8;
								riverX = riverX + 1;
								riverY = riverY + 1;
								makeTheRiver = 1;
							//	stage2Error.value += "\nRight.";
							//	stage2Error.scrollTop = stage2Error.scrollHeight;
							}
						}
					}
					else
					{
						oldRiverDirection = 5;
						riverX = riverX + 1;
						riverY = riverY;
						makeTheRiver = 1;
					//	stage2Error.value += "\nStraight.";
					//	stage2Error.scrollTop = stage2Error.scrollHeight;
					}
				}
			}

			//	66666666666666666666666666666666666666666666666666666

			else if (directionOkay[6]==1 && oldRiverDirection==6)
			{
				var makeTheRiver = 0;
				while (makeTheRiver==0)
				{
					randomNumber = Math.floor(Math.random()*100)+1;
					if (randomNumber < curveChance)
					{
						randomNumber = Math.floor(Math.random()*100)+1;
						if (randomNumber < 51)
						{
							// GO LEFT!

							if (directionOkay[7]==1)
							{
								oldRiverDirection = 7;
								riverX = riverX;
								riverY = riverY + 1;
								makeTheRiver = 1;
							//	stage2Error.value += "\nLeft.";
							//	stage2Error.scrollTop = stage2Error.scrollHeight;
							}
						}
						else
						{
							// GO RIGHT!

							if (directionOkay[4]==1)
							{
								oldRiverDirection = 4;
								riverX = riverX - 1;
								riverY = riverY;
								makeTheRiver = 1;
							//	stage2Error.value += "\nRight.";
							//	stage2Error.scrollTop = stage2Error.scrollHeight;
							}
						}
					}
					else
					{
						oldRiverDirection = 6;
						riverX = riverX - 1;
						riverY = riverY + 1;
						makeTheRiver = 1;
					//	stage2Error.value += "\nStraight.";
					//	stage2Error.scrollTop = stage2Error.scrollHeight;
					}
				}
			}

			//	77777777777777777777777777777777777777777777777777777

			else if (directionOkay[7]==1 && oldRiverDirection==7)
			{
				var makeTheRiver = 0;
				while (makeTheRiver==0)
				{
					randomNumber = Math.floor(Math.random()*100)+1;
					if (randomNumber < curveChance)
					{
						randomNumber = Math.floor(Math.random()*100)+1;
						if (randomNumber < 51)
						{
							// GO LEFT!

							if (directionOkay[8]==1)
							{
								oldRiverDirection = 8;
								riverX = riverX + 1;
								riverY = riverY + 1;
								makeTheRiver = 1;
							//	stage2Error.value += "\nLeft.";
							//	stage2Error.scrollTop = stage2Error.scrollHeight;
							}
						}
						else
						{
							// GO RIGHT!

							if (directionOkay[6]==1)
							{
								oldRiverDirection = 6;
								riverX = riverX - 1;
								riverY = riverY + 1;
								makeTheRiver = 1;
							//	stage2Error.value += "\nRight.";
							//	stage2Error.scrollTop = stage2Error.scrollHeight;
							}
						}
					}
					else
					{
						oldRiverDirection = 7;
						riverX = riverX;
						riverY = riverY + 1;
						makeTheRiver = 1;
					//	stage2Error.value += "\nStraight.";
					//	stage2Error.scrollTop = stage2Error.scrollHeight;
					}
				}
			}

			//	88888888888888888888888888888888888888888888888888888

			else if (directionOkay[8]==1 && oldRiverDirection==8)
			{
				var makeTheRiver = 0;
				while (makeTheRiver==0)
				{
					randomNumber = Math.floor(Math.random()*100)+1;
					if (randomNumber < curveChance)
					{
						randomNumber = Math.floor(Math.random()*100)+1;
						if (randomNumber < 51)
						{
							// GO LEFT!

							if (directionOkay[5]==1)
							{
								oldRiverDirection = 5;
								riverX = riverX + 1;
								riverY = riverY;
								makeTheRiver = 1;
							//	stage2Error.value += "\nLeft.";
							//	stage2Error.scrollTop = stage2Error.scrollHeight;
							}
						}
						else
						{
							// GO RIGHT!

							if (directionOkay[7]==1)
							{
								oldRiverDirection = 7;
								riverX = riverX;
								riverY = riverY + 1;
								makeTheRiver = 1;
							//	stage2Error.value += "\nRight.";
							//	stage2Error.scrollTop = stage2Error.scrollHeight;
							}
						}
					}
					else
					{
						oldRiverDirection = 8;
						riverX = riverX + 1;
						riverY = riverY + 1;
						makeTheRiver = 1;
					//	stage2Error.value += "\nStraight.";
					//	stage2Error.scrollTop = stage2Error.scrollHeight;
					}
				}
			}

			else
			{
				var directionChosen = 0;
				var randomTries = 0;

/*
				1	2	3

				4		5

				6	7	8
*/

				while (directionChosen==0 && randomTries < 1000)
				{
					randomTries += 1;
					randomNumber = Math.floor(Math.random()*8)+1;

					if (randomNumber==1 && directionOkay[1]==1 && oldRiverDirection != 8)
					{
						oldRiverDirection = 1;
						riverX -= 1;
						riverY -= 1;
						directionChosen = 1;
					}
					else if (randomNumber==2 && directionOkay[2]==1 && oldRiverDirection != 7)
					{
						oldRiverDirection = 2;
						riverX -= 0;
						riverY -= 1;
						directionChosen = 1;
					}
					else if (randomNumber==3 && directionOkay[3]==1 && oldRiverDirection != 6)
					{
						oldRiverDirection = 3;
						riverX += 1;
						riverY -= 1;
						directionChosen = 1;
					}
					else if (randomNumber==4 && directionOkay[4]==1 && oldRiverDirection != 5)
					{
						oldRiverDirection = 4;
						riverX -= 1;
						riverY -= 0;
						directionChosen = 1;
					}
					else if (randomNumber==5 && directionOkay[5]==1 && oldRiverDirection != 4)
					{
						oldRiverDirection = 5;
						riverX += 1;
						riverY -= 0;
						directionChosen = 1;
					}
					else if (randomNumber==6 && directionOkay[6]==1 && oldRiverDirection != 3)
					{
						oldRiverDirection = 6;
						riverX -= 1;
						riverY += 1;
						directionChosen = 1;
					}
					else if (randomNumber==7 && directionOkay[7]==1 && oldRiverDirection != 2)
					{
						oldRiverDirection = 7;
						riverX -= 0;
						riverY += 1;
						directionChosen = 1;
					}
					else if (randomNumber==8 && directionOkay[8]==1 && oldRiverDirection != 1)
					{
						oldRiverDirection = 8;
						riverX += 1;
						riverY += 1;
						directionChosen = 1;
					}
					else if (randomTries==1000)
					{
						riverEnd = 1;
					//	stage2Error.value += "\nNo random direction available.";
					//	stage2Error.scrollTop = stage2Error.scrollHeight;
					}
				}
			}

			if (riverX < 1)
			{
				riverX = mapSizeX;
			}
			if (riverX > mapSizeX)
			{
				riverX = 1;
			}
			if (riverY < 1)
			{
				riverY = mapSizeY;
			}
			if (riverY > mapSizeY)
			{
				riverY = 1;
			}

//			plotRiver();
			newPlotRiver3();
		}
	}
}

function setTileValue()
{
	if 		(landTile=="a")		{landTileValue=1;}
	else if (landTile=="b")		{landTileValue=2;}
	else if (landTile=="c")		{landTileValue=3;}
	else if (landTile=="d")		{landTileValue=4;}
	else if (landTile=="e")		{landTileValue=5;}
	else if (landTile=="f")		{landTileValue=6;}
	else if (landTile=="g")		{landTileValue=7;}
	else if (landTile=="h")		{landTileValue=8;}
	else if (landTile=="i")		{landTileValue=9;}
	else if (landTile=="j")		{landTileValue=10;}
	else if (landTile=="k")		{landTileValue=11;}
	else if (landTile=="l")		{landTileValue=12;}
	else if (landTile=="m")		{landTileValue=13;}
	else if (landTile=="n")		{landTileValue=14;}
	else if (landTile=="o")		{landTileValue=15;}
	else if (landTile=="p")		{landTileValue=16;}
	else if (landTile=="q")		{landTileValue=17;}
	else if (landTile=="r")		{landTileValue=18;}
	else if (landTile=="s")		{landTileValue=19;}
	else if (landTile=="t")		{landTileValue=20;}
	else if (landTile=="u")		{landTileValue=21;}
	else if (landTile=="v")		{landTileValue=22;}
	else if (landTile=="w")		{landTileValue=23;}
	else if (landTile=="x")		{landTileValue=24;}
	else if (landTile=="y")		{landTileValue=25;}
	else if (landTile=="z")		{landTileValue=26;}
	else if (landTile=="$")		{landTileValue=27;}
	else if (landTile=="^")		{landTileValue=28;}
	else if (landTile=="&")		{landTileValue=29;}
	else if (landTile=="(")		{landTileValue=30;}
	else if (landTile=="R")		{landTileValue=30;}
	else if (landTile=="~")		{landTileValue=30;}
	else if (landTile=="*")		{landTileValue=1;}
//	else if (landTile=="-")		{landTileValue=1;}
}

function checkForUphillRiver()
{

/*

	z==1	"a"
	z==2	"b"
	z==3	"c"
	z==4	"d"
	z==5	"e"
	z==6	"f"
	z==7	"g"
	z==8	"h"
	z==9	"i"
	z==10	"j"
	z==11	"k"
	z==12	"l"
	z==13	"m"
	z==14	"n"
	z==15	"o"
	z==16	"p"
	z==17	"q"
	z==18	"r"
	z==19	"s"
	z==20	"t"
	z==21	"u"
	z==22	"v"
	z==23	"w"
	z==24	"x"
	z==25	"y"
	z==26	"z"
	z==27	"$"
	z==28	"^"
	z==29	"&"
	z==30	"("

*/

	if (mapArrayDev[riverX][riverY]=="b" &&
		mapArrayDev[newRiverX][newRiverY] != "*" &&
		mapArrayDev[newRiverX][newRiverY] != "a")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="c" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="d" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="e" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="f" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="g" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="h" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="i" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="j" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="k" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="l" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j" &&
			 mapArrayDev[newRiverX][newRiverY] != "k")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="m" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j" &&
			 mapArrayDev[newRiverX][newRiverY] != "k" &&
			 mapArrayDev[newRiverX][newRiverY] != "l")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="n" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j" &&
			 mapArrayDev[newRiverX][newRiverY] != "k" &&
			 mapArrayDev[newRiverX][newRiverY] != "l" &&
			 mapArrayDev[newRiverX][newRiverY] != "m")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="o" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j" &&
			 mapArrayDev[newRiverX][newRiverY] != "k" &&
			 mapArrayDev[newRiverX][newRiverY] != "l" &&
			 mapArrayDev[newRiverX][newRiverY] != "m" &&
			 mapArrayDev[newRiverX][newRiverY] != "n")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="p" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j" &&
			 mapArrayDev[newRiverX][newRiverY] != "k" &&
			 mapArrayDev[newRiverX][newRiverY] != "l" &&
			 mapArrayDev[newRiverX][newRiverY] != "m" &&
			 mapArrayDev[newRiverX][newRiverY] != "n" &&
			 mapArrayDev[newRiverX][newRiverY] != "o")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="q" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j" &&
			 mapArrayDev[newRiverX][newRiverY] != "k" &&
			 mapArrayDev[newRiverX][newRiverY] != "l" &&
			 mapArrayDev[newRiverX][newRiverY] != "m" &&
			 mapArrayDev[newRiverX][newRiverY] != "n" &&
			 mapArrayDev[newRiverX][newRiverY] != "o" &&
			 mapArrayDev[newRiverX][newRiverY] != "p")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="r" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j" &&
			 mapArrayDev[newRiverX][newRiverY] != "k" &&
			 mapArrayDev[newRiverX][newRiverY] != "l" &&
			 mapArrayDev[newRiverX][newRiverY] != "m" &&
			 mapArrayDev[newRiverX][newRiverY] != "n" &&
			 mapArrayDev[newRiverX][newRiverY] != "o" &&
			 mapArrayDev[newRiverX][newRiverY] != "p" &&
			 mapArrayDev[newRiverX][newRiverY] != "q")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="s" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j" &&
			 mapArrayDev[newRiverX][newRiverY] != "k" &&
			 mapArrayDev[newRiverX][newRiverY] != "l" &&
			 mapArrayDev[newRiverX][newRiverY] != "m" &&
			 mapArrayDev[newRiverX][newRiverY] != "n" &&
			 mapArrayDev[newRiverX][newRiverY] != "o" &&
			 mapArrayDev[newRiverX][newRiverY] != "p" &&
			 mapArrayDev[newRiverX][newRiverY] != "q" &&
			 mapArrayDev[newRiverX][newRiverY] != "r")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="t" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j" &&
			 mapArrayDev[newRiverX][newRiverY] != "k" &&
			 mapArrayDev[newRiverX][newRiverY] != "l" &&
			 mapArrayDev[newRiverX][newRiverY] != "m" &&
			 mapArrayDev[newRiverX][newRiverY] != "n" &&
			 mapArrayDev[newRiverX][newRiverY] != "o" &&
			 mapArrayDev[newRiverX][newRiverY] != "p" &&
			 mapArrayDev[newRiverX][newRiverY] != "q" &&
			 mapArrayDev[newRiverX][newRiverY] != "r" &&
			 mapArrayDev[newRiverX][newRiverY] != "s")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="u" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j" &&
			 mapArrayDev[newRiverX][newRiverY] != "k" &&
			 mapArrayDev[newRiverX][newRiverY] != "l" &&
			 mapArrayDev[newRiverX][newRiverY] != "m" &&
			 mapArrayDev[newRiverX][newRiverY] != "n" &&
			 mapArrayDev[newRiverX][newRiverY] != "o" &&
			 mapArrayDev[newRiverX][newRiverY] != "p" &&
			 mapArrayDev[newRiverX][newRiverY] != "q" &&
			 mapArrayDev[newRiverX][newRiverY] != "r" &&
			 mapArrayDev[newRiverX][newRiverY] != "s" &&
			 mapArrayDev[newRiverX][newRiverY] != "t")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="v" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j" &&
			 mapArrayDev[newRiverX][newRiverY] != "k" &&
			 mapArrayDev[newRiverX][newRiverY] != "l" &&
			 mapArrayDev[newRiverX][newRiverY] != "m" &&
			 mapArrayDev[newRiverX][newRiverY] != "n" &&
			 mapArrayDev[newRiverX][newRiverY] != "o" &&
			 mapArrayDev[newRiverX][newRiverY] != "p" &&
			 mapArrayDev[newRiverX][newRiverY] != "q" &&
			 mapArrayDev[newRiverX][newRiverY] != "r" &&
			 mapArrayDev[newRiverX][newRiverY] != "s" &&
			 mapArrayDev[newRiverX][newRiverY] != "t" &&
			 mapArrayDev[newRiverX][newRiverY] != "u")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="w" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j" &&
			 mapArrayDev[newRiverX][newRiverY] != "k" &&
			 mapArrayDev[newRiverX][newRiverY] != "l" &&
			 mapArrayDev[newRiverX][newRiverY] != "m" &&
			 mapArrayDev[newRiverX][newRiverY] != "n" &&
			 mapArrayDev[newRiverX][newRiverY] != "o" &&
			 mapArrayDev[newRiverX][newRiverY] != "p" &&
			 mapArrayDev[newRiverX][newRiverY] != "q" &&
			 mapArrayDev[newRiverX][newRiverY] != "r" &&
			 mapArrayDev[newRiverX][newRiverY] != "s" &&
			 mapArrayDev[newRiverX][newRiverY] != "t" &&
			 mapArrayDev[newRiverX][newRiverY] != "u" &&
			 mapArrayDev[newRiverX][newRiverY] != "v")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="x" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j" &&
			 mapArrayDev[newRiverX][newRiverY] != "k" &&
			 mapArrayDev[newRiverX][newRiverY] != "l" &&
			 mapArrayDev[newRiverX][newRiverY] != "m" &&
			 mapArrayDev[newRiverX][newRiverY] != "n" &&
			 mapArrayDev[newRiverX][newRiverY] != "o" &&
			 mapArrayDev[newRiverX][newRiverY] != "p" &&
			 mapArrayDev[newRiverX][newRiverY] != "q" &&
			 mapArrayDev[newRiverX][newRiverY] != "r" &&
			 mapArrayDev[newRiverX][newRiverY] != "s" &&
			 mapArrayDev[newRiverX][newRiverY] != "t" &&
			 mapArrayDev[newRiverX][newRiverY] != "u" &&
			 mapArrayDev[newRiverX][newRiverY] != "v" &&
			 mapArrayDev[newRiverX][newRiverY] != "w")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="y" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j" &&
			 mapArrayDev[newRiverX][newRiverY] != "k" &&
			 mapArrayDev[newRiverX][newRiverY] != "l" &&
			 mapArrayDev[newRiverX][newRiverY] != "m" &&
			 mapArrayDev[newRiverX][newRiverY] != "n" &&
			 mapArrayDev[newRiverX][newRiverY] != "o" &&
			 mapArrayDev[newRiverX][newRiverY] != "p" &&
			 mapArrayDev[newRiverX][newRiverY] != "q" &&
			 mapArrayDev[newRiverX][newRiverY] != "r" &&
			 mapArrayDev[newRiverX][newRiverY] != "s" &&
			 mapArrayDev[newRiverX][newRiverY] != "t" &&
			 mapArrayDev[newRiverX][newRiverY] != "u" &&
			 mapArrayDev[newRiverX][newRiverY] != "v" &&
			 mapArrayDev[newRiverX][newRiverY] != "w" &&
			 mapArrayDev[newRiverX][newRiverY] != "x")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="z" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j" &&
			 mapArrayDev[newRiverX][newRiverY] != "k" &&
			 mapArrayDev[newRiverX][newRiverY] != "l" &&
			 mapArrayDev[newRiverX][newRiverY] != "m" &&
			 mapArrayDev[newRiverX][newRiverY] != "n" &&
			 mapArrayDev[newRiverX][newRiverY] != "o" &&
			 mapArrayDev[newRiverX][newRiverY] != "p" &&
			 mapArrayDev[newRiverX][newRiverY] != "q" &&
			 mapArrayDev[newRiverX][newRiverY] != "r" &&
			 mapArrayDev[newRiverX][newRiverY] != "s" &&
			 mapArrayDev[newRiverX][newRiverY] != "t" &&
			 mapArrayDev[newRiverX][newRiverY] != "u" &&
			 mapArrayDev[newRiverX][newRiverY] != "v" &&
			 mapArrayDev[newRiverX][newRiverY] != "w" &&
			 mapArrayDev[newRiverX][newRiverY] != "x" &&
			 mapArrayDev[newRiverX][newRiverY] != "y")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="1" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j" &&
			 mapArrayDev[newRiverX][newRiverY] != "k" &&
			 mapArrayDev[newRiverX][newRiverY] != "l" &&
			 mapArrayDev[newRiverX][newRiverY] != "m" &&
			 mapArrayDev[newRiverX][newRiverY] != "n" &&
			 mapArrayDev[newRiverX][newRiverY] != "o" &&
			 mapArrayDev[newRiverX][newRiverY] != "p" &&
			 mapArrayDev[newRiverX][newRiverY] != "q" &&
			 mapArrayDev[newRiverX][newRiverY] != "r" &&
			 mapArrayDev[newRiverX][newRiverY] != "s" &&
			 mapArrayDev[newRiverX][newRiverY] != "t" &&
			 mapArrayDev[newRiverX][newRiverY] != "u" &&
			 mapArrayDev[newRiverX][newRiverY] != "v" &&
			 mapArrayDev[newRiverX][newRiverY] != "w" &&
			 mapArrayDev[newRiverX][newRiverY] != "x" &&
			 mapArrayDev[newRiverX][newRiverY] != "y" &&
			 mapArrayDev[newRiverX][newRiverY] != "z")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="2" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j" &&
			 mapArrayDev[newRiverX][newRiverY] != "k" &&
			 mapArrayDev[newRiverX][newRiverY] != "l" &&
			 mapArrayDev[newRiverX][newRiverY] != "m" &&
			 mapArrayDev[newRiverX][newRiverY] != "n" &&
			 mapArrayDev[newRiverX][newRiverY] != "o" &&
			 mapArrayDev[newRiverX][newRiverY] != "p" &&
			 mapArrayDev[newRiverX][newRiverY] != "q" &&
			 mapArrayDev[newRiverX][newRiverY] != "r" &&
			 mapArrayDev[newRiverX][newRiverY] != "s" &&
			 mapArrayDev[newRiverX][newRiverY] != "t" &&
			 mapArrayDev[newRiverX][newRiverY] != "u" &&
			 mapArrayDev[newRiverX][newRiverY] != "v" &&
			 mapArrayDev[newRiverX][newRiverY] != "w" &&
			 mapArrayDev[newRiverX][newRiverY] != "x" &&
			 mapArrayDev[newRiverX][newRiverY] != "y" &&
			 mapArrayDev[newRiverX][newRiverY] != "z" &&
			 mapArrayDev[newRiverX][newRiverY] != "1")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="3" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j" &&
			 mapArrayDev[newRiverX][newRiverY] != "k" &&
			 mapArrayDev[newRiverX][newRiverY] != "l" &&
			 mapArrayDev[newRiverX][newRiverY] != "m" &&
			 mapArrayDev[newRiverX][newRiverY] != "n" &&
			 mapArrayDev[newRiverX][newRiverY] != "o" &&
			 mapArrayDev[newRiverX][newRiverY] != "p" &&
			 mapArrayDev[newRiverX][newRiverY] != "q" &&
			 mapArrayDev[newRiverX][newRiverY] != "r" &&
			 mapArrayDev[newRiverX][newRiverY] != "s" &&
			 mapArrayDev[newRiverX][newRiverY] != "t" &&
			 mapArrayDev[newRiverX][newRiverY] != "u" &&
			 mapArrayDev[newRiverX][newRiverY] != "v" &&
			 mapArrayDev[newRiverX][newRiverY] != "w" &&
			 mapArrayDev[newRiverX][newRiverY] != "x" &&
			 mapArrayDev[newRiverX][newRiverY] != "y" &&
			 mapArrayDev[newRiverX][newRiverY] != "z" &&
			 mapArrayDev[newRiverX][newRiverY] != "1" &&
			 mapArrayDev[newRiverX][newRiverY] != "2")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else if (mapArrayDev[riverX][riverY]=="4" &&
			 mapArrayDev[newRiverX][newRiverY] != "*" &&
			 mapArrayDev[newRiverX][newRiverY] != "a" &&
			 mapArrayDev[newRiverX][newRiverY] != "b" &&
			 mapArrayDev[newRiverX][newRiverY] != "c" &&
			 mapArrayDev[newRiverX][newRiverY] != "d" &&
			 mapArrayDev[newRiverX][newRiverY] != "e" &&
			 mapArrayDev[newRiverX][newRiverY] != "f" &&
			 mapArrayDev[newRiverX][newRiverY] != "g" &&
			 mapArrayDev[newRiverX][newRiverY] != "h" &&
			 mapArrayDev[newRiverX][newRiverY] != "i" &&
			 mapArrayDev[newRiverX][newRiverY] != "j" &&
			 mapArrayDev[newRiverX][newRiverY] != "k" &&
			 mapArrayDev[newRiverX][newRiverY] != "l" &&
			 mapArrayDev[newRiverX][newRiverY] != "m" &&
			 mapArrayDev[newRiverX][newRiverY] != "n" &&
			 mapArrayDev[newRiverX][newRiverY] != "o" &&
			 mapArrayDev[newRiverX][newRiverY] != "p" &&
			 mapArrayDev[newRiverX][newRiverY] != "q" &&
			 mapArrayDev[newRiverX][newRiverY] != "r" &&
			 mapArrayDev[newRiverX][newRiverY] != "s" &&
			 mapArrayDev[newRiverX][newRiverY] != "t" &&
			 mapArrayDev[newRiverX][newRiverY] != "u" &&
			 mapArrayDev[newRiverX][newRiverY] != "v" &&
			 mapArrayDev[newRiverX][newRiverY] != "w" &&
			 mapArrayDev[newRiverX][newRiverY] != "x" &&
			 mapArrayDev[newRiverX][newRiverY] != "y" &&
			 mapArrayDev[newRiverX][newRiverY] != "z" &&
			 mapArrayDev[newRiverX][newRiverY] != "1" &&
			 mapArrayDev[newRiverX][newRiverY] != "2" &&
			 mapArrayDev[newRiverX][newRiverY] != "3")
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction okay";
		maybeStuck = 0;
		directionOkay = 1;
	}
	else
	{
//		document.myform.fieldError.value = document.myform.fieldError.value + " ... Found '"+mapArrayDev[newRiverX][newRiverY]+"'. Direction BAD.";
	}
}

function newPlotRiver2()
{
	try
	{
		if (thisIsLava==1)
		{
			mapArrayDev2[riverX][riverY] = "*";

			if (riverX+1 > mapSizeX)	{z=((-mapSizeX)+1);}
			else						{z=1;}
			mapArrayDev2[((riverX-0)+(z-0))][riverY] = "*";

			if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
			else						{z=1;}
			mapArrayDev2[riverX][((riverY-0)+(z-0))] = "*";

			if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
			else						{z=1;}
			if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
			else						{zz=1;}
			mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = "*";
		}
		else
		{
			if
			(
				(waterLevel==4 && mapArrayDev[riverX][riverY]=="c") ||
				(waterLevel==5 && mapArrayDev[riverX][riverY]=="d") ||
				(waterLevel==6 && (mapArrayDev[riverX][riverY]=="d" || mapArrayDev[riverX][riverY]=="e")) ||
				(waterLevel==7 && (mapArrayDev[riverX][riverY]=="e" || mapArrayDev[riverX][riverY]=="f")) ||
				(waterLevel==8 && (mapArrayDev[riverX][riverY]=="e" || mapArrayDev[riverX][riverY]=="f")) ||
				(waterLevel==9 && (mapArrayDev[riverX][riverY]=="f" || mapArrayDev[riverX][riverY]=="g")) ||
				(waterLevel==10 && (mapArrayDev[riverX][riverY]=="g" || mapArrayDev[riverX][riverY]=="h")) ||
				(waterLevel==11 && (mapArrayDev[riverX][riverY]=="g" || mapArrayDev[riverX][riverY]=="h")) ||
				(waterLevel==12 && (mapArrayDev[riverX][riverY]=="g" || mapArrayDev[riverX][riverY]=="h" || mapArrayDev[riverX][riverY]=="i")) ||
				(waterLevel==13 && (mapArrayDev[riverX][riverY]=="g" || mapArrayDev[riverX][riverY]=="h" || mapArrayDev[riverX][riverY]=="i" || mapArrayDev[riverX][riverY]=="j")) ||
				(waterLevel==14 && (mapArrayDev[riverX][riverY]=="h" || mapArrayDev[riverX][riverY]=="i" || mapArrayDev[riverX][riverY]=="j" || mapArrayDev[riverX][riverY]=="k")) ||
				(waterLevel==15 && (mapArrayDev[riverX][riverY]=="h" || mapArrayDev[riverX][riverY]=="i" || mapArrayDev[riverX][riverY]=="j" || mapArrayDev[riverX][riverY]=="k")) ||
				(waterLevel==16 && (mapArrayDev[riverX][riverY]=="i" || mapArrayDev[riverX][riverY]=="j" || mapArrayDev[riverX][riverY]=="k" || mapArrayDev[riverX][riverY]=="l")) ||
				(waterLevel==17 && (mapArrayDev[riverX][riverY]=="i" || mapArrayDev[riverX][riverY]=="j" || mapArrayDev[riverX][riverY]=="k" || mapArrayDev[riverX][riverY]=="l")) ||
				(waterLevel==18 && (mapArrayDev[riverX][riverY]=="j" || mapArrayDev[riverX][riverY]=="k" || mapArrayDev[riverX][riverY]=="l" || mapArrayDev[riverX][riverY]=="m")) ||
				(waterLevel==19 && (mapArrayDev[riverX][riverY]=="j" || mapArrayDev[riverX][riverY]=="k" || mapArrayDev[riverX][riverY]=="l" || mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n")) ||
				(waterLevel==20 && (mapArrayDev[riverX][riverY]=="k" || mapArrayDev[riverX][riverY]=="l" || mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o")) ||
				(waterLevel==21 && (mapArrayDev[riverX][riverY]=="k" || mapArrayDev[riverX][riverY]=="l" || mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o")) ||
				(waterLevel==22 && (mapArrayDev[riverX][riverY]=="k" || mapArrayDev[riverX][riverY]=="l" || mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o")) ||
				(waterLevel==23 && (mapArrayDev[riverX][riverY]=="k" || mapArrayDev[riverX][riverY]=="l" || mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o" || mapArrayDev[riverX][riverY]=="p")) ||
				(waterLevel==24 && (mapArrayDev[riverX][riverY]=="l" || mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o" || mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q")) ||
				(waterLevel==25 && (mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o" || mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r")) ||
				(waterLevel==26 && (mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o" || mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s")) ||
				(waterLevel==27 && (mapArrayDev[riverX][riverY]=="o" || mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t")) ||
				(waterLevel==28 && (mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t" || mapArrayDev[riverX][riverY]=="u")) ||
				(waterLevel==29 && (mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t" || mapArrayDev[riverX][riverY]=="u" || mapArrayDev[riverX][riverY]=="v")) ||
				(waterLevel==30 && (mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t" || mapArrayDev[riverX][riverY]=="u" || mapArrayDev[riverX][riverY]=="v" || mapArrayDev[riverX][riverY]=="w")) ||
				(waterLevel==31 && (mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t" || mapArrayDev[riverX][riverY]=="u" || mapArrayDev[riverX][riverY]=="v" || mapArrayDev[riverX][riverY]=="w"))
			)
			{
		//		stage2Error.value = stage2Error.value + "\nRiver diameter: 3, X,Y: "+mapArrayDev[riverX][riverY];

				if (riversNarrow==1)
				{
			/*
					 R
					RXR
					 R
			*/
					if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[riverX][((riverY-0)-(z-0))] = "R";

					if (riverX-1 < 1)			{z=((-mapSizeX)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)-(z-0))][riverY] = "R";

					mapArrayDev2[riverX][riverY] = "R";

					if (riverX+1 > mapSizeX)	{z=((-mapSizeX)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)+(z-0))][riverY] = "R";

					if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[riverX][((riverY-0)+(z-0))] = "R";
				}
				else
				{
			/*
					 RR
					RXRR
					RRRR
					 RR
			*/
				//	XR

					if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[riverX][((riverY-0)-(z-0))] = "R";

				//	RX

					if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
					else						{z=1;}
					if (riverX+1 > mapSizeX)	{yy=((-mapSizeX)+1);}
					else						{yy=1;}
					mapArrayDev2[((riverX-0)+(yy-0))][((riverY-0)-(z-0))] = "R";

				//////////////////////////////////////////////////////

				//	XRRR

					if (riverX-1 < 1)			{z=((-mapSizeX)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)-(z-0))][riverY] = "R";

				//	RXRR

					mapArrayDev2[riverX][riverY] = "R";

				//	RRXR

					if (riverX+1 > mapSizeX)	{z=((-mapSizeX)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)+(z-0))][riverY] = "R";

				//	RRRX

					if (riverX+2 > mapSizeX)	{z=((-mapSizeX)+2);}
					else						{z=2;}
					mapArrayDev2[((riverX-0)+(z-0))][riverY] = "R";

				//////////////////////////////////////////////////////

				//	XRRR

					if (riverX-1 < 1)			{yy=((-mapSizeX)+1);}
					else						{yy=1;}
					if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)-(yy-0))][((riverY-0)+(z-0))] = "R";

				//	RXRR

					if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[riverX][((riverY-0)+(z-0))] = "R";

				//	RRXR

					if (riverX+1 > mapSizeX)	{yy=((-mapSizeX)+1);}
					else						{yy=1;}
					if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)+(yy-0))][((riverY-0)+(z-0))] = "R";

				//	RRRX

					if (riverX+2 > mapSizeX)	{yy=((-mapSizeX)+2);}
					else						{yy=2;}
					if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)+(yy-0))][((riverY-0)+(z-0))] = "R";

				//////////////////////////////////////////////////////

				//	XR

					if (riverY+2 > mapSizeY)	{z=((-mapSizeY)+2);}
					else						{z=2;}
					mapArrayDev2[riverX][((riverY-0)+(z-0))] = "R";

				//	RX

					if (riverX+1 > mapSizeX)	{yy=((-mapSizeX)+1);}
					else						{yy=1;}
					if (riverY+2 > mapSizeY)	{z=((-mapSizeY)+2);}
					else						{z=2;}
					mapArrayDev2[((riverX-0)+(yy-0))][((riverY-0)+(z-0))] = "R";
				}
			}
			else if
			(
				(waterLevel==8 && mapArrayDev[riverX][riverY]=="g") ||
				(waterLevel==9 && mapArrayDev[riverX][riverY]=="h") ||
				(waterLevel==10 && mapArrayDev[riverX][riverY]=="i") ||
				(waterLevel==11 && (mapArrayDev[riverX][riverY]=="i" || mapArrayDev[riverX][riverY]=="j")) ||
				(waterLevel==12 && (mapArrayDev[riverX][riverY]=="j" || mapArrayDev[riverX][riverY]=="k")) ||
				(waterLevel==13 && (mapArrayDev[riverX][riverY]=="k" || mapArrayDev[riverX][riverY]=="l")) ||
				(waterLevel==14 && (mapArrayDev[riverX][riverY]=="l" || mapArrayDev[riverX][riverY]=="m")) ||
				(waterLevel==15 && (mapArrayDev[riverX][riverY]=="l" || mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n")) ||
				(waterLevel==16 && (mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o")) ||
				(waterLevel==17 && (mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o" || mapArrayDev[riverX][riverY]=="p")) ||
				(waterLevel==18 && (mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o" || mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q")) ||
				(waterLevel==19 && (mapArrayDev[riverX][riverY]=="o" || mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r")) ||
				(waterLevel==20 && (mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s")) ||
				(waterLevel==21 && (mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t")) ||
				(waterLevel==22 && (mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t" || mapArrayDev[riverX][riverY]=="u")) ||
				(waterLevel==23 && (mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t" || mapArrayDev[riverX][riverY]=="u" || mapArrayDev[riverX][riverY]=="v")) ||
				(waterLevel==24 && (mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t" || mapArrayDev[riverX][riverY]=="u" || mapArrayDev[riverX][riverY]=="v" || mapArrayDev[riverX][riverY]=="w")) ||
				(waterLevel==25 && (mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t" || mapArrayDev[riverX][riverY]=="u" || mapArrayDev[riverX][riverY]=="v" || mapArrayDev[riverX][riverY]=="w" || mapArrayDev[riverX][riverY]=="x")) ||
				(waterLevel==26 && (mapArrayDev[riverX][riverY]=="t" || mapArrayDev[riverX][riverY]=="u" || mapArrayDev[riverX][riverY]=="v" || mapArrayDev[riverX][riverY]=="w" || mapArrayDev[riverX][riverY]=="x" || mapArrayDev[riverX][riverY]=="y")) ||
				(waterLevel==27 && (mapArrayDev[riverX][riverY]=="u" || mapArrayDev[riverX][riverY]=="v" || mapArrayDev[riverX][riverY]=="w" || mapArrayDev[riverX][riverY]=="x" || mapArrayDev[riverX][riverY]=="y" || mapArrayDev[riverX][riverY]=="z")) ||
				(waterLevel==28 && (mapArrayDev[riverX][riverY]=="v" || mapArrayDev[riverX][riverY]=="w" || mapArrayDev[riverX][riverY]=="x" || mapArrayDev[riverX][riverY]=="y" || mapArrayDev[riverX][riverY]=="z" || mapArrayDev[riverX][riverY]=="1")) ||
				(waterLevel==29 && (mapArrayDev[riverX][riverY]=="w" || mapArrayDev[riverX][riverY]=="x" || mapArrayDev[riverX][riverY]=="y" || mapArrayDev[riverX][riverY]=="z" || mapArrayDev[riverX][riverY]=="1" || mapArrayDev[riverX][riverY]=="2")) ||
				(waterLevel==30 && (mapArrayDev[riverX][riverY]=="x" || mapArrayDev[riverX][riverY]=="y" || mapArrayDev[riverX][riverY]=="z" || mapArrayDev[riverX][riverY]=="1" || mapArrayDev[riverX][riverY]=="2" || mapArrayDev[riverX][riverY]=="3")) ||
				(waterLevel==31 && (mapArrayDev[riverX][riverY]=="x" || mapArrayDev[riverX][riverY]=="y" || mapArrayDev[riverX][riverY]=="z" || mapArrayDev[riverX][riverY]=="1" || mapArrayDev[riverX][riverY]=="2" || mapArrayDev[riverX][riverY]=="3" || mapArrayDev[riverX][riverY]=="4"))
			)
			{
		//		stage2Error.value = stage2Error.value + "\nRiver diameter: 4, X,Y: "+mapArrayDev[riverX][riverY];

				if (riversNarrow==1)
				{
			/*
					 RR
					RXRR
					RRRR
					 RR
			*/
				//	XR

					if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[riverX][((riverY-0)-(z-0))] = "R";

				//	RX

					if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
					else						{z=1;}
					if (riverX+1 > mapSizeX)	{yy=((-mapSizeX)+1);}
					else						{yy=1;}
					mapArrayDev2[((riverX-0)+(yy-0))][((riverY-0)-(z-0))] = "R";

				//////////////////////////////////////////////////////

				//	XRRR

					if (riverX-1 < 1)			{z=((-mapSizeX)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)-(z-0))][riverY] = "R";

				//	RXRR

					mapArrayDev2[riverX][riverY] = "R";

				//	RRXR

					if (riverX+1 > mapSizeX)	{z=((-mapSizeX)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)+(z-0))][riverY] = "R";

				//	RRRX

					if (riverX+2 > mapSizeX)	{z=((-mapSizeX)+2);}
					else						{z=2;}
					mapArrayDev2[((riverX-0)+(z-0))][riverY] = "R";

				//////////////////////////////////////////////////////

				//	XRRR

					if (riverX-1 < 1)			{yy=((-mapSizeX)+1);}
					else						{yy=1;}
					if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)-(yy-0))][((riverY-0)+(z-0))] = "R";

				//	RXRR

					if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[riverX][((riverY-0)+(z-0))] = "R";

				//	RRXR

					if (riverX+1 > mapSizeX)	{yy=((-mapSizeX)+1);}
					else						{yy=1;}
					if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)+(yy-0))][((riverY-0)+(z-0))] = "R";

				//	RRRX

					if (riverX+2 > mapSizeX)	{yy=((-mapSizeX)+2);}
					else						{yy=2;}
					if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)+(yy-0))][((riverY-0)+(z-0))] = "R";

				//////////////////////////////////////////////////////

				//	XR

					if (riverY+2 > mapSizeY)	{z=((-mapSizeY)+2);}
					else						{z=2;}
					mapArrayDev2[riverX][((riverY-0)+(z-0))] = "R";

				//	RX

					if (riverX+1 > mapSizeX)	{yy=((-mapSizeX)+1);}
					else						{yy=1;}
					if (riverY+2 > mapSizeY)	{z=((-mapSizeY)+2);}
					else						{z=2;}
					mapArrayDev2[((riverX-0)+(yy-0))][((riverY-0)+(z-0))] = "R";
				}
				else
				{
				/*
				  RR
				 RRRR
				RRXRRR
				RRRRRR
				 RRRR
				  RR
				*/
				//	XR

					if (riverY-2 < 1)			{z=((-mapSizeY)+2);}
					else						{z=2;}
					mapArrayDev2[(riverX-0)][((riverY-0)-(z-0))] = "R";

				//	RX

					if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
					else						{zz=1;}
					if (riverY-2 < 1)			{z=((-mapSizeY)+2);}
					else						{z=2;}
					mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)-(z-0))] = "R";

				////////////////////////////////////////////

				//	XRRR

					if (riverX-1 < 1)			{zz=((-mapSizeX)+1);}
					else						{zz=1;}
					if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)-(zz-0))][((riverY-0)-(z-0))] = "R";

				//	RXRR

					if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[(riverX-0)][((riverY-0)-(z-0))] = "R";

				//	RRXR

					if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
					else						{zz=1;}
					if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)-(z-0))] = "R";

				//	RRRX

					if (riverX+2 > mapSizeX)	{zz=((-mapSizeX)+2);}
					else						{zz=2;}
					if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)-(z-0))] = "R";

				////////////////////////////////////////////

				//	XRRRRR

					if (riverX-2 < 1)			{zz=((-mapSizeX)+2);}
					else						{zz=2;}
					mapArrayDev2[((riverX-0)-(zz-0))][(riverY-0)] = "R";

				//	RXRRRR

					if (riverX-1 < 1)			{zz=((-mapSizeX)+1);}
					else						{zz=1;}
					mapArrayDev2[((riverX-0)-(zz-0))][(riverY-0)] = "R";

				//	RRXRRR

					mapArrayDev2[(riverX-0)][(riverY-0)] = "R";

				//	RRRXRR

					if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
					else						{zz=1;}
					mapArrayDev2[((riverX-0)+(zz-0))][(riverY-0)] = "R";

				//	RRRRXR

					if (riverX+2 > mapSizeX)	{zz=((-mapSizeX)+2);}
					else						{zz=2;}
					mapArrayDev2[((riverX-0)+(zz-0))][(riverY-0)] = "R";

				//	RRRRRX

					if (riverX+3 > mapSizeX)	{zz=((-mapSizeX)+3);}
					else						{zz=3;}
					mapArrayDev2[((riverX-0)+(zz-0))][(riverY-0)] = "R";

				////////////////////////////////////////////

				//	XRRRRR

					if (riverX-2 < 1)			{zz=((-mapSizeX)+2);}
					else						{zz=2;}
					if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)-(zz-0))][((riverY-0)+(z-0))] = "R";

				//	RXRRRR

					if (riverX-1 < 1)			{zz=((-mapSizeX)+1);}
					else						{zz=1;}
					if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)-(zz-0))][((riverY-0)+(z-0))] = "R";

				//	RRXRRR

					if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[(riverX-0)][((riverY-0)+(z-0))] = "R";

				//	RRRXRR

					if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
					else						{zz=1;}
					if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = "R";

				//	RRRRXR

					if (riverX+2 > mapSizeX)	{zz=((-mapSizeX)+2);}
					else						{zz=2;}
					if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = "R";

				//	RRRRRX

					if (riverX+3 > mapSizeX)	{zz=((-mapSizeX)+3);}
					else						{zz=3;}
					if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
					else						{z=1;}
					mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = "R";

				////////////////////////////////////////////

				//	XRRR

					if (riverX-1 < 1)			{zz=((-mapSizeX)+1);}
					else						{zz=1;}
					if (riverY+2 > mapSizeY)	{z=((-mapSizeY)+2);}
					else						{z=2;}
					mapArrayDev2[((riverX-0)-(zz-0))][((riverY-0)+(z-0))] = "R";

				//	RXRR

					if (riverY+2 > mapSizeY)	{z=((-mapSizeY)+2);}
					else						{z=2;}
					mapArrayDev2[(riverX-0)][((riverY-0)+(z-0))] = "R";

				//	RRXR

					if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
					else						{zz=1;}
					if (riverY+2 > mapSizeY)	{z=((-mapSizeY)+2);}
					else						{z=2;}
					mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = "R";

				//	RRRX

					if (riverX+2 > mapSizeX)	{zz=((-mapSizeX)+2);}
					else						{zz=2;}
					if (riverY+2 > mapSizeY)	{z=((-mapSizeY)+2);}
					else						{z=2;}
					mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = "R";

				////////////////////////////////////////////

				//	XR

					if (riverY+3 > mapSizeY)	{z=((-mapSizeY)+3);}
					else						{z=3;}
					mapArrayDev2[(riverX-0)][((riverY-0)+(z-0))] = "R";

				//	RX

					if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
					else						{zz=1;}
					if (riverY+3 > mapSizeY)	{z=((-mapSizeY)+3);}
					else						{z=3;}
					mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = "R";
				}
			}
			else
			{
		//		stage2Error.value = stage2Error.value + "\nRiver diameter: 2, X,Y: "+mapArrayDev[riverX][riverY];
		/*
				 XR
				 RR
		*/
				mapArrayDev2[riverX][riverY] = "R";

				if (riverX+1 > mapSizeX)	{z=((-mapSizeX)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(z-0))][riverY] = "R";

				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[riverX][((riverY-0)+(z-0))] = "R";

				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
				else						{zz=1;}
				mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = "R";
			}
		}
	}
	catch(err)
	{
		stage2Error.value += "\nERROR (plotRiver): "+riverX+","+riverY;
		stage2Error.scrollTop = stage2Error.scrollHeight;
	}
}


function newPlotRiver()
{
	try
	{
		if (thisIsLava==1)
		{
			mapArrayDev2[riverX][riverY] = "*";

			if (riverX+1 > mapSizeX)	{z=((-mapSizeX)+1);}
			else						{z=1;}
			mapArrayDev2[((riverX-0)+(z-0))][riverY] = "*";

			if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
			else						{z=1;}
			mapArrayDev2[riverX][((riverY-0)+(z-0))] = "*";

			if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
			else						{z=1;}
			if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
			else						{zz=1;}
			mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = "*";
/*
			if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
			else						{z=1;}
			mapArrayDev2[riverX][((riverY-0)-(z-0))] = "*";

			if (riverX-1 < 1)			{z=((-mapSizeX)+1);}
			else						{z=1;}
			mapArrayDev2[((riverX-0)-(z-0))][riverY] = "*";

			mapArrayDev2[riverX][riverY] = "*";

			if (riverX+1 > mapSizeX)	{z=((-mapSizeX)+1);}
			else						{z=1;}
			mapArrayDev2[((riverX-0)+(z-0))][riverY] = "*";

			if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
			else						{z=1;}
			mapArrayDev2[riverX][((riverY-0)+(z-0))] = "*";
*/
		}
		else
		{
			if (
				((waterLevel==3 || waterLevel==4) && mapArrayDev2[riverX][riverY]=="b") ||
				((waterLevel==5 || waterLevel==6) && (mapArrayDev2[riverX][riverY]=="b" || mapArrayDev2[riverX][riverY]=="c")) ||
				(waterLevel==7 && (mapArrayDev2[riverX][riverY]=="b" || mapArrayDev2[riverX][riverY]=="c" || mapArrayDev2[riverX][riverY]=="d")) ||
				(waterLevel==8 && (mapArrayDev2[riverX][riverY]=="b" || mapArrayDev2[riverX][riverY]=="c" || mapArrayDev2[riverX][riverY]=="d" || mapArrayDev2[riverX][riverY]=="e")) ||
				(waterLevel==9 && (mapArrayDev2[riverX][riverY]=="b" || mapArrayDev2[riverX][riverY]=="c" || mapArrayDev2[riverX][riverY]=="d" || mapArrayDev2[riverX][riverY]=="e" || mapArrayDev2[riverX][riverY]=="f")) ||
				((waterLevel==10 || waterLevel==11) && (mapArrayDev2[riverX][riverY]=="b" || mapArrayDev2[riverX][riverY]=="c" || mapArrayDev2[riverX][riverY]=="d" || mapArrayDev2[riverX][riverY]=="e" || mapArrayDev2[riverX][riverY]=="f" || mapArrayDev2[riverX][riverY]=="g")) ||
				((waterLevel==12 || waterLevel==13) && (mapArrayDev2[riverX][riverY]=="b" || mapArrayDev2[riverX][riverY]=="c" || mapArrayDev2[riverX][riverY]=="d" || mapArrayDev2[riverX][riverY]=="e" || mapArrayDev2[riverX][riverY]=="f" || mapArrayDev2[riverX][riverY]=="g" || mapArrayDev2[riverX][riverY]=="h")) ||
				((waterLevel==14 || waterLevel==15) && (mapArrayDev2[riverX][riverY]=="b" || mapArrayDev2[riverX][riverY]=="c" || mapArrayDev2[riverX][riverY]=="d" || mapArrayDev2[riverX][riverY]=="e" || mapArrayDev2[riverX][riverY]=="f" || mapArrayDev2[riverX][riverY]=="g" || mapArrayDev2[riverX][riverY]=="h" || mapArrayDev2[riverX][riverY]=="i")) ||
				((waterLevel==16 || waterLevel==17) && (mapArrayDev2[riverX][riverY]=="b" || mapArrayDev2[riverX][riverY]=="c" || mapArrayDev2[riverX][riverY]=="d" || mapArrayDev2[riverX][riverY]=="e" || mapArrayDev2[riverX][riverY]=="f" || mapArrayDev2[riverX][riverY]=="g" || mapArrayDev2[riverX][riverY]=="h" || mapArrayDev2[riverX][riverY]=="i" || mapArrayDev2[riverX][riverY]=="j")) ||
				(waterLevel==18 && (mapArrayDev2[riverX][riverY]=="b" || mapArrayDev2[riverX][riverY]=="c" || mapArrayDev2[riverX][riverY]=="d" || mapArrayDev2[riverX][riverY]=="e" || mapArrayDev2[riverX][riverY]=="f" || mapArrayDev2[riverX][riverY]=="g" || mapArrayDev2[riverX][riverY]=="h" || mapArrayDev2[riverX][riverY]=="i" || mapArrayDev2[riverX][riverY]=="j" || mapArrayDev2[riverX][riverY]=="k")) ||
				(waterLevel==19 && (mapArrayDev2[riverX][riverY]=="b" || mapArrayDev2[riverX][riverY]=="c" || mapArrayDev2[riverX][riverY]=="d" || mapArrayDev2[riverX][riverY]=="e" || mapArrayDev2[riverX][riverY]=="f" || mapArrayDev2[riverX][riverY]=="g" || mapArrayDev2[riverX][riverY]=="h" || mapArrayDev2[riverX][riverY]=="i" || mapArrayDev2[riverX][riverY]=="j" || mapArrayDev2[riverX][riverY]=="k" || mapArrayDev2[riverX][riverY]=="l")) ||
				(waterLevel>=20 && (mapArrayDev2[riverX][riverY]=="b" || mapArrayDev2[riverX][riverY]=="c" || mapArrayDev2[riverX][riverY]=="d" || mapArrayDev2[riverX][riverY]=="e" || mapArrayDev2[riverX][riverY]=="f" || mapArrayDev2[riverX][riverY]=="g" || mapArrayDev2[riverX][riverY]=="h" || mapArrayDev2[riverX][riverY]=="i" || mapArrayDev2[riverX][riverY]=="j" || mapArrayDev2[riverX][riverY]=="k" || mapArrayDev2[riverX][riverY]=="l" || mapArrayDev2[riverX][riverY]=="m"))
			   )
			{
/*

RR
RR

*/
				mapArrayDev2[riverX][riverY] = "R";

				if (riverX+1 > mapSizeX)	{z=((-mapSizeX)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(z-0))][riverY] = "R";

				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[riverX][((riverY-0)+(z-0))] = "R";

				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
				else						{zz=1;}
				mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = "R";
			}
			else if ((waterLevel==11 && mapArrayDev2[riverX][riverY]=="j") ||
					 (waterLevel==12 && mapArrayDev2[riverX][riverY]=="k") ||
					 (waterLevel==13 && mapArrayDev2[riverX][riverY]=="l") ||
					 (waterLevel==14 && mapArrayDev2[riverX][riverY]=="m") ||
					 (waterLevel==15 && mapArrayDev2[riverX][riverY]=="n") ||
					 (waterLevel==16 && (mapArrayDev2[riverX][riverY]=="n" || mapArrayDev2[riverX][riverY]=="o")) ||
					 (waterLevel==17 && (mapArrayDev2[riverX][riverY]=="o" || mapArrayDev2[riverX][riverY]=="p")) ||
					 (waterLevel==18 && (mapArrayDev2[riverX][riverY]=="p" || mapArrayDev2[riverX][riverY]=="q")) ||
					 (waterLevel==19 && (mapArrayDev2[riverX][riverY]=="q" || mapArrayDev2[riverX][riverY]=="r")) ||
					 (waterLevel==20 && (mapArrayDev2[riverX][riverY]=="r" || mapArrayDev2[riverX][riverY]=="s"))
					)
			{
/*

 RR
RRRR
RRRR
 RR

*/
				if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[riverX][((riverY-0)-(z-0))] = "R";
			//
				if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
				else						{z=1;}
				if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
				else						{zz=1;}
				mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = "R";
			////
				if (riverX-1 < 1)			{z=((-mapSizeX)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)-(z-0))][riverY] = "R";
			//
				mapArrayDev2[riverX][riverY] = "R";
			//
				if (riverX+1 > mapSizeX)	{z=((-mapSizeX)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(z-0))][riverY] = "R";
			//
				if (riverX+2 > mapSizeX)	{z=((-mapSizeX)+2);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(z-0))][riverY] = "R";
			////
				if (riverX-1 < 1)			{zz=((-mapSizeX)+1);}
				else						{zz=1;}
				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = "R";
			//
				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[riverX][((riverY-0)+(z-0))] = "R";
			//
				if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
				else						{zz=1;}
				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = "R";
			//
				if (riverX+2 > mapSizeX)	{zz=((-mapSizeX)+2);}
				else						{zz=1;}
				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = "R";
			////
				if (riverY+2 > mapSizeY)	{z=((-mapSizeY)+2);}
				else						{z=1;}
				mapArrayDev2[riverX][((riverY-0)+(z-0))] = "R";
			//
				if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
				else						{zz=1;}
				if (riverY+2 > mapSizeY)	{z=((-mapSizeY)+2);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = "R";
			}
			else
/*

 R
RRR
 R

*/
			{
				if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[riverX][((riverY-0)-(z-0))] = "R";

				if (riverX-1 < 1)			{z=((-mapSizeX)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)-(z-0))][riverY] = "R";

				mapArrayDev2[riverX][riverY] = "R";

				if (riverX+1 > mapSizeX)	{z=((-mapSizeX)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(z-0))][riverY] = "R";

				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[riverX][((riverY-0)+(z-0))] = "R";
			}
		}
	}
	catch(err)
	{
		stage2Error.value += "\nERROR (plotRiver): "+riverX+","+riverY;
		stage2Error.scrollTop = stage2Error.scrollHeight;
	}
}

function plotRiver()
{
	try
	{
		if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
		else						{z=1;}
		if (thisIsLava==1)
		{
			mapArrayDev2[riverX][((riverY-0)-(z-0))] = "*";
		}
		else
		{
			mapArrayDev2[riverX][((riverY-0)-(z-0))] = "R";
		}

		if (riverX-1 < 1)			{z=((-mapSizeX)+1);}
		else						{z=1;}
		if (thisIsLava==1)
		{
			mapArrayDev2[((riverX-0)-(z-0))][riverY] = "*";
		}
		else
		{
			mapArrayDev2[((riverX-0)-(z-0))][riverY] = "R";
		}

		if (thisIsLava==1)
		{
			mapArrayDev2[riverX][riverY] = "*";
		}
		else
		{
			mapArrayDev2[riverX][riverY] = "R";
		}

		if (riverX+1 > mapSizeX)	{z=((-mapSizeX)+1);}
		else						{z=1;}
		if (thisIsLava==1)
		{
			mapArrayDev2[((riverX-0)+(z-0))][riverY] = "*";
		}
		else
		{
			mapArrayDev2[((riverX-0)+(z-0))][riverY] = "R";
		}

		if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
		else						{z=1;}
		if (thisIsLava==1)
		{
			mapArrayDev2[riverX][((riverY-0)+(z-0))] = "*";
		}
		else
		{
			mapArrayDev2[riverX][((riverY-0)+(z-0))] = "R";
		}

//		stage2Error.value += "\nPlotted river at: ("+riverX+","+riverY+").";
//		stage2Error.scrollTop = stage2Error.scrollHeight;
	}
	catch(err)
	{
		stage2Error.value += "\nERROR (plotRiver): "+riverX+","+riverY;
		stage2Error.scrollTop = stage2Error.scrollHeight;
	}
}

function plotFlow()
{
	try
	{
		if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
		else						{z=1;}
		mapArrayDev2[riverX][((riverY-0)-(z-0))] = "*";

		if (riverX-1 < 1)			{z=((-mapSizeX)+1);}
		else						{z=1;}
		mapArrayDev2[((riverX-0)-(z-0))][riverY] = "*";

		mapArrayDev2[riverX][riverY] = "*";

		if (riverX+1 > mapSizeX)	{z=((-mapSizeX)+1);}
		else						{z=1;}
		mapArrayDev2[((riverX-0)+(z-0))][riverY] = "*";

		if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
		else						{z=1;}
		mapArrayDev2[riverX][((riverY-0)+(z-0))] = "*";

//		stage2Error.value += "\nPlotted river at: ("+riverX+","+riverY+").";
//		stage2Error.scrollTop = stage2Error.scrollHeight;
	}
	catch(err)
	{
		stage2Error.value += "\nERROR (plotRiver): "+riverX+","+riverY;
		stage2Error.scrollTop = stage2Error.scrollHeight;
	}
}

function addBeaches()
{
	for (y=1;y<=mapSizeY;y++)
	{
		for (x=1;x<=mapSizeX;x++)
		{
			if ((mapArrayDev[x][y] != "X") && (mapArrayDev[x][y] != "Q") && (mapArrayDev[x][y] != "~") && (mapArrayDev[x][y] != "R"))
			{
				waterAjacent = 0;

				for (yy=(-1);yy<=1;yy++)
				{
					for (xx=(-1);xx<=1;xx++)
					{
						if ((x+xx) < 1)
						{
							xxx = mapSizeX;
						}
						else if ((x+xx) > mapSizeX)
						{
							xxx = 1;
						}
						else
						{
							xxx = ((x-0)+(xx-0));
						}

						if ((y+yy) < 1)
						{
							yyy = mapSizeY;
						}
						else if ((y+yy) > mapSizeY)
						{
							yyy = 1;
						}
						else
						{
							yyy = ((y-0)+(yy-0));
						}

						if (mapArrayDev[(xxx)][(yyy)] == "X" || mapArrayDev[(xxx)][(yyy)] == "Q" || mapArrayDev[(xxx)][(yyy)] == "~")
						{
							waterAjacent = 1;
						}
					}
				}
				if (waterAjacent==1)
				{
					mapArrayDev2[x][y] = "~";
				}
				else
				{
					mapArrayDev2[x][y] = mapArrayDev[x][y];
				}
			}
			else
			{
				mapArrayDev2[x][y] = mapArrayDev[x][y];
			}
		}
	}
	for (y=1;y<=mapSizeY;y++)
	{
		for (x=1;x<=mapSizeX;x++)
		{
			mapArrayDev[x][y] = mapArrayDev2[x][y];
			mapArrayDev2[x][y] = "";
		}
	}
}

function addShallows()
{
	for (y=1;y<=mapSizeY;y++)
	{
		for (x=1;x<=mapSizeX;x++)
		{
			if (mapArrayDev[x][y]=="X")
			{
				somethingAjacent = 0;

				for (yy=(-1);yy<=1;yy++)
				{
					for (xx=(-1);xx<=1;xx++)
					{
						if ((x+xx) < 1)
						{
							xxx = mapSizeX;
						}
						else if ((x+xx) > mapSizeX)
						{
							xxx = 1;
						}
						else
						{
							xxx = ((x-0)+(xx-0));
						}

						if ((y+yy) < 1)
						{
							yyy = mapSizeY;
						}
						else if ((y+yy) > mapSizeY)
						{
							yyy = 1;
						}
						else
						{
							yyy = ((y-0)+(yy-0));
						}

//						stage2Error.value += "\nx:"+x+", y:"+y+", xx:"+xx+", yy:"+yy+", xxx:"+xxx+", yyy:"+yyy;

//						stage2Error.value += "\n"+mapArrayDev[xxx][yyy];

						if (mapArrayDev[xxx][yyy] != "X")
						{
							somethingAjacent = 1;
//							stage2Error.value += "\nSomething ajacent.";
						}
					}
				}
				if (somethingAjacent == 1)
				{
					mapArrayDev2[x][y] = "Q";
//					stage2Error.value += "\nPrinting a Q.";
					somethingAjacent = 0;
				}
				else
				{
					mapArrayDev2[x][y] = mapArrayDev[x][y];
				}
			}
			else
			{
				mapArrayDev2[x][y] = mapArrayDev[x][y];
			}
		}
	}
	for (y=1;y<=mapSizeY;y++)
	{
		for (x=1;x<=mapSizeX;x++)
		{
			mapArrayDev[x][y] = mapArrayDev2[x][y];
//			mapArrayDev2[x][y] = "";
		}
	}
}

function changeWaterLevel()
{
	getTime();
	if (eraseMods==0)
	{
		stage2Error.value += "\n" + timeText + " - Changing water level...";
	}
	else
	{
		stage2Error.value += "\n" + timeText + " - Erasing changes......";
	}
	stage2Error.scrollTop = stage2Error.scrollHeight;

	for (y=1;y<=mapSizeY;y++)
	{
		for (x=1;x<=mapSizeX;x++)
		{
			mapArrayDev[x][y] = mapArrayMaster[x][y];
		}
	}

	if (((waterLevelTextArea.value * 2) > ((lowestLevel+1)*2)) && eraseMods==0)
	{
		waterLevel = ((lowestLevel+1)*2);
	}
	else
	{
		waterLevel = (waterLevelTextArea.value * 2);
		eraseMods = 0;
	}

//	if (waterLevel == 1)
//	{
//		waterLevel = 2;
//	}

//	document.myform.adjustmentError.value = document.myform.adjustmentError.value + "\nWater level: "+waterLevel;
//	document.myform.adjustmentError.scrollTop = document.myform.adjustmentError.scrollHeight;

	setWaterLevel();

	getTime();
	stage2Error.value += "\n" + timeText + " - [Water level: "+waterLevel+".]";
	stage2Error.scrollTop = stage2Error.scrollHeight;

	getTime();
	stage2Error.value += "\n" + timeText + " - Drawing world...[changeWaterLevel]";
	stage2Error.scrollTop = stage2Error.scrollHeight;

//	differentiateOceans();

	drawMap();
}

function seedHillRanges()
{

/*

	hillCurvynessFactor = 0 then straight
	hillCurvynessFactor = 100 then totally curvy

	1	2	3


	4		5


	6	7	8

	turn left, turn right or go straight

	if old direction = 1 then 1, 4 or 2
	if old direction = 2 then 2, 1 or 3
	if old direction = 3 then 3, 2 or 5
	if old direction = 4 then 4, 6 or 1
	if old direction = 5 then 5, 3 or 8
	if old direction = 6 then 6, 7 or 4
	if old direction = 7 then 7, 8 or 6
	if old direction = 8 then 8, 5 or 7

*/

	if (z > 2)
	{
//		numHillRanges = (numHillRanges * hillMultiplierFactor[z-2]);
		for (v=1;v<=numHillRanges;v++)
		{
			goodSeedLocation = 0;

			while (goodSeedLocation == 0 && noContinentsSelected == 0)
			{

				hillRangeX = Math.floor(Math.random()*mapSizeX)+1;
				hillRangeY = Math.floor(Math.random()*mapSizeY)+1;

				mountainTopX = hillRangeX;
				mountainTopY = hillRangeY;

				checkSeedLocation();
			}

			if (goodSeedLocation == 1)
			{
				mapArrayWorld[hillRangeX][hillRangeY][z]=landCharacter;

				oldDirection = Math.floor(Math.random()*8)+1;

				realHillLength = Math.round(Math.floor(Math.random()*(((maxHillLength / 100) * mapSizeX) / 2)) + (Math.random()*(((maxHillLength / 100) * mapSizeX) / 2)) + 1);

//				constructorError.value += "\nrealHillLength: "+realHillLength;
//				constructorError.scrollTop = constructorError.scrollHeight;

//				for (asd=1;asd<=1;asd++)
				for (asd=1;asd<=realHillLength;asd++)
				{
					randomNumber = Math.floor(Math.random()*100)+1;
					if (randomNumber <= hillCurvyness)
					{
						//	CURVY!

						randomNumber = Math.floor(Math.random()*100)+1;
						if (randomNumber < 51)
						{
							//	GO LEFT!

							if      (oldDirection == 1)		{newDirection = 4;}
							else if (oldDirection == 2)		{newDirection = 1;}
							else if (oldDirection == 3)		{newDirection = 2;}
							else if (oldDirection == 4)		{newDirection = 6;}
							else if (oldDirection == 5)		{newDirection = 3;}
							else if (oldDirection == 6)		{newDirection = 7;}
							else if (oldDirection == 7)		{newDirection = 8;}
							else if (oldDirection == 8)		{newDirection = 5;}
						}
						else
						{
							//	GO RIGHT!

							if      (oldDirection == 1)		{newDirection = 2;}
							else if (oldDirection == 2)		{newDirection = 3;}
							else if (oldDirection == 3)		{newDirection = 5;}
							else if (oldDirection == 4)		{newDirection = 1;}
							else if (oldDirection == 5)		{newDirection = 8;}
							else if (oldDirection == 6)		{newDirection = 4;}
							else if (oldDirection == 7)		{newDirection = 6;}
							else if (oldDirection == 8)		{newDirection = 7;}
						}
					}
					else
					{
						//	STRAIGHT!

						newDirection = oldDirection;
					}

					if (newDirection == 1)
					{
						hillRangeX = hillRangeX - 1;
						hillRangeY = hillRangeY - 1;

						if (hillRangeX < 1)
						{
							hillRangeX = (mapSizeX);
						}
						if (hillRangeY < 1)
						{
							hillRangeY = (mapSizeY);
						}

						if (confineHills==1)
						{
							mountainTopX = hillRangeX;
							mountainTopY = hillRangeY;

							checkSeedLocation();

							if (goodSeedLocation==0)
							{
								asd = realHillLength;
							}
						}

						oldDirection = 1;
					}
					else if (newDirection == 2)
					{
						hillRangeX = hillRangeX;
						hillRangeY = hillRangeY - 1;

						if (hillRangeY < 1)
						{
							hillRangeY = (mapSizeY);
						}

						if (confineHills==1)
						{
							mountainTopX = hillRangeX;
							mountainTopY = hillRangeY;

							checkSeedLocation();

							if (goodSeedLocation==0)
							{
								asd = realHillLength;
							}
						}

						oldDirection = 2;
					}
					else if (newDirection == 3)
					{
						hillRangeX = hillRangeX + 1;
						hillRangeY = hillRangeY - 1;

						if (hillRangeX > (mapSizeX))
						{
							hillRangeX = 1;
						}
						if (hillRangeY < 1)
						{
							hillRangeY = (mapSizeY);
						}

						if (confineHills==1)
						{
							mountainTopX = hillRangeX;
							mountainTopY = hillRangeY;

							checkSeedLocation();

							if (goodSeedLocation==0)
							{
								asd = realHillLength;
							}
						}

						oldDirection = 3;
					}
					else if (newDirection == 4)
					{
						hillRangeX = hillRangeX - 1;
						hillRangeY = hillRangeY;

						if (hillRangeX < 1)
						{
							hillRangeX = (mapSizeX);
						}

						if (confineHills==1)
						{
							mountainTopX = hillRangeX;
							mountainTopY = hillRangeY;

							checkSeedLocation();

							if (goodSeedLocation==0)
							{
								asd = realHillLength;
							}
						}

						oldDirection = 4;
					}
					else if (newDirection == 5)
					{
						hillRangeX = hillRangeX + 1;
						hillRangeY = hillRangeY;

						if (hillRangeX > (mapSizeX))
						{
							hillRangeX = 1;
						}

						if (confineHills==1)
						{
							mountainTopX = hillRangeX;
							mountainTopY = hillRangeY;

							checkSeedLocation();

							if (goodSeedLocation==0)
							{
								asd = realHillLength;
							}
						}

						oldDirection = 5;
					}
					else if (newDirection == 6)
					{
						hillRangeX = hillRangeX - 1;
						hillRangeY = hillRangeY + 1;

						if (hillRangeX < 1)
						{
							hillRangeX = (mapSizeX);
						}
						if (hillRangeY > (mapSizeY))
						{
							hillRangeY = 1;
						}

						if (confineHills==1)
						{
							mountainTopX = hillRangeX;
							mountainTopY = hillRangeY;

							checkSeedLocation();

							if (goodSeedLocation==0)
							{
								asd = realHillLength;
							}
						}

						oldDirection = 6;
					}
					else if (newDirection == 7)
					{
						hillRangeX = hillRangeX;
						hillRangeY = hillRangeY + 1;

						if (hillRangeY > (mapSizeY))
						{
							hillRangeY = 1;
						}

						if (confineHills==1)
						{
							mountainTopX = hillRangeX;
							mountainTopY = hillRangeY;

							checkSeedLocation();

							if (goodSeedLocation==0)
							{
								asd = realHillLength;
							}
						}

						oldDirection = 7;
					}
					else if (newDirection == 8)
					{
						hillRangeX = hillRangeX + 1;
						hillRangeY = hillRangeY + 1;

						if (hillRangeX > (mapSizeX))
						{
							hillRangeX = 1;
						}
						if (hillRangeY > (mapSizeY))
						{
							hillRangeY = 1;
						}

						if (confineHills==1)
						{
							mountainTopX = hillRangeX;
							mountainTopY = hillRangeY;

							checkSeedLocation();

							if (goodSeedLocation==0)
							{
								asd = realHillLength;
							}
						}

						oldDirection = 8;
					}

					plotHilltop();

//					mapArrayWorld[hillRangeX][hillRangeY][z]=landCharacter;
//					mapArrayWorld[hillRangeX+1][hillRangeY][z]=landCharacter;
//					mapArrayWorld[hillRangeX][hillRangeY+1][z]=landCharacter;
//					mapArrayWorld[hillRangeX+1][hillRangeY+1][z]=landCharacter;
				}
			}
		}
	}
}

function plotHilltop()
{
	if (maxHillGirth==1)
	{
		mapArrayWorld[(hillRangeX)][(hillRangeY)][z] = landCharacter;
	}
	else if (maxHillGirth==2)
	{
		for (y=0;y<=1;y++)
		{
			yb=y;
			for (x=0;x<=1;x++)
			{
				xb=x;
				if (((hillRangeX-0)+(x-0)) > mapSizeX)
				{
					xb=(1-(mapSizeX-0));
				}

				if (((hillRangeY-0)+(y-0)) > mapSizeY)
				{
					yb=(1-(mapSizeY-0));
				}

				mapArrayWorld[((hillRangeX-0)+(xb-0))][((hillRangeY-0)+(yb-0))][z] = landCharacter;
			}
		}
	}
	else
	{
		halfHillSize = Math.round(maxHillGirth * 0.5);
	//		document.myform.fieldError.value = document.myform.fieldError.value + "\nhalfMtnSize: "+halfMtnSize;
	//		document.myform.fieldError.scrollTop = document.myform.fieldError.scrollHeight;

		quarterHillSize = Math.round(maxHillGirth * 0.25);
		threeQuarterHillSize = quarterHillSize * 3;

		randomNumber = Math.floor(Math.random()*threeQuarterHillSize)+1;
	//		document.myform.fieldError.value = document.myform.fieldError.value + "\nrandomNumber: "+randomNumber;
	//		document.myform.fieldError.scrollTop = document.myform.fieldError.scrollHeight;

		maxHillGirthSpecific = maxHillGirth - randomNumber;
	//		document.myform.fieldError.value = document.myform.fieldError.value + "\nmtnSizeSpecific: "+mtnSizeSpecific;
	//		document.myform.fieldError.scrollTop = document.myform.fieldError.scrollHeight;

		hillRadius = Math.round(maxHillGirthSpecific / 2);
	//		document.myform.fieldError.value = document.myform.fieldError.value + "\nmtnRadius: "+mtnRadius;
	//		document.myform.fieldError.scrollTop = document.myform.fieldError.scrollHeight;

		negativeHillRadius = hillRadius - (hillRadius * 2);
	//		document.myform.fieldError.value = document.myform.fieldError.value + "\nnegativeMtnRadius: "+negativeMtnRadius;
	//		document.myform.fieldError.scrollTop = document.myform.fieldError.scrollHeight;

		if (hillRadius < 1)				{hillRadius = 1;}
		if (negativeHillRadius > (-1))	{negativeHillRadius = (-1);}

		for (q=negativeHillRadius;q<=hillRadius;q++)
		{
			for (p=negativeHillRadius;p<=hillRadius;p++)
			{
				if ((Math.abs((p * p)+(q * q))) <= ((hillRadius) * (hillRadius)))
				{
	//				checkAndAdjustMountainTopValues();

					if (((hillRangeX-0) + (p-0)) < 1)
	//				if (((hillRangeX-0) + (p-0)) <= 0)
					{
						hillRangeXb = ((hillRangeX-0) + (mapSizeX-0));
	//					document.myform.fieldError.value = document.myform.fieldError.value + "\nHIT DAT - mTopX:" + hillRangeX + " / p:"+p;
					}
					else if (((hillRangeX-0) + (p-0)) > mapSizeX)
					{
						hillRangeXb = (((hillRangeX-0)) - (mapSizeX-0));
					}
					else
					{
						hillRangeXb = hillRangeX;
					}

					if (((hillRangeY-0) + (q-0)) < 1)
					{
						hillRangeYb = ((hillRangeY-0) + (mapSizeY-0));
					}
					else if (((hillRangeY-0) + (q-0)) > mapSizeY)
					{
						hillRangeYb = (((hillRangeY-0)) - (mapSizeY-0));
					}
					else
					{
						hillRangeYb = hillRangeY;
					}

	//				document.myform.fieldError.value = document.myform.fieldError.value + "\nPLOT: " + ((hillRangeXb-0)+(p-0)) + "," + ((hillRangeYb-0)+(q-0));
	//				try
	//				{
						mapArrayWorld[((hillRangeXb-0)+(p-0))][((hillRangeYb-0)+(q-0))][z] = landCharacter;
	//					constructorError.value += "\nPlotted hill top at: "+((hillRangeXb-0)+(p-0))+","+((hillRangeYb-0)+(q-0));
	//				}
	//				catch(err)
	//				{
	//					document.myform.fieldError.value = document.myform.fieldError.value + "\nERROR - mTopX:"+hillRangeX+" / mTopXb:"+hillRangeXb+" / p:"+p+" / "+(hillRangeX + p);
	//				}
				}
			}
		}
	//		document.myform.fieldError.value = document.myform.fieldError.value + "\nPLOT MOUNTAIN! ("+hillRangeX+","+hillRangeY+")";
	//		document.myform.fieldError.scrollTop = document.myform.fieldError.scrollHeight;
	}
}

function growWorld()
{
	notEmptyTiles = 0;
	setLandCharacter();
	if (levelComplete == 1)
	{

	}
	else
	{
		if (z > 3)
		{
			seedHillRanges();
		}
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if (mapArrayWorld[x][y][z-1] != "X")
				{
					notEmptyTiles = notEmptyTiles + 1;
					if ((z>2) && (notEmptyTiles == (mapSizeX * mapSizeY)))
					{
						levelComplete = 1;
						getTime();
						constructorError.value += "\n"+timeText+" - [Level full. ("+notEmptyTiles+")]";
						constructorError.scrollTop = constructorError.scrollHeight;
					}

					if (z==2)
					{
						landUniformity2 = 60;
					}
					else
					{
						landUniformity2 = landUniformity;
					}

					randomNumber=Math.floor(Math.random()*100)+1;
					if (randomNumber <= landUniformity2)
					{
						for (k=-1;k<=1;k++)
						{
							m=k;
							for (j=-1;j<=1;j++)
							{
								l=j;
								if ((x+l) < 1 || (x+l) > mapSizeX)		{l = 0;}
								if ((y+m) < 1 || (y+m) > mapSizeY)		{m = 0;}
								if (mapArrayWorld[x+l][y+m][z-1] == "X")
								{
									adjustGrowthDiameter();
									for (q=negativeLandGrowthDiameter;q<=landGrowthDiameter;q++)
									{
										s=q;
										for (p=negativeLandGrowthDiameter;p<=landGrowthDiameter;p++)
										{
											r=p;

											if ((Math.abs((r * r)+(s * s))) <= (landGrowthDiameter * landGrowthDiameter))
											{
												if (((x-0) + (r-0)) < 1)
												{
													Xb = ((x-0) + (mapSizeX-0));
												}
												else if (((x-0) + (r-0)) > (mapSizeX-0))
												{
													Xb = ((x-0) - (mapSizeX-0));
												}
												else
												{
													Xb = x;
												}
												if (((y-0) + (s-0)) < 1)
												{
													Yb = ((y-0) + (mapSizeY-0));
												}
												else if (((y-0) + (s-0)) > (mapSizeY-0))
												{
													Yb = ((y-0) - (mapSizeY-0));
												}
												else
												{
													Yb = y;
												}
												for (drillDown = z;drillDown <= 30;drillDown++)
												{
													mapArrayWorld[(Xb+r)][(Yb+s)][drillDown] = landCharacter;
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
	levelCompleted = 1;
	if (z <= elevations)
	{
		doGrowWorld = 1;
	}
}

function setLandCharacter()
{
	if (z==1)		{landCharacter="a";}
	else if (z==2)	{landCharacter="b";}
	else if (z==3)	{landCharacter="c";}
	else if (z==4)	{landCharacter="d";}
	else if (z==5)	{landCharacter="e";}
	else if (z==6)	{landCharacter="f";}
	else if (z==7)	{landCharacter="g";}
	else if (z==8)	{landCharacter="h";}
	else if (z==9)	{landCharacter="i";}
	else if (z==10)	{landCharacter="j";}
	else if (z==11)	{landCharacter="k";}
	else if (z==12)	{landCharacter="l";}
	else if (z==13)	{landCharacter="m";}
	else if (z==14)	{landCharacter="n";}
	else if (z==15)	{landCharacter="o";}
	else if (z==16)	{landCharacter="p";}
	else if (z==17)	{landCharacter="q";}
	else if (z==18)	{landCharacter="r";}
	else if (z==19)	{landCharacter="s";}
	else if (z==20)	{landCharacter="t";}
	else if (z==21)	{landCharacter="u";}
	else if (z==22)	{landCharacter="v";}
	else if (z==23)	{landCharacter="w";}
	else if (z==24)	{landCharacter="x";}
	else if (z==25)	{landCharacter="y";}
	else if (z==26)	{landCharacter="z";}
	else if (z==27)	{landCharacter="$";}
	else if (z==28)	{landCharacter="^";}
	else if (z==29)	{landCharacter="&";}
	else if (z==30)	{landCharacter="(";}
}

function adjustGrowthDiameter()
{
	if		(z==1)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[1]));}
	else if (z==2)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[2]) - growth[1]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==3)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[3]) - growth[2]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==4)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[4]) - growth[3]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==5)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[5]) - growth[4]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==6)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[6]) - growth[5]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==7)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[7]) - growth[6]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==8)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[8]) - growth[7]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==9)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[9]) - growth[8]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==10)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[10]) - growth[9]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==11)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[11]) - growth[10]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==12)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[12]) - growth[11]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==13)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[13]) - growth[12]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==14)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[14]) - growth[13]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==15)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[15]) - growth[14]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==16)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[16]) - growth[15]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==17)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[17]) - growth[16]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==18)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[18]) - growth[17]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==19)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[19]) - growth[18]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==20)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[20]) - growth[19]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==21)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[21]) - growth[20]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==22)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[22]) - growth[21]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==23)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[23]) - growth[22]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==24)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[24]) - growth[23]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==25)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[25]) - growth[24]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==26)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[26]) - growth[25]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==27)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[27]) - growth[26]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==28)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[28]) - growth[27]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==29)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[29]) - growth[28]) + Math.round(maxMtnGirthSlider.value / 2);}
	else if (z==30)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[30]) - growth[29]) + Math.round(maxMtnGirthSlider.value / 2);}
/*
	if		(z==1)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[1])) + (Math.round(maxMtnGirth / 2));}
	else if (z==2)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[2])) + (Math.round(maxMtnGirth / 2));}
	else if (z==3)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[3])) + (Math.round(maxMtnGirth / 2));}
	else if (z==4)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[4])) + (Math.round(maxMtnGirth / 2));}
	else if (z==5)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[5])) + (Math.round(maxMtnGirth / 2));}
	else if (z==6)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[6])) + (Math.round(maxMtnGirth / 2));}
	else if (z==7)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[7])) + (Math.round(maxMtnGirth / 2));}
	else if (z==8)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[8])) + (Math.round(maxMtnGirth / 2));}
	else if (z==9)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[9])) + (Math.round(maxMtnGirth / 2));}
	else if (z==10)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[10])) + (Math.round(maxMtnGirth / 2));}
	else if (z==11)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[11])) + (Math.round(maxMtnGirth / 2));}
	else if (z==12)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[12])) + (Math.round(maxMtnGirth / 2));}
	else if (z==13)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[13])) + (Math.round(maxMtnGirth / 2));}
	else if (z==14)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[14])) + (Math.round(maxMtnGirth / 2));}
	else if (z==15)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[15])) + (Math.round(maxMtnGirth / 2));}
	else if (z==16)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[16])) + (Math.round(maxMtnGirth / 2));}
	else if (z==17)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[17])) + (Math.round(maxMtnGirth / 2));}
	else if (z==18)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[18])) + (Math.round(maxMtnGirth / 2));}
	else if (z==19)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[19])) + (Math.round(maxMtnGirth / 2));}
	else if (z==20)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[20])) + (Math.round(maxMtnGirth / 2));}
	else if (z==21)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[21])) + (Math.round(maxMtnGirth / 2));}
	else if (z==22)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[22])) + (Math.round(maxMtnGirth / 2));}
	else if (z==23)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[23])) + (Math.round(maxMtnGirth / 2));}
	else if (z==24)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[24])) + (Math.round(maxMtnGirth / 2));}
	else if (z==25)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[25])) + (Math.round(maxMtnGirth / 2));}
	else if (z==26)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[26])) + (Math.round(maxMtnGirth / 2));}
	else if (z==27)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[27])) + (Math.round(maxMtnGirth / 2));}
	else if (z==28)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[28])) + (Math.round(maxMtnGirth / 2));}
	else if (z==29)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[29])) + (Math.round(maxMtnGirth / 2));}
	else if (z==30)	{landGrowthDiameter=Math.round(Math.floor(Math.random()*growth[30])) + (Math.round(maxMtnGirth / 2));}
*/
	negativeLandGrowthDiameter = landGrowthDiameter - (landGrowthDiameter * 2);
}

function seedVolcanoes()
{
	halfVolcanoSize = Math.round(maxVolcanoSize * 0.5);
	randomNumber=Math.floor(Math.random()*halfVolcanoSize)+1;
	maxVolcanoSizeSpecific = maxVolcanoSize - randomNumber;
	volcanoRadius = Math.round(maxVolcanoSizeSpecific / 2);
	if (volcanoRadius < 3)
	{
		volcanoRadius = 3;
	}
	negativeVolcanoRadius = volcanoRadius - (volcanoRadius * 2);

	volcanoSeedTries = 0;
	goodVolcanoSeedPoint = 0;

	while (goodVolcanoSeedPoint==0 && volcanoSeedTries <= 10000)
	{
		volcanoSeedTries = volcanoSeedTries + 1;

		volcanoX = randomNumber=Math.floor(Math.random()*mapSizeX)+1;
		volcanoY = randomNumber=Math.floor(Math.random()*mapSizeY)+1;

		if (mapArrayWorld[volcanoX][volcanoY][1] == "a")
		{
			volcanoSeedPointTooClose = 0;
			for (q=(negativeVolcanoRadius * 2);q<=(volcanoRadius * 2);q++)
			{
				s=q;
				for (p=(negativeVolcanoRadius * 2);p<=(volcanoRadius * 2);p++)
				{
					r=p;



					if (((volcanoX-0) + r) < 1)
					{
						volcanoXb = (((volcanoX-0)) + (mapSizeX-0));
					}
					else if (((volcanoX-0) + r) > mapSizeX)
					{
						volcanoXb = (((volcanoX-0)) - (mapSizeX-0));
					}
					else
					{
						volcanoXb = volcanoX;
					}

					if (((volcanoY-0) + s) < 1)
					{
						volcanoYb = (((volcanoY-0)) + (mapSizeY-0));
					}
					else if (((volcanoY-0) + s) > mapSizeY)
					{
						volcanoYb = (((volcanoY-0)) - (mapSizeY-0));
					}
					else
					{
						volcanoYb = volcanoY;
					}

					if (mapArrayWorld[volcanoXb+r][volcanoYb+s][1] == "*")
					{
						volcanoSeedPointTooClose = 1;
					}
				}
			}
			if (volcanoSeedPointTooClose==0)
			{
				goodVolcanoSeedPoint = 1;
			}
		}
	}

	if (goodVolcanoSeedPoint==1)
	{
		volcanoCount = volcanoCount + 1;
		volcanoXArray[volcanoCount] = volcanoX;
		volcanoYArray[volcanoCount] = volcanoY;

//		document.myform.fieldError.value = document.myform.fieldError.value + "\nVolcano seed point found: "+volcanoX+","+volcanoY;
//		document.myform.fieldError.value = document.myform.fieldError.value + "\nVolcano seed tries: "+volcanoSeedTries;
//		document.myform.fieldError.scrollTop = document.myform.fieldError.scrollHeight;

		for (q=negativeVolcanoRadius;q<=volcanoRadius;q++)
		{
			s=q;
			for (p=negativeVolcanoRadius;p<=volcanoRadius;p++)
			{
				r=p;
				if ((Math.abs((r * r)+(s * s))) <= ((volcanoRadius) * (volcanoRadius)))
				{


					if (((volcanoX-0) + r) < 1)
					{
						volcanoXb = (((volcanoX-0)) + (mapSizeX-0));
					}
					else if (((volcanoX-0) + r) > mapSizeX)
					{
						volcanoXb = (((volcanoX-0)) - (mapSizeX-0));
					}
					else
					{
						volcanoXb = volcanoX;
					}

					if (((volcanoY-0) + s) < 1)
					{
						volcanoYb = (((volcanoY-0)) + (mapSizeY-0));
					}
					else if (((volcanoY-0) + s) > mapSizeY)
					{
						volcanoYb = (((volcanoY-0)) - (mapSizeY-0));
					}
					else
					{
						volcanoYb = volcanoY;
					}

					mapArrayWorld[volcanoXb+r][volcanoYb+s][1] = "*";
				}
			}
		}

		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if (mapArrayWorld[x][y][1] == "*")
				{
					for (q=(-1);q<=1;q++)
					{
						s=q;
						for (p=(-1);p<=1;p++)
						{
							r=p;

							if ((x+r) < 1)			{r=(mapSizeX-1);}
							if ((x+r) > mapSizeX)	{r=((mapSizeX*(-1))+1);}
							if ((y+s) < 1)			{s=(mapSizeY-1);}
							if ((y+s) > mapSizeY)	{s=((mapSizeY*(-1))+1);}

//							if (mapArrayWorld[x+r][y+s][1] != "*" && mapArrayWorld[x+r][y+s][1] != "-")
//							{
//								mapArrayWorld[x][y][1] = "-";
//							}
						}
					}
				}
			}
		}

		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if (mapArrayWorld[x][y][1] == "*")
				{
					for (q=(-1);q<=1;q++)
					{
						s=q;
						for (p=(-1);p<=1;p++)
						{
							r=p;

							if ((x+r) < 1)			{r=(mapSizeX-1);}
							if ((x+r) > mapSizeX)	{r=((mapSizeX*(-1))+1);}
							if ((y+s) < 1)			{s=(mapSizeY-1);}
							if ((y+s) > mapSizeY)	{s=((mapSizeY*(-1))+1);}

							if (mapArrayWorld[x+r][y+s][1] != "a" && mapArrayWorld[x+r][y+s][1] != "*" && mapArrayWorld[x+r][y+s][1] != "-")
							{
								mapArrayWorld[x+r][y+s][1] = "a";
							}
						}
					}
				}
			}
		}
		if (volcanoCount==1)
		{
			getTime();
			constructorError.value += "\n" + timeText + " - 1 volcano created. ("+volcanoSeedTries+" points tried.)";
			constructorError.scrollTop = constructorError.scrollHeight;
		}
		else
		{
			getTime();
			constructorError.value += "\n" + timeText + " - " + volcanoCount + " volcanoes created. ("+volcanoSeedTries+" points tried.)";
			constructorError.scrollTop = constructorError.scrollHeight;
		}
	}
	else
	{
		getTime();
		constructorError.value += "\n" + timeText + " - Volcano aborted! (No good seed point.)";
		constructorError.scrollTop = constructorError.scrollHeight;
	}
	constructorError.scrollTop = constructorError.scrollHeight;
	numVolcanoes = numVolcanoes - 1;
}

function flattenMap()
{
	for (z=30;z>=1;z--)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if (mapArrayWorld[x][y][z] != "X")
				{
					mapArrayMaster[x][y] = mapArrayWorld[x][y][z];
					mapArrayDev[x][y] = mapArrayWorld[x][y][z];
				}
//				else
//				{
//					mapArrayMaster[x][y] = "&nbsp;";
//					mapArrayDev[x][y] = "&nbsp;";
//				}
			}
		}
	}
	doFlattenMap = 2;
}

function printWorld()
{
//	textDisplay.value = "";
//	textDisplayString = "";

//	for (y=1;y<=mapSizeY;y++)
//	{
//		for (x=1;x<=mapSizeX;x++)
//		{
//			textDisplayString += mapArrayDev[x][y];
//		}
//		textDisplayString += "<br>";
//	}

//	document.getElementById('textDisplay').innerHTML = textDisplayString;

//	determineWaterLevel();

//	getTime();
//	stage2Error.value += "\n"+timeText+" - Water level: "+((waterLevel-0)+1);
//	stage2Error.scrollTop = stage2Error.scrollHeight;

//	waterLevel = Math.round(waterLevel / 2);

//	document.myform.fieldError.value = document.myform.fieldError.value + "\nWater level set at: "+waterLevel;
//	document.myform.fieldError.scrollTop = document.myform.fieldError.scrollHeight;

//	setWaterLevel();

//	differentiateOceans();

	drawMap();
}

function turnOffRedSquare()
{
//	document.getElementById("divWorldMap").style.display="none";
//	redSquareOn = 0;
	if (redSquareOn==0)
	{
		document.getElementById("buttonTurnOffRedSquare").style.display="none";
		document.getElementById("buttonTurnOnRedSquare").style.display="block";
	}
	else
	{
		document.getElementById("buttonTurnOnRedSquare").style.display="none";
		document.getElementById("buttonTurnOffRedSquare").style.display="block";
	}
	drawMap();
//	document.getElementById("divWorldMap").style.display="block";
}

function drawMap()
{
	if (divClimateBuilderOn==0 && worldMapDisplayOn==0)
	{
		var canvasThing=document.getElementById("drawDisplay");
	//	worldMapError.value = "\nCanvas set to drawDisplay.";
	}
	else if (worldMapDisplayOn==1)
	{
		var canvasThing=document.getElementById("worldMapDisplay");
	//	worldMapError.value = "\nCanvas set to worldMapDisplay.";
	//	worldMapError.value += "\nmapSizeX: "+mapSizeX;
	//	worldMapError.value += "\nmapSizeY: "+mapSizeY;
	//	worldMapError.value += "\nmapArrayDev[1][1]: "+mapArrayDev[1][1];
	}
	else
	{
		getTime();
		climateBuilderError.value += "\n" + timeText + " - Drawing world...[drawMap]";
		var canvasThing=document.getElementById("climateDisplay");
	//	worldMapError.value = "\nCanvas set to climateDisplay.";
	}

	var cxt=canvasThing.getContext("2d");

	drawDisplay.width=mapSizeX;
	drawDisplay.height=mapSizeY;

	canvasImageConstructor.width=mapSizeX;
	canvasImageConstructor.height=mapSizeY;

	canvasImageClimateBuilder.width=mapSizeX;
	canvasImageClimateBuilder.height=mapSizeY;

	climateDisplay.width=mapSizeX;
	climateDisplay.height=mapSizeY;

	worldMapDisplay.width=(mapSizeX-0)+2;
	worldMapDisplay.height=(mapSizeY-0)+2;

	canvasImageWorldMapDisplay.width=(mapSizeX-0)+2;
	canvasImageWorldMapDisplay.height=(mapSizeY-0)+2;

	cxt.clearRect(0,0,(mapSizeX-0)+2,(mapSizeY-0)+2);

	drawResolutionFactor = 1;

//	blarg = 5;
//	blarg = document.myform.drawResolution.value;

//	document.myform.fieldError.value = document.myform.fieldError.value + "\nLand levels displayed: " + (waterLevel - 1);
//	document.myform.fieldError.scrollTop = document.myform.fieldError.scrollHeight;

	drawDisplayString = "";

	var drawPosX = 0;
	var drawPosY = 0;

//	document.myform.fieldError.value = document.myform.fieldError.value + "\nLand levels displayed XXX: " + (waterLevel - 1);
//	document.myform.fieldError.scrollTop = document.myform.fieldError.scrollHeight;

//	waterLevel = 10;

	plotCount = 0;

	for (y=1;y<=mapSizeY;y++)
	{
		for (x=1;x<=mapSizeX;x++)
		{
			plotCount = plotCount + 1;

/*
			MID LATITUDE			POLAR					TROPICAL
x			high hmountains	a		high mountains	a		high mountains		a
x			low mountains	b		low mountains	b		low mountains lush	0
x			hills meadow	c		hills scrub		5		hills lush			!
x			boreal			d		boreal polar	(		rainforest			@
			mixed forest	e		boreal polar	(		rainforest			@
			forest			f		boreal polar	(		rainforest			@
			trees			g		trees polar		6		rainforest			@
			scrub			h		scrub polar		7		rainforest			@
			longgrass		i		tundra long		8		trees				g
			grass			j		tundra			9		grass				j
									ice				#

boreal
forest
grass
hills lush
hills meadow
longgrass
low mountains
low mountains lush
mixed forest
rainforest
scrub
trees

LIGHTEST TO DARKEST

ice
high mountains
low mountains
hills scrub
trees polar
scrub polar
tundra long
tundra

else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}
else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}
else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}
else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}
else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}
else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}
else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}
else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}
*/

			if (waterLevel == 1)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 2)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 3)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#5A923C"; cxt.fillRect(x,y,1,1);}	// 15
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 4)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#0E8A09"; cxt.fillRect(x,y,1,1);}	// 20
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 5)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#5A923C"; cxt.fillRect(x,y,1,1);}	// 15
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 6)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#CCCCB2"; cxt.fillRect(x,y,1,1);}	// 6
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#89975B"; cxt.fillRect(x,y,1,1);}	// 12
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#2D8D1E"; cxt.fillRect(x,y,1,1);}	// 18
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#007E00"; cxt.fillRect(x,y,1,1);}	// 24
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 7)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#5A923C"; cxt.fillRect(x,y,1,1);}	// 15
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#0E8A09"; cxt.fillRect(x,y,1,1);}	// 20
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#007A00"; cxt.fillRect(x,y,1,1);}	// 25
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 8)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// 4
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#B7B792"; cxt.fillRect(x,y,1,1);}	// 8
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#7A9651"; cxt.fillRect(x,y,1,1);}	// 13
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#3C8F28"; cxt.fillRect(x,y,1,1);}	// 17
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// 26
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 9)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#B7B792"; cxt.fillRect(x,y,1,1);}	// 8
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#89975B"; cxt.fillRect(x,y,1,1);}	// 12
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#5A923C"; cxt.fillRect(x,y,1,1);}	// 15
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#2D8D1E"; cxt.fillRect(x,y,1,1);}	// 18
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#007A00"; cxt.fillRect(x,y,1,1);}	// 25
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 10)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// 4
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#7A9651"; cxt.fillRect(x,y,1,1);}	// 13
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// 16
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// 19
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// 23
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// 26
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 11)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#CCCCB2"; cxt.fillRect(x,y,1,1);}	// 6
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#ADAD83"; cxt.fillRect(x,y,1,1);}	// 9
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#89975B"; cxt.fillRect(x,y,1,1);}	// 12
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#5A923C"; cxt.fillRect(x,y,1,1);}	// 15
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#2D8D1E"; cxt.fillRect(x,y,1,1);}	// 18
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#008800"; cxt.fillRect(x,y,1,1);}	// 21
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#007E00"; cxt.fillRect(x,y,1,1);}	// 24
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#007300"; cxt.fillRect(x,y,1,1);}	// 27
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 12)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#7A9651"; cxt.fillRect(x,y,1,1);}	// 13
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// 16
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// 19
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#007A00"; cxt.fillRect(x,y,1,1);}	// 25
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#007000"; cxt.fillRect(x,y,1,1);}	// 28
				else if (mapArrayDev[x][y] == "l")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 13)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#7A9651"; cxt.fillRect(x,y,1,1);}	// 13
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#5A923C"; cxt.fillRect(x,y,1,1);}	// 15
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#3C8F28"; cxt.fillRect(x,y,1,1);}	// 17
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#0E8A09"; cxt.fillRect(x,y,1,1);}	// 20
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#007A00"; cxt.fillRect(x,y,1,1);}	// 25
				else if (mapArrayDev[x][y] == "l")		{cxt.fillStyle="#007000"; cxt.fillRect(x,y,1,1);}	// 28
				else if (mapArrayDev[x][y] == "m")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 14)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#ADAD83"; cxt.fillRect(x,y,1,1);}	// 9
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#989965"; cxt.fillRect(x,y,1,1);}	// 11
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#7A9651"; cxt.fillRect(x,y,1,1);}	// 13
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#5A923C"; cxt.fillRect(x,y,1,1);}	// 15
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#2D8D1E"; cxt.fillRect(x,y,1,1);}	// 18
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#0E8A09"; cxt.fillRect(x,y,1,1);}	// 20
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "l")		{cxt.fillStyle="#007A00"; cxt.fillRect(x,y,1,1);}	// 25
				else if (mapArrayDev[x][y] == "m")		{cxt.fillStyle="#007000"; cxt.fillRect(x,y,1,1);}	// 28
				else if (mapArrayDev[x][y] == "n")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 15)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#ADAD83"; cxt.fillRect(x,y,1,1);}	// 9
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#989965"; cxt.fillRect(x,y,1,1);}	// 11
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#7A9651"; cxt.fillRect(x,y,1,1);}	// 13
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#5A923C"; cxt.fillRect(x,y,1,1);}	// 15
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#3C8F28"; cxt.fillRect(x,y,1,1);}	// 17
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// 19
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#008800"; cxt.fillRect(x,y,1,1);}	// 21
				else if (mapArrayDev[x][y] == "l")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// 23
				else if (mapArrayDev[x][y] == "m")		{cxt.fillStyle="#007A00"; cxt.fillRect(x,y,1,1);}	// 25
				else if (mapArrayDev[x][y] == "n")		{cxt.fillStyle="#007000"; cxt.fillRect(x,y,1,1);}	// 28
				else if (mapArrayDev[x][y] == "o")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 16)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#B7B792"; cxt.fillRect(x,y,1,1);}	// 8
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#89975B"; cxt.fillRect(x,y,1,1);}	// 12
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#6A9446"; cxt.fillRect(x,y,1,1);}	// 14
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// 16
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#2D8D1E"; cxt.fillRect(x,y,1,1);}	// 18
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#0E8A09"; cxt.fillRect(x,y,1,1);}	// 20
				else if (mapArrayDev[x][y] == "l")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "m")		{cxt.fillStyle="#007E00"; cxt.fillRect(x,y,1,1);}	// 24
				else if (mapArrayDev[x][y] == "n")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// 26
				else if (mapArrayDev[x][y] == "o")		{cxt.fillStyle="#007000"; cxt.fillRect(x,y,1,1);}	// 28
				else if (mapArrayDev[x][y] == "p")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 17)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#B7B792"; cxt.fillRect(x,y,1,1);}	// 8
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#89975B"; cxt.fillRect(x,y,1,1);}	// 12
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#6A9446"; cxt.fillRect(x,y,1,1);}	// 14
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// 16
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#2D8D1E"; cxt.fillRect(x,y,1,1);}	// 18
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#0E8A09"; cxt.fillRect(x,y,1,1);}	// 20
				else if (mapArrayDev[x][y] == "l")		{cxt.fillStyle="#008800"; cxt.fillRect(x,y,1,1);}	// 21
				else if (mapArrayDev[x][y] == "m")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "n")		{cxt.fillStyle="#007E00"; cxt.fillRect(x,y,1,1);}	// 24
				else if (mapArrayDev[x][y] == "o")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// 26
				else if (mapArrayDev[x][y] == "p")		{cxt.fillStyle="#007000"; cxt.fillRect(x,y,1,1);}	// 28
				else if (mapArrayDev[x][y] == "q")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 18)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#B7B792"; cxt.fillRect(x,y,1,1);}	// 8
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#89975B"; cxt.fillRect(x,y,1,1);}	// 12
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#7A9651"; cxt.fillRect(x,y,1,1);}	// 13
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#6A9446"; cxt.fillRect(x,y,1,1);}	// 14
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// 16
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#2D8D1E"; cxt.fillRect(x,y,1,1);}	// 18
				else if (mapArrayDev[x][y] == "l")		{cxt.fillStyle="#0E8A09"; cxt.fillRect(x,y,1,1);}	// 20
				else if (mapArrayDev[x][y] == "m")		{cxt.fillStyle="#008800"; cxt.fillRect(x,y,1,1);}	// 21
				else if (mapArrayDev[x][y] == "n")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "o")		{cxt.fillStyle="#007E00"; cxt.fillRect(x,y,1,1);}	// 24
				else if (mapArrayDev[x][y] == "p")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// 26
				else if (mapArrayDev[x][y] == "q")		{cxt.fillStyle="#007000"; cxt.fillRect(x,y,1,1);}	// 28
				else if (mapArrayDev[x][y] == "r")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 19)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#B7B792"; cxt.fillRect(x,y,1,1);}	// 8
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#ADAD83"; cxt.fillRect(x,y,1,1);}	// 9
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#89975B"; cxt.fillRect(x,y,1,1);}	// 12
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#7A9651"; cxt.fillRect(x,y,1,1);}	// 13
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#6A9446"; cxt.fillRect(x,y,1,1);}	// 14
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// 16
				else if (mapArrayDev[x][y] == "l")		{cxt.fillStyle="#2D8D1E"; cxt.fillRect(x,y,1,1);}	// 18
				else if (mapArrayDev[x][y] == "m")		{cxt.fillStyle="#0E8A09"; cxt.fillRect(x,y,1,1);}	// 20
				else if (mapArrayDev[x][y] == "n")		{cxt.fillStyle="#008800"; cxt.fillRect(x,y,1,1);}	// 21
				else if (mapArrayDev[x][y] == "o")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "p")		{cxt.fillStyle="#007E00"; cxt.fillRect(x,y,1,1);}	// 24
				else if (mapArrayDev[x][y] == "q")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// 26
				else if (mapArrayDev[x][y] == "r")		{cxt.fillStyle="#007000"; cxt.fillRect(x,y,1,1);}	// 28
				else if (mapArrayDev[x][y] == "s")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 20)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#B7B792"; cxt.fillRect(x,y,1,1);}	// 8
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#ADAD83"; cxt.fillRect(x,y,1,1);}	// 9
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#89975B"; cxt.fillRect(x,y,1,1);}	// 12
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#7A9651"; cxt.fillRect(x,y,1,1);}	// 13
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#6A9446"; cxt.fillRect(x,y,1,1);}	// 14
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#5A923C"; cxt.fillRect(x,y,1,1);}	// 15
				else if (mapArrayDev[x][y] == "l")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// 16
				else if (mapArrayDev[x][y] == "m")		{cxt.fillStyle="#2D8D1E"; cxt.fillRect(x,y,1,1);}	// 18
				else if (mapArrayDev[x][y] == "n")		{cxt.fillStyle="#0E8A09"; cxt.fillRect(x,y,1,1);}	// 20
				else if (mapArrayDev[x][y] == "o")		{cxt.fillStyle="#008800"; cxt.fillRect(x,y,1,1);}	// 21
				else if (mapArrayDev[x][y] == "p")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "q")		{cxt.fillStyle="#007E00"; cxt.fillRect(x,y,1,1);}	// 24
				else if (mapArrayDev[x][y] == "r")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// 26
				else if (mapArrayDev[x][y] == "s")		{cxt.fillStyle="#007000"; cxt.fillRect(x,y,1,1);}	// 28
				else if (mapArrayDev[x][y] == "t")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 21)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#B7B792"; cxt.fillRect(x,y,1,1);}	// 8
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#ADAD83"; cxt.fillRect(x,y,1,1);}	// 9
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#89975B"; cxt.fillRect(x,y,1,1);}	// 12
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#7A9651"; cxt.fillRect(x,y,1,1);}	// 13
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#6A9446"; cxt.fillRect(x,y,1,1);}	// 14
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#5A923C"; cxt.fillRect(x,y,1,1);}	// 15
				else if (mapArrayDev[x][y] == "l")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// 16
				else if (mapArrayDev[x][y] == "m")		{cxt.fillStyle="#2D8D1E"; cxt.fillRect(x,y,1,1);}	// 18
				else if (mapArrayDev[x][y] == "n")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// 19
				else if (mapArrayDev[x][y] == "o")		{cxt.fillStyle="#0E8A09"; cxt.fillRect(x,y,1,1);}	// 20
				else if (mapArrayDev[x][y] == "p")		{cxt.fillStyle="#008800"; cxt.fillRect(x,y,1,1);}	// 21
				else if (mapArrayDev[x][y] == "q")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "r")		{cxt.fillStyle="#007E00"; cxt.fillRect(x,y,1,1);}	// 24
				else if (mapArrayDev[x][y] == "s")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// 26
				else if (mapArrayDev[x][y] == "t")		{cxt.fillStyle="#007000"; cxt.fillRect(x,y,1,1);}	// 28
				else if (mapArrayDev[x][y] == "u")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 22)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#CCCCB2"; cxt.fillRect(x,y,1,1);}	// 6
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#B7B792"; cxt.fillRect(x,y,1,1);}	// 8
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#ADAD83"; cxt.fillRect(x,y,1,1);}	// 9
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#89975B"; cxt.fillRect(x,y,1,1);}	// 12
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#7A9651"; cxt.fillRect(x,y,1,1);}	// 13
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#6A9446"; cxt.fillRect(x,y,1,1);}	// 14
				else if (mapArrayDev[x][y] == "l")		{cxt.fillStyle="#5A923C"; cxt.fillRect(x,y,1,1);}	// 15
				else if (mapArrayDev[x][y] == "m")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// 16
				else if (mapArrayDev[x][y] == "n")		{cxt.fillStyle="#2D8D1E"; cxt.fillRect(x,y,1,1);}	// 18
				else if (mapArrayDev[x][y] == "o")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// 19
				else if (mapArrayDev[x][y] == "p")		{cxt.fillStyle="#0E8A09"; cxt.fillRect(x,y,1,1);}	// 20
				else if (mapArrayDev[x][y] == "q")		{cxt.fillStyle="#008800"; cxt.fillRect(x,y,1,1);}	// 21
				else if (mapArrayDev[x][y] == "r")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "s")		{cxt.fillStyle="#007E00"; cxt.fillRect(x,y,1,1);}	// 24
				else if (mapArrayDev[x][y] == "t")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// 26
				else if (mapArrayDev[x][y] == "u")		{cxt.fillStyle="#007000"; cxt.fillRect(x,y,1,1);}	// 28
				else if (mapArrayDev[x][y] == "v")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 23)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#CCCCB2"; cxt.fillRect(x,y,1,1);}	// 6
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#B7B792"; cxt.fillRect(x,y,1,1);}	// 8
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#ADAD83"; cxt.fillRect(x,y,1,1);}	// 9
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#89975B"; cxt.fillRect(x,y,1,1);}	// 12
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#7A9651"; cxt.fillRect(x,y,1,1);}	// 13
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#6A9446"; cxt.fillRect(x,y,1,1);}	// 14
				else if (mapArrayDev[x][y] == "l")		{cxt.fillStyle="#5A923C"; cxt.fillRect(x,y,1,1);}	// 15
				else if (mapArrayDev[x][y] == "m")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// 16
				else if (mapArrayDev[x][y] == "n")		{cxt.fillStyle="#2D8D1E"; cxt.fillRect(x,y,1,1);}	// 18
				else if (mapArrayDev[x][y] == "o")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// 19
				else if (mapArrayDev[x][y] == "p")		{cxt.fillStyle="#0E8A09"; cxt.fillRect(x,y,1,1);}	// 20
				else if (mapArrayDev[x][y] == "q")		{cxt.fillStyle="#008800"; cxt.fillRect(x,y,1,1);}	// 21
				else if (mapArrayDev[x][y] == "r")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "s")		{cxt.fillStyle="#007E00"; cxt.fillRect(x,y,1,1);}	// 24
				else if (mapArrayDev[x][y] == "t")		{cxt.fillStyle="#007A00"; cxt.fillRect(x,y,1,1);}	// 25
				else if (mapArrayDev[x][y] == "u")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// 26
				else if (mapArrayDev[x][y] == "v")		{cxt.fillStyle="#007000"; cxt.fillRect(x,y,1,1);}	// 28
				else if (mapArrayDev[x][y] == "w")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 24)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#CCCCB2"; cxt.fillRect(x,y,1,1);}	// 6
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#B7B792"; cxt.fillRect(x,y,1,1);}	// 8
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#ADAD83"; cxt.fillRect(x,y,1,1);}	// 9
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#89975B"; cxt.fillRect(x,y,1,1);}	// 12
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#7A9651"; cxt.fillRect(x,y,1,1);}	// 13
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#6A9446"; cxt.fillRect(x,y,1,1);}	// 14
				else if (mapArrayDev[x][y] == "l")		{cxt.fillStyle="#5A923C"; cxt.fillRect(x,y,1,1);}	// 15
				else if (mapArrayDev[x][y] == "m")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// 16
				else if (mapArrayDev[x][y] == "n")		{cxt.fillStyle="#2D8D1E"; cxt.fillRect(x,y,1,1);}	// 18
				else if (mapArrayDev[x][y] == "o")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// 19
				else if (mapArrayDev[x][y] == "p")		{cxt.fillStyle="#0E8A09"; cxt.fillRect(x,y,1,1);}	// 20
				else if (mapArrayDev[x][y] == "q")		{cxt.fillStyle="#008800"; cxt.fillRect(x,y,1,1);}	// 21
				else if (mapArrayDev[x][y] == "r")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "s")		{cxt.fillStyle="#007E00"; cxt.fillRect(x,y,1,1);}	// 24
				else if (mapArrayDev[x][y] == "t")		{cxt.fillStyle="#007A00"; cxt.fillRect(x,y,1,1);}	// 25
				else if (mapArrayDev[x][y] == "u")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// 26
				else if (mapArrayDev[x][y] == "v")		{cxt.fillStyle="#007300"; cxt.fillRect(x,y,1,1);}	// 27
				else if (mapArrayDev[x][y] == "w")		{cxt.fillStyle="#007000"; cxt.fillRect(x,y,1,1);}	// 28
				else if (mapArrayDev[x][y] == "x")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 25)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// 4
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#CCCCB2"; cxt.fillRect(x,y,1,1);}	// 6
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#B7B792"; cxt.fillRect(x,y,1,1);}	// 8
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#ADAD83"; cxt.fillRect(x,y,1,1);}	// 9
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#89975B"; cxt.fillRect(x,y,1,1);}	// 12
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#7A9651"; cxt.fillRect(x,y,1,1);}	// 13
				else if (mapArrayDev[x][y] == "l")		{cxt.fillStyle="#6A9446"; cxt.fillRect(x,y,1,1);}	// 14
				else if (mapArrayDev[x][y] == "m")		{cxt.fillStyle="#5A923C"; cxt.fillRect(x,y,1,1);}	// 15
				else if (mapArrayDev[x][y] == "n")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// 16
				else if (mapArrayDev[x][y] == "o")		{cxt.fillStyle="#2D8D1E"; cxt.fillRect(x,y,1,1);}	// 18
				else if (mapArrayDev[x][y] == "p")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// 19
				else if (mapArrayDev[x][y] == "q")		{cxt.fillStyle="#0E8A09"; cxt.fillRect(x,y,1,1);}	// 20
				else if (mapArrayDev[x][y] == "r")		{cxt.fillStyle="#008800"; cxt.fillRect(x,y,1,1);}	// 21
				else if (mapArrayDev[x][y] == "s")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "t")		{cxt.fillStyle="#007E00"; cxt.fillRect(x,y,1,1);}	// 24
				else if (mapArrayDev[x][y] == "u")		{cxt.fillStyle="#007A00"; cxt.fillRect(x,y,1,1);}	// 25
				else if (mapArrayDev[x][y] == "v")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// 26
				else if (mapArrayDev[x][y] == "w")		{cxt.fillStyle="#007300"; cxt.fillRect(x,y,1,1);}	// 27
				else if (mapArrayDev[x][y] == "x")		{cxt.fillStyle="#007000"; cxt.fillRect(x,y,1,1);}	// 28
				else if (mapArrayDev[x][y] == "y")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 26)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// 4
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#CCCCB2"; cxt.fillRect(x,y,1,1);}	// 6
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#B7B792"; cxt.fillRect(x,y,1,1);}	// 8
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#ADAD83"; cxt.fillRect(x,y,1,1);}	// 9
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#89975B"; cxt.fillRect(x,y,1,1);}	// 12
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#7A9651"; cxt.fillRect(x,y,1,1);}	// 13
				else if (mapArrayDev[x][y] == "l")		{cxt.fillStyle="#6A9446"; cxt.fillRect(x,y,1,1);}	// 14
				else if (mapArrayDev[x][y] == "m")		{cxt.fillStyle="#5A923C"; cxt.fillRect(x,y,1,1);}	// 15
				else if (mapArrayDev[x][y] == "n")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// 16
				else if (mapArrayDev[x][y] == "o")		{cxt.fillStyle="#2D8D1E"; cxt.fillRect(x,y,1,1);}	// 18
				else if (mapArrayDev[x][y] == "p")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// 19
				else if (mapArrayDev[x][y] == "q")		{cxt.fillStyle="#0E8A09"; cxt.fillRect(x,y,1,1);}	// 20
				else if (mapArrayDev[x][y] == "r")		{cxt.fillStyle="#008800"; cxt.fillRect(x,y,1,1);}	// 21
				else if (mapArrayDev[x][y] == "s")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "t")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// 23
				else if (mapArrayDev[x][y] == "u")		{cxt.fillStyle="#007E00"; cxt.fillRect(x,y,1,1);}	// 24
				else if (mapArrayDev[x][y] == "v")		{cxt.fillStyle="#007A00"; cxt.fillRect(x,y,1,1);}	// 25
				else if (mapArrayDev[x][y] == "w")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// 26
				else if (mapArrayDev[x][y] == "x")		{cxt.fillStyle="#007300"; cxt.fillRect(x,y,1,1);}	// 27
				else if (mapArrayDev[x][y] == "y")		{cxt.fillStyle="#007000"; cxt.fillRect(x,y,1,1);}	// 28
				else if (mapArrayDev[x][y] == "z")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 27)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// 4
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#CCCCB2"; cxt.fillRect(x,y,1,1);}	// 6
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#B7B792"; cxt.fillRect(x,y,1,1);}	// 8
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#ADAD83"; cxt.fillRect(x,y,1,1);}	// 9
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#989965"; cxt.fillRect(x,y,1,1);}	// 11
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#89975B"; cxt.fillRect(x,y,1,1);}	// 12
				else if (mapArrayDev[x][y] == "l")		{cxt.fillStyle="#7A9651"; cxt.fillRect(x,y,1,1);}	// 13
				else if (mapArrayDev[x][y] == "m")		{cxt.fillStyle="#6A9446"; cxt.fillRect(x,y,1,1);}	// 14
				else if (mapArrayDev[x][y] == "n")		{cxt.fillStyle="#5A923C"; cxt.fillRect(x,y,1,1);}	// 15
				else if (mapArrayDev[x][y] == "o")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// 16
				else if (mapArrayDev[x][y] == "p")		{cxt.fillStyle="#2D8D1E"; cxt.fillRect(x,y,1,1);}	// 18
				else if (mapArrayDev[x][y] == "q")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// 19
				else if (mapArrayDev[x][y] == "r")		{cxt.fillStyle="#0E8A09"; cxt.fillRect(x,y,1,1);}	// 20
				else if (mapArrayDev[x][y] == "s")		{cxt.fillStyle="#008800"; cxt.fillRect(x,y,1,1);}	// 21
				else if (mapArrayDev[x][y] == "t")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "u")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// 23
				else if (mapArrayDev[x][y] == "v")		{cxt.fillStyle="#007E00"; cxt.fillRect(x,y,1,1);}	// 24
				else if (mapArrayDev[x][y] == "w")		{cxt.fillStyle="#007A00"; cxt.fillRect(x,y,1,1);}	// 25
				else if (mapArrayDev[x][y] == "x")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// 26
				else if (mapArrayDev[x][y] == "y")		{cxt.fillStyle="#007300"; cxt.fillRect(x,y,1,1);}	// 27
				else if (mapArrayDev[x][y] == "z")		{cxt.fillStyle="#007000"; cxt.fillRect(x,y,1,1);}	// 28
				else if (mapArrayDev[x][y] == "$")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 28)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// 4
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#CCCCB2"; cxt.fillRect(x,y,1,1);}	// 6
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#B7B792"; cxt.fillRect(x,y,1,1);}	// 8
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#ADAD83"; cxt.fillRect(x,y,1,1);}	// 9
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#989965"; cxt.fillRect(x,y,1,1);}	// 11
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#89975B"; cxt.fillRect(x,y,1,1);}	// 12
				else if (mapArrayDev[x][y] == "l")		{cxt.fillStyle="#7A9651"; cxt.fillRect(x,y,1,1);}	// 13
				else if (mapArrayDev[x][y] == "m")		{cxt.fillStyle="#6A9446"; cxt.fillRect(x,y,1,1);}	// 14
				else if (mapArrayDev[x][y] == "n")		{cxt.fillStyle="#5A923C"; cxt.fillRect(x,y,1,1);}	// 15
				else if (mapArrayDev[x][y] == "o")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// 16
				else if (mapArrayDev[x][y] == "p")		{cxt.fillStyle="#3C8F28"; cxt.fillRect(x,y,1,1);}	// 17
				else if (mapArrayDev[x][y] == "q")		{cxt.fillStyle="#2D8D1E"; cxt.fillRect(x,y,1,1);}	// 18
				else if (mapArrayDev[x][y] == "r")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// 19
				else if (mapArrayDev[x][y] == "s")		{cxt.fillStyle="#0E8A09"; cxt.fillRect(x,y,1,1);}	// 20
				else if (mapArrayDev[x][y] == "t")		{cxt.fillStyle="#008800"; cxt.fillRect(x,y,1,1);}	// 21
				else if (mapArrayDev[x][y] == "u")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "v")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// 23
				else if (mapArrayDev[x][y] == "w")		{cxt.fillStyle="#007E00"; cxt.fillRect(x,y,1,1);}	// 24
				else if (mapArrayDev[x][y] == "x")		{cxt.fillStyle="#007A00"; cxt.fillRect(x,y,1,1);}	// 25
				else if (mapArrayDev[x][y] == "y")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// 26
				else if (mapArrayDev[x][y] == "z")		{cxt.fillStyle="#007300"; cxt.fillRect(x,y,1,1);}	// 27
				else if (mapArrayDev[x][y] == "$")		{cxt.fillStyle="#007000"; cxt.fillRect(x,y,1,1);}	// 28
				else if (mapArrayDev[x][y] == "^")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 29)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// 4
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#CCCCB2"; cxt.fillRect(x,y,1,1);}	// 6
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#B7B792"; cxt.fillRect(x,y,1,1);}	// 8
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#ADAD83"; cxt.fillRect(x,y,1,1);}	// 9
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#989965"; cxt.fillRect(x,y,1,1);}	// 11
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#89975B"; cxt.fillRect(x,y,1,1);}	// 12
				else if (mapArrayDev[x][y] == "l")		{cxt.fillStyle="#7A9651"; cxt.fillRect(x,y,1,1);}	// 13
				else if (mapArrayDev[x][y] == "m")		{cxt.fillStyle="#6A9446"; cxt.fillRect(x,y,1,1);}	// 14
				else if (mapArrayDev[x][y] == "n")		{cxt.fillStyle="#5A923C"; cxt.fillRect(x,y,1,1);}	// 15
				else if (mapArrayDev[x][y] == "o")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// 16
				else if (mapArrayDev[x][y] == "p")		{cxt.fillStyle="#3C8F28"; cxt.fillRect(x,y,1,1);}	// 17
				else if (mapArrayDev[x][y] == "q")		{cxt.fillStyle="#2D8D1E"; cxt.fillRect(x,y,1,1);}	// 18
				else if (mapArrayDev[x][y] == "r")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// 19
				else if (mapArrayDev[x][y] == "s")		{cxt.fillStyle="#0E8A09"; cxt.fillRect(x,y,1,1);}	// 20
				else if (mapArrayDev[x][y] == "t")		{cxt.fillStyle="#008800"; cxt.fillRect(x,y,1,1);}	// 21
				else if (mapArrayDev[x][y] == "u")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "v")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// 23
				else if (mapArrayDev[x][y] == "w")		{cxt.fillStyle="#007E00"; cxt.fillRect(x,y,1,1);}	// 24
				else if (mapArrayDev[x][y] == "x")		{cxt.fillStyle="#007A00"; cxt.fillRect(x,y,1,1);}	// 25
				else if (mapArrayDev[x][y] == "y")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// 26
				else if (mapArrayDev[x][y] == "z")		{cxt.fillStyle="#007300"; cxt.fillRect(x,y,1,1);}	// 27
				else if (mapArrayDev[x][y] == "$")		{cxt.fillStyle="#007000"; cxt.fillRect(x,y,1,1);}	// 28
				else if (mapArrayDev[x][y] == "^")		{cxt.fillStyle="#006D00"; cxt.fillRect(x,y,1,1);}	// 29
				else if (mapArrayDev[x][y] == "^")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
			else if (waterLevel == 30 || waterLevel == 31)
			{
				if      (mapArrayDev[x][y] == "a")		{cxt.fillStyle="#FFFFFF"; cxt.fillRect(x,y,1,1);}	// 1
				else if (mapArrayDev[x][y] == "b")		{cxt.fillStyle="#F4F4EE"; cxt.fillRect(x,y,1,1);}	// 2
				else if (mapArrayDev[x][y] == "c")		{cxt.fillStyle="#EAEADF"; cxt.fillRect(x,y,1,1);}	// 3
				else if (mapArrayDev[x][y] == "d")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// 4
				else if (mapArrayDev[x][y] == "e")		{cxt.fillStyle="#D6D6C1"; cxt.fillRect(x,y,1,1);}	// 5
				else if (mapArrayDev[x][y] == "f")		{cxt.fillStyle="#CCCCB2"; cxt.fillRect(x,y,1,1);}	// 6
				else if (mapArrayDev[x][y] == "g")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// 7
				else if (mapArrayDev[x][y] == "h")		{cxt.fillStyle="#B7B792"; cxt.fillRect(x,y,1,1);}	// 8
				else if (mapArrayDev[x][y] == "i")		{cxt.fillStyle="#ADAD83"; cxt.fillRect(x,y,1,1);}	// 9
				else if (mapArrayDev[x][y] == "j")		{cxt.fillStyle="#A2A274"; cxt.fillRect(x,y,1,1);}	// 10
				else if (mapArrayDev[x][y] == "k")		{cxt.fillStyle="#989965"; cxt.fillRect(x,y,1,1);}	// 11
				else if (mapArrayDev[x][y] == "l")		{cxt.fillStyle="#89975B"; cxt.fillRect(x,y,1,1);}	// 12
				else if (mapArrayDev[x][y] == "m")		{cxt.fillStyle="#7A9651"; cxt.fillRect(x,y,1,1);}	// 13
				else if (mapArrayDev[x][y] == "n")		{cxt.fillStyle="#6A9446"; cxt.fillRect(x,y,1,1);}	// 14
				else if (mapArrayDev[x][y] == "o")		{cxt.fillStyle="#5A923C"; cxt.fillRect(x,y,1,1);}	// 15
				else if (mapArrayDev[x][y] == "p")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// 16
				else if (mapArrayDev[x][y] == "q")		{cxt.fillStyle="#3C8F28"; cxt.fillRect(x,y,1,1);}	// 17
				else if (mapArrayDev[x][y] == "r")		{cxt.fillStyle="#2D8D1E"; cxt.fillRect(x,y,1,1);}	// 18
				else if (mapArrayDev[x][y] == "s")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// 19
				else if (mapArrayDev[x][y] == "t")		{cxt.fillStyle="#0E8A09"; cxt.fillRect(x,y,1,1);}	// 20
				else if (mapArrayDev[x][y] == "u")		{cxt.fillStyle="#008800"; cxt.fillRect(x,y,1,1);}	// 21
				else if (mapArrayDev[x][y] == "v")		{cxt.fillStyle="#008500"; cxt.fillRect(x,y,1,1);}	// 22
				else if (mapArrayDev[x][y] == "w")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// 23
				else if (mapArrayDev[x][y] == "x")		{cxt.fillStyle="#007E00"; cxt.fillRect(x,y,1,1);}	// 24
				else if (mapArrayDev[x][y] == "y")		{cxt.fillStyle="#007A00"; cxt.fillRect(x,y,1,1);}	// 25
				else if (mapArrayDev[x][y] == "z")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// 26
				else if (mapArrayDev[x][y] == "$")		{cxt.fillStyle="#007300"; cxt.fillRect(x,y,1,1);}	// 27
				else if (mapArrayDev[x][y] == "^")		{cxt.fillStyle="#007000"; cxt.fillRect(x,y,1,1);}	// 28
				else if (mapArrayDev[x][y] == "&")		{cxt.fillStyle="#006D00"; cxt.fillRect(x,y,1,1);}	// 29
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// 30
				else if (mapArrayDev[x][y] == "Q")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "H")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "M")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "T")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "X")		{cxt.fillStyle="#0033ff"; cxt.fillRect(x,y,1,1);}	// deep water
				else if (mapArrayDev[x][y] == "~")		{cxt.fillStyle="#ffcc66"; cxt.fillRect(x,y,1,1);}	// sand
				else if (mapArrayDev[x][y] == "R")		{cxt.fillStyle="#0099ff"; cxt.fillRect(x,y,1,1);}	// shallow water
				else if (mapArrayDev[x][y] == "*")		{cxt.fillStyle="#ffa500"; cxt.fillRect(x,y,1,1);}	// lava
				else if (mapArrayDev[x][y] == "-")		{cxt.fillStyle="#61300d"; cxt.fillRect(x,y,1,1);}	// burned land
				else if (mapArrayDev[x][y] == ")")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills scrub
				else if (mapArrayDev[x][y] == "+")		{cxt.fillStyle="#1D8B13"; cxt.fillRect(x,y,1,1);}	// trees polar
				else if (mapArrayDev[x][y] == "=")		{cxt.fillStyle="#008100"; cxt.fillRect(x,y,1,1);}	// scrub polar
				else if (mapArrayDev[x][y] == "{")		{cxt.fillStyle="#007700"; cxt.fillRect(x,y,1,1);}	// tundra long
				else if (mapArrayDev[x][y] == "}")		{cxt.fillStyle="#006900"; cxt.fillRect(x,y,1,1);}	// tundra
				else if (mapArrayDev[x][y] == "?")		{cxt.fillStyle="#E0E0D0"; cxt.fillRect(x,y,1,1);}	// low mountains lush
				else if (mapArrayDev[x][y] == "!")		{cxt.fillStyle="#C1C1A1"; cxt.fillRect(x,y,1,1);}	// hills lush
				else if (mapArrayDev[x][y] == "@")		{cxt.fillStyle="#4B9032"; cxt.fillRect(x,y,1,1);}	// rainforest
				else if (mapArrayDev[x][y] == "#")		{cxt.fillStyle="#E5E5E5"; cxt.fillRect(x,y,1,1);}	// ice
				else if (mapArrayDev[x][y] == "(")		{cxt.fillStyle="#80DA80"; cxt.fillRect(x,y,1,1);}	// boreal polar
			}
		}
	}

	if (worldMapDisplayOn==1 && redSquareOn==1)
	{
		cxt.fillStyle="#FF0000"; cxt.fillRect(editorX,editorY,41,2);
		cxt.fillStyle="#FF0000"; cxt.fillRect(editorX,editorY,2,41);
		cxt.fillStyle="#FF00FF"; cxt.fillRect((editorX+41),editorY,2,43);
		cxt.fillStyle="#FF0000"; cxt.fillRect(editorX,(editorY+41),43,2);
	}

	var dataURL = canvasThing.toDataURL();
	document.getElementById('canvasImageConstructor').src = dataURL;
	document.getElementById('canvasImageClimateBuilder').src = dataURL;
	document.getElementById('canvasImageWorldMapDisplay').src = dataURL;

	getTime();

	if (divClimateBuilderOn==0)
	{
		stage2Error.value += "\n" + timeText + " - [World drawn.]";
//		stage2Error.value += "\n" + timeText + " - waterLevel: "+waterLevel;
//		stage2Error.value += "\n" + timeText + " - Land: "+(waterLevel-1)+" levels";
		stage2Error.scrollTop = stage2Error.scrollHeight;
	}
	else
	{
		climateBuilderError.value += "\n" + timeText + " - [World drawn.]";
		climateBuilderError.value += "\nstage2Left:" + stage2Left;
		climateBuilderError.value += "\nwaterLevel:" + waterLevel;
		climateBuilderError.value += "\nplotCount:" + plotCount;
		climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
	}
}

function setWaterLevel()
{
	waterLevel = Math.round(waterLevel / 2);

	for (y=1;y<=mapSizeY;y++)
	{
		for (x=1;x<=mapSizeX;x++)
		{
			if (waterLevel == 1)
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 2 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 3 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 4 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 5 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 6 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 7 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 8 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 9 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 10 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 11 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 12 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 13 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k" &&
				mapArrayDev[x][y] != "l")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 14 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k" &&
				mapArrayDev[x][y] != "l" &&
				mapArrayDev[x][y] != "m")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 15 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k" &&
				mapArrayDev[x][y] != "l" &&
				mapArrayDev[x][y] != "m" &&
				mapArrayDev[x][y] != "n")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 16 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k" &&
				mapArrayDev[x][y] != "l" &&
				mapArrayDev[x][y] != "m" &&
				mapArrayDev[x][y] != "n" &&
				mapArrayDev[x][y] != "o")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 17 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k" &&
				mapArrayDev[x][y] != "l" &&
				mapArrayDev[x][y] != "m" &&
				mapArrayDev[x][y] != "n" &&
				mapArrayDev[x][y] != "o" &&
				mapArrayDev[x][y] != "p")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 18 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k" &&
				mapArrayDev[x][y] != "l" &&
				mapArrayDev[x][y] != "m" &&
				mapArrayDev[x][y] != "n" &&
				mapArrayDev[x][y] != "o" &&
				mapArrayDev[x][y] != "p" &&
				mapArrayDev[x][y] != "q")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 19 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k" &&
				mapArrayDev[x][y] != "l" &&
				mapArrayDev[x][y] != "m" &&
				mapArrayDev[x][y] != "n" &&
				mapArrayDev[x][y] != "o" &&
				mapArrayDev[x][y] != "p" &&
				mapArrayDev[x][y] != "q" &&
				mapArrayDev[x][y] != "r")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 20 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k" &&
				mapArrayDev[x][y] != "l" &&
				mapArrayDev[x][y] != "m" &&
				mapArrayDev[x][y] != "n" &&
				mapArrayDev[x][y] != "o" &&
				mapArrayDev[x][y] != "p" &&
				mapArrayDev[x][y] != "q" &&
				mapArrayDev[x][y] != "r" &&
				mapArrayDev[x][y] != "s")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 21 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k" &&
				mapArrayDev[x][y] != "l" &&
				mapArrayDev[x][y] != "m" &&
				mapArrayDev[x][y] != "n" &&
				mapArrayDev[x][y] != "o" &&
				mapArrayDev[x][y] != "p" &&
				mapArrayDev[x][y] != "q" &&
				mapArrayDev[x][y] != "r" &&
				mapArrayDev[x][y] != "s" &&
				mapArrayDev[x][y] != "t")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 22 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k" &&
				mapArrayDev[x][y] != "l" &&
				mapArrayDev[x][y] != "m" &&
				mapArrayDev[x][y] != "n" &&
				mapArrayDev[x][y] != "o" &&
				mapArrayDev[x][y] != "p" &&
				mapArrayDev[x][y] != "q" &&
				mapArrayDev[x][y] != "r" &&
				mapArrayDev[x][y] != "s" &&
				mapArrayDev[x][y] != "t" &&
				mapArrayDev[x][y] != "u")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 23 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k" &&
				mapArrayDev[x][y] != "l" &&
				mapArrayDev[x][y] != "m" &&
				mapArrayDev[x][y] != "n" &&
				mapArrayDev[x][y] != "o" &&
				mapArrayDev[x][y] != "p" &&
				mapArrayDev[x][y] != "q" &&
				mapArrayDev[x][y] != "r" &&
				mapArrayDev[x][y] != "s" &&
				mapArrayDev[x][y] != "t" &&
				mapArrayDev[x][y] != "u" &&
				mapArrayDev[x][y] != "v")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 24 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k" &&
				mapArrayDev[x][y] != "l" &&
				mapArrayDev[x][y] != "m" &&
				mapArrayDev[x][y] != "n" &&
				mapArrayDev[x][y] != "o" &&
				mapArrayDev[x][y] != "p" &&
				mapArrayDev[x][y] != "q" &&
				mapArrayDev[x][y] != "r" &&
				mapArrayDev[x][y] != "s" &&
				mapArrayDev[x][y] != "t" &&
				mapArrayDev[x][y] != "u" &&
				mapArrayDev[x][y] != "v" &&
				mapArrayDev[x][y] != "w")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 25 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k" &&
				mapArrayDev[x][y] != "l" &&
				mapArrayDev[x][y] != "m" &&
				mapArrayDev[x][y] != "n" &&
				mapArrayDev[x][y] != "o" &&
				mapArrayDev[x][y] != "p" &&
				mapArrayDev[x][y] != "q" &&
				mapArrayDev[x][y] != "r" &&
				mapArrayDev[x][y] != "s" &&
				mapArrayDev[x][y] != "t" &&
				mapArrayDev[x][y] != "u" &&
				mapArrayDev[x][y] != "v" &&
				mapArrayDev[x][y] != "w" &&
				mapArrayDev[x][y] != "x")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 26 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k" &&
				mapArrayDev[x][y] != "l" &&
				mapArrayDev[x][y] != "m" &&
				mapArrayDev[x][y] != "n" &&
				mapArrayDev[x][y] != "o" &&
				mapArrayDev[x][y] != "p" &&
				mapArrayDev[x][y] != "q" &&
				mapArrayDev[x][y] != "r" &&
				mapArrayDev[x][y] != "s" &&
				mapArrayDev[x][y] != "t" &&
				mapArrayDev[x][y] != "u" &&
				mapArrayDev[x][y] != "v" &&
				mapArrayDev[x][y] != "w" &&
				mapArrayDev[x][y] != "x" &&
				mapArrayDev[x][y] != "y")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 27 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k" &&
				mapArrayDev[x][y] != "l" &&
				mapArrayDev[x][y] != "m" &&
				mapArrayDev[x][y] != "n" &&
				mapArrayDev[x][y] != "o" &&
				mapArrayDev[x][y] != "p" &&
				mapArrayDev[x][y] != "q" &&
				mapArrayDev[x][y] != "r" &&
				mapArrayDev[x][y] != "s" &&
				mapArrayDev[x][y] != "t" &&
				mapArrayDev[x][y] != "u" &&
				mapArrayDev[x][y] != "v" &&
				mapArrayDev[x][y] != "w" &&
				mapArrayDev[x][y] != "x" &&
				mapArrayDev[x][y] != "y" &&
				mapArrayDev[x][y] != "z")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 28 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k" &&
				mapArrayDev[x][y] != "l" &&
				mapArrayDev[x][y] != "m" &&
				mapArrayDev[x][y] != "n" &&
				mapArrayDev[x][y] != "o" &&
				mapArrayDev[x][y] != "p" &&
				mapArrayDev[x][y] != "q" &&
				mapArrayDev[x][y] != "r" &&
				mapArrayDev[x][y] != "s" &&
				mapArrayDev[x][y] != "t" &&
				mapArrayDev[x][y] != "u" &&
				mapArrayDev[x][y] != "v" &&
				mapArrayDev[x][y] != "w" &&
				mapArrayDev[x][y] != "x" &&
				mapArrayDev[x][y] != "y" &&
				mapArrayDev[x][y] != "z" &&
				mapArrayDev[x][y] != "$")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 29 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k" &&
				mapArrayDev[x][y] != "l" &&
				mapArrayDev[x][y] != "m" &&
				mapArrayDev[x][y] != "n" &&
				mapArrayDev[x][y] != "o" &&
				mapArrayDev[x][y] != "p" &&
				mapArrayDev[x][y] != "q" &&
				mapArrayDev[x][y] != "r" &&
				mapArrayDev[x][y] != "s" &&
				mapArrayDev[x][y] != "t" &&
				mapArrayDev[x][y] != "u" &&
				mapArrayDev[x][y] != "v" &&
				mapArrayDev[x][y] != "w" &&
				mapArrayDev[x][y] != "x" &&
				mapArrayDev[x][y] != "y" &&
				mapArrayDev[x][y] != "z" &&
				mapArrayDev[x][y] != "$" &&
				mapArrayDev[x][y] != "^")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 30 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k" &&
				mapArrayDev[x][y] != "l" &&
				mapArrayDev[x][y] != "m" &&
				mapArrayDev[x][y] != "n" &&
				mapArrayDev[x][y] != "o" &&
				mapArrayDev[x][y] != "p" &&
				mapArrayDev[x][y] != "q" &&
				mapArrayDev[x][y] != "r" &&
				mapArrayDev[x][y] != "s" &&
				mapArrayDev[x][y] != "t" &&
				mapArrayDev[x][y] != "u" &&
				mapArrayDev[x][y] != "v" &&
				mapArrayDev[x][y] != "w" &&
				mapArrayDev[x][y] != "x" &&
				mapArrayDev[x][y] != "y" &&
				mapArrayDev[x][y] != "z" &&
				mapArrayDev[x][y] != "$" &&
				mapArrayDev[x][y] != "^" &&
				mapArrayDev[x][y] != "(")
			{
				mapArrayDev[x][y] = "X";
			}
			else if (waterLevel == 31 &&
				mapArrayDev[x][y] != "*" &&
				mapArrayDev[x][y] != "-" &&
				mapArrayDev[x][y] != "a" &&
				mapArrayDev[x][y] != "b" &&
				mapArrayDev[x][y] != "c" &&
				mapArrayDev[x][y] != "d" &&
				mapArrayDev[x][y] != "e" &&
				mapArrayDev[x][y] != "f" &&
				mapArrayDev[x][y] != "g" &&
				mapArrayDev[x][y] != "h" &&
				mapArrayDev[x][y] != "i" &&
				mapArrayDev[x][y] != "j" &&
				mapArrayDev[x][y] != "k" &&
				mapArrayDev[x][y] != "l" &&
				mapArrayDev[x][y] != "m" &&
				mapArrayDev[x][y] != "n" &&
				mapArrayDev[x][y] != "o" &&
				mapArrayDev[x][y] != "p" &&
				mapArrayDev[x][y] != "q" &&
				mapArrayDev[x][y] != "r" &&
				mapArrayDev[x][y] != "s" &&
				mapArrayDev[x][y] != "t" &&
				mapArrayDev[x][y] != "u" &&
				mapArrayDev[x][y] != "v" &&
				mapArrayDev[x][y] != "w" &&
				mapArrayDev[x][y] != "x" &&
				mapArrayDev[x][y] != "y" &&
				mapArrayDev[x][y] != "z" &&
				mapArrayDev[x][y] != "$" &&
				mapArrayDev[x][y] != "^" &&
				mapArrayDev[x][y] != "&" &&
				mapArrayDev[x][y] != "(")
			{
				mapArrayDev[x][y] = "X";
			}
		}
	}

//	differentiateOceans();

	doSetWaterLevel = 2;
}

function determineWaterLevel()
{
//	stage2Error.value += "\nDetermining water level...";
//	stage2Error.scrollTop = stage2Error.scrollHeight;
	lowestLevel = 0;
	for (y=1;y<=mapSizeY;y++)
	{
		for (x=1;x<=mapSizeX;x++)
		{
			if		(mapArrayDev[x][y]=="a")		{currentLevel = 1;}
			else if (mapArrayDev[x][y]=="b")		{currentLevel = 2;}
			else if (mapArrayDev[x][y]=="c")		{currentLevel = 3;}
			else if (mapArrayDev[x][y]=="d")		{currentLevel = 4;}
			else if (mapArrayDev[x][y]=="e")		{currentLevel = 5;}
			else if (mapArrayDev[x][y]=="f")		{currentLevel = 6;}
			else if (mapArrayDev[x][y]=="g")		{currentLevel = 7;}
			else if (mapArrayDev[x][y]=="h")		{currentLevel = 8;}
			else if (mapArrayDev[x][y]=="i")		{currentLevel = 9;}
			else if (mapArrayDev[x][y]=="j")		{currentLevel = 10;}
			else if (mapArrayDev[x][y]=="k")		{currentLevel = 11;}
			else if (mapArrayDev[x][y]=="l")		{currentLevel = 12;}
			else if (mapArrayDev[x][y]=="m")		{currentLevel = 13;}
			else if (mapArrayDev[x][y]=="n")		{currentLevel = 14;}
			else if (mapArrayDev[x][y]=="o")		{currentLevel = 15;}
			else if (mapArrayDev[x][y]=="p")		{currentLevel = 16;}
			else if (mapArrayDev[x][y]=="q")		{currentLevel = 17;}
			else if (mapArrayDev[x][y]=="r")		{currentLevel = 18;}
			else if (mapArrayDev[x][y]=="s")		{currentLevel = 19;}
			else if (mapArrayDev[x][y]=="t")		{currentLevel = 20;}
			else if (mapArrayDev[x][y]=="u")		{currentLevel = 21;}
			else if (mapArrayDev[x][y]=="v")		{currentLevel = 22;}
			else if (mapArrayDev[x][y]=="w")		{currentLevel = 23;}
			else if (mapArrayDev[x][y]=="x")		{currentLevel = 24;}
			else if (mapArrayDev[x][y]=="y")		{currentLevel = 25;}
			else if (mapArrayDev[x][y]=="z")		{currentLevel = 26;}
			else if (mapArrayDev[x][y]=="$")		{currentLevel = 27;}
			else if (mapArrayDev[x][y]=="^")		{currentLevel = 28;}
			else if (mapArrayDev[x][y]=="&")		{currentLevel = 29;}
			else if (mapArrayDev[x][y]=="(")		{currentLevel = 30;}
//			else if (mapArrayDev[x][y]=="X")		{currentLevel = 31;}

			if (currentLevel > lowestLevel)
			{
				lowestLevel = currentLevel;
			}
		}
	}
	waterLevel = (lowestLevel + 1);
	doDetermineWaterLevel = 2;
/*
	x = 1;
	y = 1;
	while (landHo==0)
	{
		if (mapArrayDev[x][y] != "X")
		{
			landHo = 1;
		}
		else
		{
			x++;
			if (x > mapSizeX)
			{
				x = 1;
				y++;
			}
			if (y > mapSizeY)
			{
				landHo = 1;
				waterLevel = 30;
			}
		}
	}
	if		(mapArrayDev[x][y]=="a")		{waterLevel = 1;}
	else if (mapArrayDev[x][y]=="b")		{waterLevel = 2;}
	else if (mapArrayDev[x][y]=="c")		{waterLevel = 3;}
	else if (mapArrayDev[x][y]=="d")		{waterLevel = 4;}
	else if (mapArrayDev[x][y]=="e")		{waterLevel = 5;}
	else if (mapArrayDev[x][y]=="f")		{waterLevel = 6;}
	else if (mapArrayDev[x][y]=="g")		{waterLevel = 7;}
	else if (mapArrayDev[x][y]=="h")		{waterLevel = 8;}
	else if (mapArrayDev[x][y]=="i")		{waterLevel = 9;}
	else if (mapArrayDev[x][y]=="j")		{waterLevel = 10;}
	else if (mapArrayDev[x][y]=="k")		{waterLevel = 11;}
	else if (mapArrayDev[x][y]=="l")		{waterLevel = 12;}
	else if (mapArrayDev[x][y]=="m")		{waterLevel = 13;}
	else if (mapArrayDev[x][y]=="n")		{waterLevel = 14;}
	else if (mapArrayDev[x][y]=="o")		{waterLevel = 15;}
	else if (mapArrayDev[x][y]=="p")		{waterLevel = 16;}
	else if (mapArrayDev[x][y]=="q")		{waterLevel = 17;}
	else if (mapArrayDev[x][y]=="r")		{waterLevel = 18;}
	else if (mapArrayDev[x][y]=="s")		{waterLevel = 19;}
	else if (mapArrayDev[x][y]=="t")		{waterLevel = 20;}
	else if (mapArrayDev[x][y]=="u")		{waterLevel = 21;}
	else if (mapArrayDev[x][y]=="v")		{waterLevel = 22;}
	else if (mapArrayDev[x][y]=="w")		{waterLevel = 23;}
	else if (mapArrayDev[x][y]=="x")		{waterLevel = 24;}
	else if (mapArrayDev[x][y]=="y")		{waterLevel = 25;}
	else if (mapArrayDev[x][y]=="z")		{waterLevel = 26;}
	else if (mapArrayDev[x][y]=="$")		{waterLevel = 27;}
	else if (mapArrayDev[x][y]=="^")		{waterLevel = 28;}
	else if (mapArrayDev[x][y]=="&")		{waterLevel = 29;}
	else if (mapArrayDev[x][y]=="(")		{waterLevel = 30;}
	else									{waterLevel = 30;}

//	stage2Error.value += "\nWater level: "+waterLevel;
//	stage2Error.scrollTop = stage2Error.scrollHeight;
*/
}

function seedMountainRanges()
{
	z = 1;
	for (r=1;r<=numMtnRanges;r++)
//	for (r=1;r<=1;r++)
	{
		halfRangeLength = Math.round(((maxMtnLength / 100) * mapSizeX) / 2);
		quarterRangeLength = Math.round(((maxMtnLength / 100) * mapSizeX) / 4);
		threeQuarterRangeLength = quarterRangeLength * 3;
		rangeLength = Math.round(Math.floor(Math.random() * halfRangeLength + 1) + halfRangeLength);

		// LOCATE MOUNTAIN RANGE SPAWN POINT

		rangeSpawnPointOkay = 0;

		while (rangeSpawnPointOkay == 0)
		{
			mountainTopX = Math.floor((Math.random()*mapSizeX)+1);
			mountainTopY = Math.floor((Math.random()*mapSizeY)+1);

			checkSeedLocation();

			if (goodSeedLocation==1)
			{
			//	constructorError.value += "\n" + mountainTopX + "," + mountainTopY + ": GOOD seed location: "+boxAddressArray[designatedBoxX][designatedBoxY];
				plotMountain();
				rangeSpawnPointOkay = 1;
			}
			else
			{
			//	constructorError.value += "\n" + mountainTopX + "," + mountainTopY + ": BAD seed location: "+boxAddressArray[designatedBoxX][designatedBoxY];
			}
		}

		goodSeedLocation = 0;

		// SET MOUNTAIN RANGE DIRECTION

		// PICK TWO RANDOM COORDINATES

		randomNumberA = Math.floor((Math.random()*500)+1);
		randomNumberB = Math.floor((Math.random()*500)+1);

		coordinateX = randomNumberA - 250;
		coordinateY = randomNumberB - 250;

		// left:	=50-X
		// right:	=50+X
		// up:		=50+Y
		// down:	=50-Y

		rangeLeftPct = (250 - coordinateX);
		rangeRightPct = (250 + coordinateX);
		rangeTopPct = (250 + coordinateY);
		rangeBottomPct = (250 - coordinateY);

//		rangeLeftPct = (250 - coordinateX) * 4;
//		rangeRightPct = (250 + coordinateX) * 4;
//		rangeTopPct = (250 + coordinateY) * 4;
//		rangeBottomPct = (250 - coordinateY) * 4;

		rangeTotalPct = (rangeTopPct + rangeBottomPct + rangeLeftPct + rangeRightPct);

		oldRangeDirection = "";

		for (rangeSteps=1;rangeSteps<=rangeLength;rangeSteps++)
		{
			directionApproved = 0;
			tries = 0;

			while (directionApproved==0 && tries <= 100)
			{
				goodSeedLocation = 0;

				//	STORE CURRENT MOUNTAINTOP X & Y COORDINATES

					tempMountainTopX = mountainTopX;
					tempMountainTopY = mountainTopY;

				//	USING MULTIPLIED PERCENTS, ROLL FOR DIRECTION

				rangeTopRoll = Math.floor(Math.random()*(rangeTopPct))+1;
				rangeBottomRoll = Math.floor(Math.random()*(rangeBottomPct))+1;
				rangeLeftRoll = Math.floor(Math.random()*(rangeLeftPct))+1;
				rangeRightRoll = Math.floor(Math.random()*(rangeRightPct))+1;

				//	DETERMINE DIRECTION BASED ON HIGH ROLL

				if (rangeTopRoll > rangeBottomRoll &&
					rangeTopRoll > rangeLeftRoll &&
					rangeTopRoll > rangeRightRoll)
				{
					// CHECK UP

					mountainTopY = mountainTopY - 1;
					if (mountainTopY < 1)	{mountainTopY = mapSizeY;}
					checkSeedLocation();
					if (goodSeedLocation==1 && oldRangeDirection != "down")
					{
					//	constructorError.value += "\n...old direction was "+oldRangeDirection+" ...going up.";
						oldRangeDirection = "up";
						plotMountain();
						directionApproved = 1;
					}
					else
					{
						mountainTopX = tempMountainTopX;
						mountainTopY = tempMountainTopY;
					//	constructorError.value += "\nBAD DIRECTION!";
					}
				}
				else if (rangeBottomRoll > rangeLeftRoll &&
						 rangeBottomRoll > rangeRightRoll)
				{
					// CHECK DOWN

					mountainTopY = mountainTopY + 1;
					if (mountainTopY > mapSizeY)	{mountainTopY = 1;}
					checkSeedLocation();
					if (goodSeedLocation==1 && oldRangeDirection != "up")
					{
					//	constructorError.value += "\n...old direction was "+oldRangeDirection+" ...going down.";
						oldRangeDirection = "down";
						plotMountain();
						directionApproved = 1;
					}
					else
					{
						mountainTopX = tempMountainTopX;
						mountainTopY = tempMountainTopY;
					//	constructorError.value += "\nBAD DIRECTION!";
					}
				}
				else if (rangeLeftRoll > rangeRightRoll)
				{
					// CHECK LEFT

					mountainTopX = mountainTopX - 1;
					if (mountainTopX < 1)	{mountainTopX = mapSizeX;}
					checkSeedLocation();
					if (goodSeedLocation==1 && oldRangeDirection != "right")
					{
					//	constructorError.value += "\n...old direction was "+oldRangeDirection+" ...going left.";
						oldRangeDirection = "left";
						plotMountain();
						directionApproved = 1;
					}
					else
					{
						mountainTopX = tempMountainTopX;
						mountainTopY = tempMountainTopY;
					//	constructorError.value += "\nBAD DIRECTION!";
					}
				}
				else
				{
					// CHECK RIGHT

					mountainTopX = (mountainTopX-0) + 1;
					if (mountainTopX > mapSizeX)	{mountainTopX = 1;}
					checkSeedLocation();
					if (goodSeedLocation==1 && oldRangeDirection != "left")
					{
					//	constructorError.value += "\n...old direction was "+oldRangeDirection+" ...going right.";
						oldRangeDirection = "right";
						plotMountain();
						directionApproved = 1;
					}
					else
					{
						mountainTopX = tempMountainTopX;
						mountainTopY = tempMountainTopY;
					//	constructorError.value += "\nBAD DIRECTION!";
					}
				}

				tries = 100;
				tries += 1;
			}
		}
	}
	mountainRangesSeeded = 1;
}

function plotMountain()
{
	var mountainTopXb=0;
	var mountainTopYb=0;
	var r=0;
	var s=0;

	if (mountainTopX==0)
	{
		constructorError.value += "\n### ERROR ### - plotMountain()";
	}

	try
	{
		if (maxMtnGirth==1)
		{
			mapArrayWorld[(mountainTopX)][(mountainTopY)][z] = "a";
		}

		else if (maxMtnGirth==2)
		{
			for (y=0;y<=1;y++)
			{
				yb=y;
				for (x=0;x<=1;x++)
				{
					xb=x;
					if (((mountainTopX-0)+(x-0)) > mapSizeX)
					{
						xb=(1-(mapSizeX-0));
					}

					if (((mountainTopY-0)+(y-0)) > mapSizeY)
					{
						yb=(1-(mapSizeY-0));
					}

					mapArrayWorld[((mountainTopX-0)+(xb-0))][((mountainTopY-0)+(yb-0))][z] = "a";
				}
			}
		}

		else
		{
			halfMtnSize = Math.floor(maxMtnGirth * 0.5);
		//	document.myform.fieldError.value = document.myform.fieldError.value + "\nhalfMtnSize: "+halfMtnSize;
		//	document.myform.fieldError.scrollTop = document.myform.fieldError.scrollHeight;

			randomNumber = Math.floor(Math.random()*halfMtnSize)+1;
		//	document.myform.fieldError.value = document.myform.fieldError.value + "\nrandomNumber: "+randomNumber;
		//	document.myform.fieldError.scrollTop = document.myform.fieldError.scrollHeight;

			maxMtnGirthSpecific = maxMtnGirth - randomNumber;
		//	document.myform.fieldError.value = document.myform.fieldError.value + "\nmaxMtnGirthSpecific: "+maxMtnGirthSpecific;
		//	document.myform.fieldError.scrollTop = document.myform.fieldError.scrollHeight;

		//	mtnRadius = halfMtnSize;
			mtnRadius = Math.round(maxMtnGirthSpecific / 2);
		//	document.myform.fieldError.value = document.myform.fieldError.value + "\nmtnRadius: "+mtnRadius;
		//	document.myform.fieldError.scrollTop = document.myform.fieldError.scrollHeight;

			negativeMtnRadius = mtnRadius - (mtnRadius * 2);
		//	document.myform.fieldError.value = document.myform.fieldError.value + "\nnegativeMtnRadius: "+negativeMtnRadius;
		//	document.myform.fieldError.scrollTop = document.myform.fieldError.scrollHeight;

			if (mtnRadius < 1)				{mtnRadius = 1;}
			if (negativeMtnRadius > (-1))	{negativeMtnRadius = (-1);}

			for (q=negativeMtnRadius;q<=mtnRadius;q++)
			{
				s=q;
				for (p=negativeMtnRadius;p<=mtnRadius;p++)
				{
					r=p;

//					document.myform.fieldError.value = document.myform.fieldError.value + "\nr: "+r+"s: "+s;

					if ((Math.abs((r * r)+(s * s))) <= ((mtnRadius) * (mtnRadius)))
					{
						if (((mountainTopX-0) + r) < 1)
						{
							mountainTopXb = (((mountainTopX-0)) + (mapSizeX-0));
						}
						else if (((mountainTopX-0) + r) > mapSizeX)
						{
							mountainTopXb = (((mountainTopX-0)) - (mapSizeX-0));
						}
						else
						{
							mountainTopXb = mountainTopX;
						}

						if (((mountainTopY-0) + s) < 1)
						{
							mountainTopYb = (((mountainTopY-0)) + (mapSizeY-0));
						}
						else if (((mountainTopY-0) + s) > mapSizeY)
						{
							mountainTopYb = (((mountainTopY-0)) - (mapSizeY-0));
						}
						else
						{
							mountainTopYb = mountainTopY;
						}

//						checkAndAdjustMountainTopValues();
						mapArrayWorld[(mountainTopXb+r)][(mountainTopYb+s)][z] = "a";
//						constructorError.value += "\n"+(mountainTopXb+r)+","+(mountainTopYb+s);
//						document.myform.fieldError.value = document.myform.fieldError.value + "\nPLOT MOUNTAIN! ("+(mountainTopX)+","+(mountainTopY)+"), r:"+r+", s:"+s;
//						document.myform.fieldError.scrollTop = document.myform.fieldError.scrollHeight;
					}
				}
			}
		}
	}
	catch(err)
	{
//		errorCount += 1;
//		constructorError.value += "\n### ERROR ### - plotMountain()";
//		getTime();
//		constructorError.value += "\n" + timeText + " - Minor issue in plotting... [Corrected]";
//		constructorError.value += "\nCATCH "+errorCount+" (plotMountain) - p:"+p+", q:"+q+", r:"+r+", s:"+s+", mTopX: " + ((mountainTopXb-0)) + ", mTopY: " + ((mountainTopYb-0));
//		document.myform.fieldError.value = document.myform.fieldError.value + "\nr: " + r;
//		document.myform.fieldError.value = document.myform.fieldError.value + "\nmountainTopY: " + (mountainTopY+s);
//		document.myform.fieldError.value = document.myform.fieldError.value + "\ns: " + s;
//		constructorError.scrollTop = constructorError.scrollHeight;
	}
}

function checkSeedLocation()
{
	try
	{
		tilesPerBoxX = Math.round(mapSizeX / 50);
		tilesPerBoxY = Math.round(mapSizeY / 50);

		mountainTopXc = mountainTopX - 1;
		mountainTopYc = mountainTopY - 1;

		designatedBoxX = Math.floor((mountainTopXc / tilesPerBoxX)+1);
		designatedBoxY = Math.floor((mountainTopYc / tilesPerBoxY)+1);


//		12345678901234567890123456789012345678901234567890

//		if (designatedBoxX == (-1))		designatedBoxX = 49;
//		if (designatedBoxX == 0)		designatedBoxX = 50;
//		if (designatedBoxX == 51)		designatedBoxX = 1;
//		if (designatedBoxX == 52)		designatedBoxX = 2;

//		if (designatedBoxY == (-1))		designatedBoxY = 49;
//		if (designatedBoxY == 0)		designatedBoxY = 50;
//		if (designatedBoxY == 51)		designatedBoxY = 1;
//		if (designatedBoxY == 52)		designatedBoxY = 2;

	//	constructorError.value += "\ntilesPerBoxX: "+tilesPerBoxX;
	//	constructorError.value += "\ntilesPerBoxY: "+tilesPerBoxY;

	//	constructorError.value += "\nChecking location...";
	//	constructorError.value += "\nPoint ("+mountainTopX+","+mountainTopY+") is in box ("+designatedBoxX+","+designatedBoxY+").";
	//	constructorError.value += "\nBox ("+designatedBoxX+","+designatedBoxY+") is "+boxAddressArray[designatedBoxX][designatedBoxY]+".";
	//	constructorError.scrollTop = constructorError.scrollHeight;

		if (boxAddressArray[designatedBoxX][designatedBoxY] == "land")
		{
			goodSeedLocation = 1;
	//		constructorError.value += "\nGood seed location.";
		}
		else if (boxAddressArray[designatedBoxX][designatedBoxY] == "ocean")
		{
			goodSeedLocation = 0;
		}
	}
	catch(err)
	{
		constructorError.value += "\nERROR! (checkSeedLocation) - MX,MY: "+mountainTopX+","+mountainTopY+" - Designated box: "+designatedBoxX+","+designatedBoxY;
	}
}

function initWorldArrays()
{
//	for (x=1;x<=30;x++)
//	{
//		growth[x] = 0;
//	}

	if (loadingMap==0)
	{
		for (x=1;x<=mapSizeX;x++)
		{
			mapArrayMaster[x] = new Array(mapSizeY);
			mapArrayDev[x] = new Array(mapSizeY);
			mapArrayDev2[x] = new Array(mapSizeY);
		}

		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				mapArrayMaster[x][y]="X";
				mapArrayDev[x][y]="X";
			}
		}

		for (x=1;x<=mapSizeX;x++)
		{
			mapArrayWorld[x] = new Array(mapSizeY);
		}

		for (x=1;x<=mapSizeX;x++)
		{
			for (y=1;y<=mapSizeY;y++)
			{
				mapArrayWorld[x][y] = new Array(31);
			}
		}

		for (x=1;x<=mapSizeX;x++)
		{
			for (y=1;y<=mapSizeY;y++)
			{
				for (z=1;z<=31;z++)
				{
					mapArrayWorld[x][y][z] = "X";
					countInitializations = countInitializations + 1;
				}
			}
		}
		worldArraysInitialized = 1;
	}
	else
	{
	//	loadMapError.value += "\nmapSizeX,mapSizeY: "+mapSizeX+","+mapSizeY;

		for (x=1;x<=mapSizeX;x++)
		{
			mapArrayDev[x] = new Array(mapSizeY);
		}

		loadMapError.value += "\nWorld arrays initialized.";
		loadMapError.scrollTop = loadMapError.scrollHeight;
	}
}

function getTime()
{
	var time = new Date();
	var hours = time.getHours();
	var minutes = time.getMinutes();
	var seconds = time.getSeconds();
	if (minutes < 10)
	{
		minutes = "0" + minutes;
	}
	if (seconds < 10)
	{
		seconds = "0" + seconds;
	}
	timeText = hours + ":" + minutes + ":" + seconds;
}

function checkForContinentSelection()
{
	continentsAreSelected = 0;

	for (y=1;y<=50;y++)
	{
		for (x=1;x<=50;x++)
		{
			if (boxAddressArray[x][y]=="land")
			{
				continentsAreSelected = 1;
			}
		}
	}
}

function changeSpin()
{
	if (spin==0)
	{
		document.getElementById("buttonWestToEast").style.background="url(checked.png) no-repeat";
		document.getElementById("buttonEastToWest").style.background="url(unchecked.png) no-repeat";
	}
	else
	{
		document.getElementById("buttonWestToEast").style.background="url(unchecked.png) no-repeat";
		document.getElementById("buttonEastToWest").style.background="url(checked.png) no-repeat";
	}
}

function changeClimate()
{
	if (climate==0)
	{
		document.getElementById("buttonWet").style.background="url(checked.png) no-repeat";
		document.getElementById("buttonMedium").style.background="url(unchecked.png) no-repeat";
		document.getElementById("buttonDry").style.background="url(unchecked.png) no-repeat";
	}
	else if (climate==1)
	{
		document.getElementById("buttonWet").style.background="url(unchecked.png) no-repeat";
		document.getElementById("buttonMedium").style.background="url(checked.png) no-repeat";
		document.getElementById("buttonDry").style.background="url(unchecked.png) no-repeat";
	}
	else
	{
		document.getElementById("buttonWet").style.background="url(unchecked.png) no-repeat";
		document.getElementById("buttonMedium").style.background="url(unchecked.png) no-repeat";
		document.getElementById("buttonDry").style.background="url(checked.png) no-repeat";
	}
}

function changeTemperature()
{
	if (temperature==0)
	{
		document.getElementById("buttonCold").style.background="url(checked.png) no-repeat";
		document.getElementById("buttonTemperate").style.background="url(unchecked.png) no-repeat";
		document.getElementById("buttonHot").style.background="url(unchecked.png) no-repeat";
	}
	else if (temperature==1)
	{
		document.getElementById("buttonCold").style.background="url(unchecked.png) no-repeat";
		document.getElementById("buttonTemperate").style.background="url(checked.png) no-repeat";
		document.getElementById("buttonHot").style.background="url(unchecked.png) no-repeat";
	}
	else
	{
		document.getElementById("buttonCold").style.background="url(unchecked.png) no-repeat";
		document.getElementById("buttonTemperate").style.background="url(unchecked.png) no-repeat";
		document.getElementById("buttonHot").style.background="url(checked.png) no-repeat";
	}
}

function changeDesertDepth()
{
	if (desertDepth==0)
	{
		document.getElementById("buttonAnkles").style.background="url(checked.png) no-repeat";
		document.getElementById("buttonWaist").style.background="url(unchecked.png) no-repeat";
		document.getElementById("buttonNeck").style.background="url(unchecked.png) no-repeat";
	}
	else if (desertDepth==1)
	{
		document.getElementById("buttonAnkles").style.background="url(unchecked.png) no-repeat";
		document.getElementById("buttonWaist").style.background="url(checked.png) no-repeat";
		document.getElementById("buttonNeck").style.background="url(unchecked.png) no-repeat";
	}
	else
	{
		document.getElementById("buttonAnkles").style.background="url(unchecked.png) no-repeat";
		document.getElementById("buttonWaist").style.background="url(unchecked.png) no-repeat";
		document.getElementById("buttonNeck").style.background="url(checked.png) no-repeat";
	}
}

function openTextDisplay()
{
	divSplashOn = 0;
	divConstructorOn = 0;
	divAboutOn = 0;
	divInstructionsOn = 0;
	divBuilderOn = 0;
	divLoadOn = 0;
	divWorldMapOn = 0;
	divCompressedTextOn = 0;
	divDisplayTextOn = 1;

	if (mapSizeX > 200)
	{
		textDisplayTable.style.left = 5;
	}
	document.getElementById("divClimateBuilder").style.display="none";
	document.getElementById("divCompressedText").style.display="none";
	document.getElementById("divZoomEdit").style.display="none";
	document.getElementById("divDisplayText").style.display="block";

	//	DISPLAY TEXT

	textDisplayString = "";

	for (y=1;y<=mapSizeY;y++)
	{
		for (x=1;x<=mapSizeX;x++)
		{
			textDisplayString = textDisplayString + mapArrayDev[x][y];
		}
		textDisplayString = textDisplayString + "<br>";
	}

	document.getElementById('textDisplay').innerHTML = textDisplayString;
}

//	function closeTextDisplay()
//	{
//		document.getElementById("divDisplayText").style.display="none";
//		document.getElementById("divCompressedText").style.display="none";
//		document.getElementById("divClimateBuilder").style.display="block";
//	}

function closeTextDisplay()
{
	closeAllDivs();
	if (divConstructorStage2On==1)
	{
		document.getElementById("divConstructorStage2").style.display="block";
	}
	else if (divZoomEditOn==1)
	{
		document.getElementById("divZoomEdit").style.display="block";
	}
	else if (divClimateBuilderOn==1)
	{
		document.getElementById("divClimateBuilder").style.display="block";
	}
}


function compressTextArray()
{
	document.getElementById("divDisplayText").style.display="none";
	document.getElementById("divCompressedText").style.display="block";

//	document.getElementById('textDisplay').innerHTML = "";

	textDisplayString = "RBCOM";
	oldFocusCharacter = "";
	focusCharacterCount = 0;
	focusCharacterCountString = ""

	for (y=1;y<=mapSizeY;y++)
	{
		for (x=1;x<=mapSizeX;x++)
		{
			focusCharacter = mapArrayDev[x][y];

			if (focusCharacter != oldFocusCharacter)
			{
				if (oldFocusCharacter != "")
				{
					textDisplayString = textDisplayString + oldFocusCharacter + focusCharacterCount.toString();
				}
				oldFocusCharacter = focusCharacter;
				focusCharacterCount = 1;
			}
			else
			{
				focusCharacterCount = focusCharacterCount + 1;
			}
//			textDisplayString += mapArrayDev[x][y];
		}

		if (y < mapSizeY)
		{
			textDisplayString = textDisplayString + oldFocusCharacter + focusCharacterCount.toString() + ";";
		}
		else
		{
			textDisplayString = textDisplayString + oldFocusCharacter + focusCharacterCount.toString();
		}

		oldFocusCharacter = "";
//		textDisplayString += "<br>" + (y+1) + ":";
	}

	textDisplayString = textDisplayString + "EOF"
	textDisplayCompressed.value = textDisplayString;
//	document.getElementById('textDisplay').innerHTML = textDisplayString;
}

function openEditor()
{
	document.getElementById("divWorldMap").style.display="none";
	document.getElementById("divClimateBuilder").style.display="none";
	document.getElementById("divZoomEdit").style.display="block";
	divSplashOn = 0;
	divConstructorOn = 0;
	divConstructorStage2On = 0;
	divAboutOn = 0;
	divInstructionsOn = 0;
	divBuilderOn = 0;
	divClimateBuilderOn = 0;
	divLoadOn = 0;
	divWorldMapOn = 0;
	divCompressedTextOn = 0;
	divDisplayTextOn = 0;
	divZoomEditOn = 1;
	drawEditorMap();
}

function drawEditorMap()
{
//	document.myform.editorXDisplay.value = editorX;
//	document.myform.editorYDisplay.value = editorY;
//	zoomEditError.value = zoomEditError.value + "\neditorX: "+editorX+", editorY: "+editorY;
	editorDisplaySquare = 0;
	for (y=1;y<=41;y++)
	{
		for (x=1;x<=41;x++)
		{
			editorDisplaySquare = editorDisplaySquare + 1;
			arraySquare=mapArrayDev[(editorX+x)][(editorY+y)];
//			arraySquare=mapArrayDev[(editorX+x)][(editorY+y)];
			if 		(arraySquare=="a")		{arrayTile="terrain/highmountains";}
			else if (arraySquare=="A") 		{arrayTile="terrain/highmountains";}
			else if (arraySquare=="B") 		{arrayTile="terrain/highmountains";}
			else if (arraySquare==" ") 		{arrayTile="terrain/notile2";}
			else if (arraySquare=="b")		{arrayTile="terrain/lowmountains";}
			else if (arraySquare=="?")		{arrayTile="terrain/lowmountainslush";}
			else if (arraySquare=="c")		{arrayTile="terrain/hillsmeadow";}
			else if (arraySquare==")")		{arrayTile="terrain/hillsscrub";}
			else if (arraySquare=="!")		{arrayTile="terrain/hillslush";}
			else if (arraySquare=="d")		{arrayTile="terrain/boreal";}
			else if (arraySquare=="e")		{arrayTile="terrain/forestboreal";}
			else if (arraySquare=="f")		{arrayTile="terrain/forest";}
			else if (arraySquare=="g")		{arrayTile="terrain/trees";}
			else if (arraySquare=="h")		{arrayTile="terrain/scrub";}
			else if (arraySquare=="i")		{arrayTile="terrain/longgrass";}
			else if (arraySquare=="j")		{arrayTile="terrain/grass";}
			else if (arraySquare=="~")		{arrayTile="terrain/sand";}
			else if (arraySquare=="*")		{arrayTile="terrain/fire";}
			else if (arraySquare=="R")		{arrayTile="terrain/watershallow";}
			else if (arraySquare=="M")		{arrayTile="terrain/waterdeep";}
			else if (arraySquare=="T")		{arrayTile="terrain/waterdeep";}
			else if (arraySquare=="X")		{arrayTile="terrain/waterdeep";}
			else if (arraySquare=="+")		{arrayTile="terrain/treespolar";}
			else if (arraySquare=="=")		{arrayTile="terrain/scrubpolar";}
			else if (arraySquare=="-")		{arrayTile="terrain/dirt";}
			else if (arraySquare=="*")		{arrayTile="terrain/lava";}
			else if (arraySquare=="{")		{arrayTile="terrain/tundralong";}
			else if (arraySquare=="}")		{arrayTile="terrain/tundra";}
			else if (arraySquare=="@")		{arrayTile="terrain/rainforest";}
			else if (arraySquare=="#")		{arrayTile="terrain/ice";}
			else if (arraySquare=="Q")		{arrayTile="terrain/watershallow";}
			else if (arraySquare=="(")		{arrayTile="terrain/borealpolar";}
			else if (arraySquare=="_")		{arrayTile="terrain/swamp";}
			else if (arraySquare=="|")		{arrayTile="terrain/hillsdesert";}
			else if (arraySquare=="/")		{arrayTile="terrain/scrubdesert";}

			document.getElementById("editorButton"+x+","+y).style.background="url("+arrayTile+".gif) no-repeat";
		}
	}
}

function nw()
{
	editorX = editorX - 1;
	editorY = editorY - 1;
	checkEditorXYValues();
	drawEditorMap();
}
function n()
{
	editorY = editorY - 1;
	checkEditorXYValues();
	drawEditorMap();
}
function ne()
{
	editorX = editorX + 1;
	editorY = editorY - 1;
	checkEditorXYValues();
	drawEditorMap();
}
function w()
{
	editorX = editorX - 1;
	checkEditorXYValues();
	drawEditorMap();
}
function e()
{
	editorX = editorX + 1;
	checkEditorXYValues();
	drawEditorMap();
}
function sw()
{
	editorX = editorX - 1;
	editorY = editorY + 1;
	checkEditorXYValues();
	drawEditorMap();
}
function south()
{
	editorY = editorY + 1;
	checkEditorXYValues();
	drawEditorMap();
}
function se()
{
	editorX = editorX + 1;
	editorY = editorY + 1;
	checkEditorXYValues();
	drawEditorMap();
}

function nw2()
{
	editorX = editorX - 20;
	editorY = editorY - 20;
	checkEditorXYValues();
	drawEditorMap();
}
function n2()
{
	editorY = editorY - 20;
	checkEditorXYValues();
	drawEditorMap();
}
function ne2()
{
	editorX = editorX + 20;
	editorY = editorY - 20;
	checkEditorXYValues();
	drawEditorMap();
}
function w2()
{
	editorX = editorX - 20;
	checkEditorXYValues();
	drawEditorMap();
}
function e2()
{
	editorX = editorX + 20;
	checkEditorXYValues();
	drawEditorMap();
}
function sw2()
{
	editorX = editorX - 20;
	editorY = editorY + 20;
	checkEditorXYValues();
	drawEditorMap();
}
function south2()
{
	editorY = editorY + 20;
	checkEditorXYValues();
	drawEditorMap();
}
function se2()
{
	editorX = editorX + 20;
	editorY = editorY + 20;
	checkEditorXYValues();
	drawEditorMap();
}

function checkEditorXYValues()
{
	if (editorX < 0)
	{
		editorX = 0;
		getTime();
		zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Edge of map!";
		zoomEditError.scrollTop = zoomEditError.scrollHeight;
	}
	if (editorX > (mapSizeX-41))
	{
		editorX = (mapSizeX-41);
		getTime();
		zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Edge of map!";
		zoomEditError.scrollTop = zoomEditError.scrollHeight;
	}
	if (editorY < 0)
	{
		editorY = 0;
		getTime();
		zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Edge of map!";
		zoomEditError.scrollTop = zoomEditError.scrollHeight;
	}
	if (editorY > (mapSizeY-41))
	{
		editorY = (mapSizeY-41);
		getTime();
		zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Edge of map!";
		zoomEditError.scrollTop = zoomEditError.scrollHeight;
	}
}

function openWorldMapDisplay()
{
	divSplashOn = 0;
	divConstructorOn = 0;
	divConstructorStage2On = 0;
	divAboutOn = 0;
	divInstructionsOn = 0;
	divBuilderOn = 0;
	divClimateBuilderOn = 0;
	divLoadOn = 0;
	divWorldMapOn = 1;
	divCompressedTextOn = 0;
	divDisplayTextOn = 0;
	divZoomEditOn = 0;
	divClimateBuilderOn = 0;
	worldMapDisplayOn = 1;
	document.getElementById("divZoomEdit").style.display="none";
	document.getElementById("divWorldMap").style.display="block";
	if (redSquareOn==0)
	{
		document.getElementById("buttonTurnOffRedSquare").style.display="none";
		document.getElementById("buttonTurnOnRedSquare").style.display="block";
	}
	else
	{
		document.getElementById("buttonTurnOnRedSquare").style.display="none";
		document.getElementById("buttonTurnOffRedSquare").style.display="block";
	}
	drawMap();
}

function changeSelection()
{
	if      (editorSelection==1)	{document.getElementById("selectedTerrain").style.background="url(terrain/grass.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: GRASS";}
	else if (editorSelection==2)	{document.getElementById("selectedTerrain").style.background="url(terrain/longgrass.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: GRASS (LONG)";}
	else if (editorSelection==3)	{document.getElementById("selectedTerrain").style.background="url(terrain/scrub.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: SCRUB";}
	else if (editorSelection==4)	{document.getElementById("selectedTerrain").style.background="url(terrain/trees.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: TREES";}
	else if (editorSelection==5)	{document.getElementById("selectedTerrain").style.background="url(terrain/forest.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: FOREST";}
	else if (editorSelection==6)	{document.getElementById("selectedTerrain").style.background="url(terrain/forestboreal.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: MIXED FOREST";}
	else if (editorSelection==7)	{document.getElementById("selectedTerrain").style.background="url(terrain/boreal.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: BOREAL";}
	else if (editorSelection==8)	{document.getElementById("selectedTerrain").style.background="url(terrain/hillsmeadow.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: HILLS (MEADOW)";}
	else if (editorSelection==9)	{document.getElementById("selectedTerrain").style.background="url(terrain/lowmountains.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: LOW MOUNTAINS";}
	else if (editorSelection==10)	{document.getElementById("selectedTerrain").style.background="url(terrain/highmountains.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: HIGH MOUNTAINS";}
	else if (editorSelection==11)	{document.getElementById("selectedTerrain").style.background="url(terrain/ice.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: ICE";}
	else if (editorSelection==12)	{document.getElementById("selectedTerrain").style.background="url(terrain/tundra.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: TUNDRA";}
	else if (editorSelection==13)	{document.getElementById("selectedTerrain").style.background="url(terrain/tundralong.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: TUNDRA (LONG)";}
	else if (editorSelection==14)	{document.getElementById("selectedTerrain").style.background="url(terrain/scrubpolar.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: SCRUB (POLAR)";}
	else if (editorSelection==15)	{document.getElementById("selectedTerrain").style.background="url(terrain/treespolar.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: TREES (POLAR)";}
	else if (editorSelection==16)	{document.getElementById("selectedTerrain").style.background="url(terrain/borealpolar.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: BOREAL (POLAR)";}
	else if (editorSelection==17)	{document.getElementById("selectedTerrain").style.background="url(terrain/hillsscrub.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: HILLS (SCRUB)";}
	else if (editorSelection==18)	{document.getElementById("selectedTerrain").style.background="url(terrain/rainforest.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: RAINFOREST";}
	else if (editorSelection==19)	{document.getElementById("selectedTerrain").style.background="url(terrain/hillslush.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: HILLS (LUSH)";}
	else if (editorSelection==20)	{document.getElementById("selectedTerrain").style.background="url(terrain/lowmountainslush.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: LOW MOUNTAINS (LUSH)";}
	else if (editorSelection==21)	{document.getElementById("selectedTerrain").style.background="url(terrain/waterdeep.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: WATER (DEEP)";}
	else if (editorSelection==22)	{document.getElementById("selectedTerrain").style.background="url(terrain/watershallow.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: WATER (SHALLOW)";}
	else if (editorSelection==23)	{document.getElementById("selectedTerrain").style.background="url(terrain/fire.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: LAVA / FIRE";}
	else if (editorSelection==24)	{document.getElementById("selectedTerrain").style.background="url(terrain/dirt.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: DIRT / BURNT GROUND";}
	else if (editorSelection==25)	{document.getElementById("selectedTerrain").style.background="url(terrain/swamp.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: SWAMP";}
	else if (editorSelection==26)	{document.getElementById("selectedTerrain").style.background="url(terrain/sand.gif) no-repeat"; zoomEditError.value = zoomEditError.value + "\n" + timeText + " - Terrain selection: SAND / DESERT";}
	zoomEditError.scrollTop = zoomEditError.scrollHeight;
}

function changeTile()
{
//	tileChangeX
//	tileChangeY
//	editorButtonChange

//	zoomEditError.value = zoomEditError.value + "\neditorX,Y: "+editorX+","+editorY+"; editorButton: "+editorButtonChange;
//	zoomEditError.scrollTop = zoomEditError.scrollHeight;

	changeTileX = (editorX) + tileChangeX;
	changeTileY = (editorY) + tileChangeY;

	brushSize = editorBrushSizeSlider.value;

	brushRadius = (Math.round(brushSize / 2)) - 1;
	brushRadiusNeg = brushRadius - (2 * brushRadius);

	for (y = brushRadiusNeg; y <= brushRadius; y++)
	{
		for (x = brushRadiusNeg; x <= brushRadius; x++)
		{

			if ((tileChangeX+x) < 1 || (tileChangeX+x) > 41 || (tileChangeY+y) < 1 || (tileChangeY+y) > 41)
			{

			}
			else
			{
				if ((x * x) + (y * y) <= (brushRadius * brushRadius))
				{
//					document.getElementById("checkboxx"+(changeX+x)+"y"+(changeY+y)).style.background="url(boxgreen10.png) no-repeat";
//					boxAddressArray[changeX+x][changeY+y] = "land";

//					if      (editorSelection==1)		{mapArrayDev[((changeTileX+x)+x)][((changeTileY+y)+y)]="j"; document.getElementById("editorButton"+((tileChangeX+x)+x)+","+((tileChangeY+y)+y)).style.background="url(terrain/grass.gif) no-repeat";}
					if      (editorSelection==1)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="j"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/grass.gif) no-repeat";}
					else if (editorSelection==2)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="i"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/longgrass.gif) no-repeat";}
					else if (editorSelection==3)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="h"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/scrub.gif) no-repeat";}
					else if (editorSelection==4)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="g"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/trees.gif) no-repeat";}
					else if (editorSelection==5)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="f"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/forest.gif) no-repeat";}
					else if (editorSelection==6)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="e"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/forestboreal.gif) no-repeat";}
					else if (editorSelection==7)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="d"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/boreal.gif) no-repeat";}
					else if (editorSelection==8)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="c"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/hillsmeadow.gif) no-repeat";}
					else if (editorSelection==9)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="b"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/lowmountains.gif) no-repeat";}
					else if (editorSelection==10)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="a"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/highmountains.gif) no-repeat";}
					else if (editorSelection==11)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="#"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/ice.gif) no-repeat";}
					else if (editorSelection==12)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="{"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/tundra.gif) no-repeat";}
					else if (editorSelection==13)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="}"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/tundralong.gif) no-repeat";}
					else if (editorSelection==14)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="="; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/scrubpolar.gif) no-repeat";}
					else if (editorSelection==15)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="+"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/treespolar.gif) no-repeat";}
					else if (editorSelection==16)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="("; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/borealpolar.gif) no-repeat";}
					else if (editorSelection==17)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]=")"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/hillsscrub.gif) no-repeat";}
					else if (editorSelection==18)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="@"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/rainforest.gif) no-repeat";}
					else if (editorSelection==19)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="!"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/hillslush.gif) no-repeat";}
					else if (editorSelection==20)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="?"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/lowmountainslush.gif) no-repeat";}
					else if (editorSelection==21)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="X"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/waterdeep.gif) no-repeat";}
					else if (editorSelection==22)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="Q"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/watershallow.gif) no-repeat";}
					else if (editorSelection==23)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="*"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/fire.gif) no-repeat";}
					else if (editorSelection==24)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="-"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/dirt.gif) no-repeat";}
					else if (editorSelection==25)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="_"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/swamp.gif) no-repeat";}
					else if (editorSelection==26)		{mapArrayDev[(changeTileX+x)][(changeTileY+y)]="~"; document.getElementById("editorButton"+(tileChangeX+x)+","+(tileChangeY+y)).style.background="url(terrain/sand.gif) no-repeat";}

				}
				else
				{

				}
			}
		}
	}
/*
	if      (editorSelection==1)		{mapArrayDev[changeTileX][changeTileY]="j"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/grass.gif) no-repeat";}
	else if (editorSelection==2)		{mapArrayDev[changeTileX][changeTileY]="i"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/longgrass.gif) no-repeat";}
	else if (editorSelection==3)		{mapArrayDev[changeTileX][changeTileY]="h"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/scrub.gif) no-repeat";}
	else if (editorSelection==4)		{mapArrayDev[changeTileX][changeTileY]="g"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/trees.gif) no-repeat";}
	else if (editorSelection==5)		{mapArrayDev[changeTileX][changeTileY]="f"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/forest.gif) no-repeat";}
	else if (editorSelection==6)		{mapArrayDev[changeTileX][changeTileY]="e"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/forestboreal.gif) no-repeat";}
	else if (editorSelection==7)		{mapArrayDev[changeTileX][changeTileY]="d"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/boreal.gif) no-repeat";}
	else if (editorSelection==8)		{mapArrayDev[changeTileX][changeTileY]="c"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/hillsmeadow.gif) no-repeat";}
	else if (editorSelection==9)		{mapArrayDev[changeTileX][changeTileY]="b"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/lowmountains.gif) no-repeat";}
	else if (editorSelection==10)		{mapArrayDev[changeTileX][changeTileY]="a"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/highmountains.gif) no-repeat";}
	else if (editorSelection==11)		{mapArrayDev[changeTileX][changeTileY]="#"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/ice.gif) no-repeat";}
	else if (editorSelection==12)		{mapArrayDev[changeTileX][changeTileY]="{"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/tundra.gif) no-repeat";}
	else if (editorSelection==13)		{mapArrayDev[changeTileX][changeTileY]="}"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/tundralong.gif) no-repeat";}
	else if (editorSelection==14)		{mapArrayDev[changeTileX][changeTileY]="="; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/scrubpolar.gif) no-repeat";}
	else if (editorSelection==15)		{mapArrayDev[changeTileX][changeTileY]="+"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/treespolar.gif) no-repeat";}
	else if (editorSelection==16)		{mapArrayDev[changeTileX][changeTileY]="("; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/borealpolar.gif) no-repeat";}
	else if (editorSelection==17)		{mapArrayDev[changeTileX][changeTileY]=")"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/hillsscrub.gif) no-repeat";}
	else if (editorSelection==18)		{mapArrayDev[changeTileX][changeTileY]="@"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/rainforest.gif) no-repeat";}
	else if (editorSelection==19)		{mapArrayDev[changeTileX][changeTileY]="!"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/hillslush.gif) no-repeat";}
	else if (editorSelection==20)		{mapArrayDev[changeTileX][changeTileY]="?"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/lowmountainslush.gif) no-repeat";}
	else if (editorSelection==21)		{mapArrayDev[changeTileX][changeTileY]="X"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/waterdeep.gif) no-repeat";}
	else if (editorSelection==22)		{mapArrayDev[changeTileX][changeTileY]="Q"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/watershallow.gif) no-repeat";}
	else if (editorSelection==23)		{mapArrayDev[changeTileX][changeTileY]="*"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/fire.gif) no-repeat";}
	else if (editorSelection==24)		{mapArrayDev[changeTileX][changeTileY]="-"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/dirt.gif) no-repeat";}
	else if (editorSelection==25)		{mapArrayDev[changeTileX][changeTileY]="_"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/swamp.gif) no-repeat";}
	else if (editorSelection==26)		{mapArrayDev[changeTileX][changeTileY]="~"; document.getElementById("editorButton"+tileChangeX+","+tileChangeY).style.background="url(terrain/sand.gif) no-repeat";}
*/
}

function showEditorBrushSize()
{
	editorBrushSizeTextArea.value=editorBrushSizeSlider.value;
}

function openLoadDiv()
{
	divSplashOn = 0;
	divConstructorOn = 0;
	divConstructorStage2On = 0;
	divAboutOn = 0;
	divInstructionsOn = 0;
	divBuilderOn = 0;
	divClimateBuilderOn = 0;
	divLoadOn = 1;
	divWorldMapOn = 0;
	divCompressedTextOn = 0;
	divDisplayTextOn = 0;
	divZoomEditOn = 0;
	document.getElementById("divSplash").style.display="none";
	document.getElementById("divLoad").style.display="block";
}

function loadMap()
{
	loadingMap = 1;
	document.getElementById("greenLoad").style.display="none";
	document.getElementById("redLoad").style.display="none";
	var loadMapString = "";
	var loadWidth = 0;
	var loadHeight = 0;
	var compressedDetected = 0;
	var loadError = 0;
	var endOfString = 0;
	var focusCharacter = "";
	var oldFocusCharacter = "";
	var characterNumber = "";
	var loadScanX = 1;
	var loadScanY = 1;
	var advanceALine = 0;
	loadMapError.value = "";
	var loadDisplayString = "";

	loadMapString = loadMapArea.value;
	loadWidth = loadMapWidth.value;
	loadHeight = loadMapHeight.value;

	mapSizeX = loadWidth;
	mapSizeY = loadHeight;

	initWorldArrays();

	if (loadMapString == "")
	{
		loadMapError.value += "\nERROR - No map array detected!";
		loadMapError.scrollTop = loadMapError.scrollHeight;
		loadError = 1;
		document.getElementById("redLoad").style.display="block";
	}
	if (isNaN(loadMapWidth.value) || loadWidth == 0)
	{
		loadMapError.value += "\nERROR - No map width detected!";
		loadMapError.scrollTop = loadMapError.scrollHeight;
		loadError = 1;
		document.getElementById("redLoad").style.display="block";
	}
	if (isNaN(loadMapHeight.value) || loadHeight == 0)
	{
		loadMapError.value += "\nERROR - No map height detected!";
		loadMapError.scrollTop = loadMapError.scrollHeight;
		loadError = 1;
		document.getElementById("redLoad").style.display="block";
	}

	if (loadError == 1)
	{

	}
	else if (loadMapString.substr(0,5) == "RBCOM")
	{
		loadMapError.value += "\nCompressed map array detected.";
		compressedDetected = 1;
		loadMapError.scrollTop = loadMapError.scrollHeight;
	}
	else
	{
		loadMapError.value += "\nUncompressed map array detected.";
		loadMapError.scrollTop = loadMapError.scrollHeight;

		for (loadMapStringIndex=0; loadMapStringIndex<=loadMapString.length; loadMapStringIndex++)
		{
			if ((loadMapString.charCodeAt(loadMapStringIndex)==10) ||
				(loadMapString.charCodeAt(loadMapStringIndex)==13))
			{
			}
			else
			{
				mapArrayDev[loadScanX][loadScanY] = loadMapString.substr(loadMapStringIndex,1)
				loadDisplayString = loadDisplayString + mapArrayDev[loadScanX][loadScanY];
//				loadDisplayString = loadDisplayString + loadMapString.substr(loadMapStringIndex,1);
				loadScanX = loadScanX + 1;
				if (loadScanX > loadWidth)
				{
					loadScanX = 1;
					loadScanY = loadScanY + 1;
					loadDisplayString = loadDisplayString + "<br>";
				}
			}
		}
/*
		for (y=1;y<=loadHeight;y++)
		{
			for (x=1;x<=loadWidth;x++)
			{
				mapArrayDev[x][y] = loadMapString.substr(loadMapStringIndex,1)
				loadMapStringIndex = loadMapStringIndex + 1;
				loadDisplayString = loadDisplayString + mapArrayDev[x][y];
			}
			loadDisplayString = loadDisplayString + "<br>";
		}
*/

//		waterLevel = 10;
		determineLoadMapWaterLevel();

		document.getElementById("textLoadDisplay").style.display="block";
		document.getElementById("loadDisplay").style.display="block";
		document.getElementById('loadDisplay').innerHTML = loadDisplayString;
		loadMapError.value += "\n[LOAD SUCCESSFUL]";
		loadMapError.value += "\nWater Level: "+waterLevel;
//		loadMapError.value += "\nmapArrayDev[40][40]: "+mapArrayDev[40][40];
		document.getElementById("greenLoad").style.display="block";
		document.getElementById("buttonLoadMap").style.display="block";
		document.getElementById("buttonContinueToEditor").style.display="block";
		document.getElementById("continueArrowPic").style.display="block";
	}

	if (compressedDetected == 1)
	{

	/*

	10 x 3:
	RBCOMa2X8;X10;X6t3X1EOF

	look for numbers 1-0
	look for ;
	if some other character is found, that character is the focus character
	if there is no old focus character, make the old focus character the new focus character

	*/

		loadMapStringIndex = 5;
		while (endOfString == 0)
		{
			if ((loadMapString.substr(loadMapStringIndex,1) == "1") ||
				(loadMapString.substr(loadMapStringIndex,1) == "2") ||
				(loadMapString.substr(loadMapStringIndex,1) == "3") ||
				(loadMapString.substr(loadMapStringIndex,1) == "4") ||
				(loadMapString.substr(loadMapStringIndex,1) == "5") ||
				(loadMapString.substr(loadMapStringIndex,1) == "6") ||
				(loadMapString.substr(loadMapStringIndex,1) == "7") ||
				(loadMapString.substr(loadMapStringIndex,1) == "8") ||
				(loadMapString.substr(loadMapStringIndex,1) == "9") ||
				(loadMapString.substr(loadMapStringIndex,1) == "0"))
			{
				characterNumber += loadMapString.substr(loadMapStringIndex,1);
//				loadMapError.value += "\nFound a number: "+characterNumber;
			}
			else if (loadMapString.substr(loadMapStringIndex,1) == ";")
			{
//				loadMapError.value += "\nFound end of line (;).";
				charNum = parseInt(characterNumber,10);
				for (x=1;x<=charNum;x++)
				{
					try
					{
						mapArrayDev[loadScanX][loadScanY] = oldFocusCharacter;
					}
					catch(err)
					{
						loadMapError.value += "\nERROR - oldFocusCharacter: "+oldFocusCharacter+"; charNum: "+charNum+"; loadScanX,loadScanY: "+loadScanX+","+loadScanY;
					//	loadMapError.scrollTop = loadMapError.scrollHeight;
						endOfString = 1;
					}
					loadScanX += 1;
				}
				characterNumber = "";
				loadScanX = 1;
//				advanceALine = 1;
				loadScanY += 1;
			}
			else if (loadMapString.substr(loadMapStringIndex,3) == "EOF")
			{
				charNum = parseInt(characterNumber,10);
				for (x=1;x<=charNum;x++)
				{
					try
					{
						mapArrayDev[loadScanX][loadScanY] = oldFocusCharacter;
					}
					catch(err)
					{
						loadMapError.value += "\nERROR - oldFocusCharacter: "+oldFocusCharacter+"; charNum: "+charNum+"; loadScanX,loadScanY: "+loadScanX+","+loadScanY;
					//	loadMapError.scrollTop = loadMapError.scrollHeight;
						endOfString = 1;
					}
					loadScanX += 1;
				}
				loadMapError.value += "\nEnd of string detected.";
				loadMapError.scrollTop = loadMapError.scrollHeight;
				endOfString = 1;
			}
			else
			{
				focusCharacter = loadMapString.substr(loadMapStringIndex,1);
				if (oldFocusCharacter == "")
				{
					oldFocusCharacter = focusCharacter;
//					loadMapError.value += "\nFound first character: "+focusCharacter;
				}
				else
				{
//					loadMapError.value += "\nFound another character: "+focusCharacter;
					charNum = parseInt(characterNumber,10);
//					loadMapError.value += "\noldFocusCharacter: "+oldFocusCharacter+"; charNum: "+charNum+"; loadScanX,loadScanY: "+loadScanX+","+loadScanY;
					for (x=1;x<=charNum;x++)
					{
						try
						{
							mapArrayDev[loadScanX][loadScanY] = oldFocusCharacter;
						}
						catch(err)
						{
							loadMapError.value += "\nERROR - oldFocusCharacter: "+oldFocusCharacter+"; charNum: "+charNum+"; loadScanX,loadScanY: "+loadScanX+","+loadScanY;
						//	loadMapError.scrollTop = loadMapError.scrollHeight;
							endOfString = 1;
						}
						loadScanX += 1;
					}
					characterNumber = "";
					oldFocusCharacter = focusCharacter;
				}
			}

			if (loadMapStringIndex == 5000000)
			{
				loadMapError.value += "\nERROR - End of string not found!";
				loadMapError.scrollTop = loadMapError.scrollHeight;
				document.getElementById("redLoad").style.display="block";
				loadError = 1;
				endOfString = 1;
			}
			loadMapStringIndex += 1;
		}

		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				loadDisplayString = loadDisplayString + mapArrayDev[x][y];
			}
			loadDisplayString = loadDisplayString + "<br>";
		}

		determineLoadMapWaterLevel();

		document.getElementById("textLoadDisplay").style.display="block";
		document.getElementById("loadDisplay").style.display="block";
		document.getElementById('loadDisplay').innerHTML = loadDisplayString;
		loadMapError.value += "\nLOAD SUCCESSFUL.";
		document.getElementById("buttonLoadMap").style.display="block";
		document.getElementById("buttonContinueToEditor").style.display="block";
		document.getElementById("greenLoad").style.display="block";
		document.getElementById("continueArrowPic").style.display="block";
	}
	else
	{

	}
}

function determineLoadMapWaterLevel()
{
	waterLevel = 0;
	for (y=1;y<=mapSizeY;y++)
	{
		for (x=1;x<=mapSizeX;x++)
		{
			if		(mapArrayDev[x][y]=="a" && waterLevel <= 1)          {waterLevel = 1;}
			else if (mapArrayDev[x][y]=="b" && waterLevel <= 2)          {waterLevel = 2;}
			else if (mapArrayDev[x][y]=="c" && waterLevel <= 3)          {waterLevel = 3;}
			else if (mapArrayDev[x][y]=="d" && waterLevel <= 4)          {waterLevel = 4;}
			else if (mapArrayDev[x][y]=="e" && waterLevel <= 5)          {waterLevel = 5;}
			else if (mapArrayDev[x][y]=="f" && waterLevel <= 6)          {waterLevel = 6;}
			else if (mapArrayDev[x][y]=="g" && waterLevel <= 7)          {waterLevel = 7;}
			else if (mapArrayDev[x][y]=="h" && waterLevel <= 8)          {waterLevel = 8;}
			else if (mapArrayDev[x][y]=="i" && waterLevel <= 9)          {waterLevel = 9;}
			else if (mapArrayDev[x][y]=="j" && waterLevel <= 10)          {waterLevel = 10;}
			else if (mapArrayDev[x][y]=="k" && waterLevel <= 11)          {waterLevel = 11;}
			else if (mapArrayDev[x][y]=="l" && waterLevel <= 12)          {waterLevel = 12;}
			else if (mapArrayDev[x][y]=="m" && waterLevel <= 13)          {waterLevel = 13;}
			else if (mapArrayDev[x][y]=="n" && waterLevel <= 14)          {waterLevel = 14;}
			else if (mapArrayDev[x][y]=="o" && waterLevel <= 15)          {waterLevel = 15;}
			else if (mapArrayDev[x][y]=="p" && waterLevel <= 16)          {waterLevel = 16;}
			else if (mapArrayDev[x][y]=="q" && waterLevel <= 17)          {waterLevel = 17;}
			else if (mapArrayDev[x][y]=="r" && waterLevel <= 18)          {waterLevel = 18;}
			else if (mapArrayDev[x][y]=="s" && waterLevel <= 19)          {waterLevel = 19;}
			else if (mapArrayDev[x][y]=="t" && waterLevel <= 20)          {waterLevel = 20;}
			else if (mapArrayDev[x][y]=="u" && waterLevel <= 21)          {waterLevel = 21;}
			else if (mapArrayDev[x][y]=="v" && waterLevel <= 22)          {waterLevel = 22;}
			else if (mapArrayDev[x][y]=="w" && waterLevel <= 23)          {waterLevel = 23;}
			else if (mapArrayDev[x][y]=="x" && waterLevel <= 24)          {waterLevel = 24;}
			else if (mapArrayDev[x][y]=="y" && waterLevel <= 25)          {waterLevel = 25;}
			else if (mapArrayDev[x][y]=="z" && waterLevel <= 26)          {waterLevel = 26;}
			else if (mapArrayDev[x][y]=="$" && waterLevel <= 27)          {waterLevel = 27;}
			else if (mapArrayDev[x][y]=="^" && waterLevel <= 28)          {waterLevel = 28;}
			else if (mapArrayDev[x][y]=="&" && waterLevel <= 29)          {waterLevel = 29;}
		}
	}
}

function continueToEditor()
{
	document.getElementById("divLoad").style.display="none";
	openEditor();
}

function initScreen()
{
//	LOAD DIV		#####################################################################################################

	document.write("<div id='divLoad' style='display:none;'>");

	masterTop = 62;
	itemHeight = 38;

//	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px; font-family:Arial; font-weight:bold; font-size:24px; color:darkblue;'>LOAD MAP</font>");
	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font style='position:absolute; top:"+(masterTop)+"px; left:"+(((windowWidth-10)/2)-515)+"px; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue;'>Paste map text array here:</font>");
	document.write("<font style='position:absolute; top:"+(masterTop+20)+"px; left:"+(((windowWidth-10)/2)-515)+"px; font-family:Arial; font-weight:bold; font-size:12px; color:darkblue;'>(Standard OR compressed.)</font>");
	document.write("<textarea id='loadMapArea' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px; width:300px; height:40px; color:darkblue;'></textarea>");
	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font style='position:absolute; top:"+(masterTop+14)+"px; left:"+(((windowWidth-10)/2)-515)+"px; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue;'>Enter map width:</font>");
	document.write("<textarea id='loadMapWidth' style='position:absolute; top:"+(masterTop+10)+"px; left:"+(((windowWidth-10)/2)-300)+"px; width:50px; height:26px; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue;'></textarea>");
	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font style='position:absolute; top:"+(masterTop+14)+"px; left:"+(((windowWidth-10)/2)-515)+"px; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue;'>Enter map height:</font>");
	document.write("<textarea id='loadMapHeight' style='position:absolute; top:"+(masterTop+10)+"px; left:"+(((windowWidth-10)/2)-300)+"px; width:50px; height:26px; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue;'></textarea>");
	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<BUTTON TYPE='button' id='buttonLoadMap' class='btn' onClick='loadMap();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:18px; color:darkblue; top:"+(masterTop+5)+"px; left:"+(((windowWidth-10)/2)-515)+"px; width:300px; height:40px;'>Load Map</button>");
	document.write("<BUTTON TYPE='button' id='buttonContinueToEditor' class='btn' onClick='continueToEditor();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:18px; color:darkblue; top:"+(masterTop+5)+"px; left:"+(((windowWidth-10)/2)-515)+"px; width:300px; height:40px; display:none;'>Continue To Editor</button>");
	document.write("<img id='continueArrowPic' src='animated_arrow_left_11.gif' style='position:absolute; top:"+(masterTop+11)+"px; left:"+(((windowWidth-10)/2)-200)+"px; height:30px; display:none;'>");
	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<textarea id='loadMapError' style='position:absolute; top:"+(masterTop+10)+"px; left:"+(((windowWidth-10)/2)-515)+"px; width:600px; height:100px; color:darkblue;'></textarea>");
	document.write("<img src='green.png' id='greenLoad' style='position:absolute; left:"+(((windowWidth-10)/2)-115)+"px; top:"+(masterTop-110)+"px; display:none;'>");
	document.write("<img src='red.png' id='redLoad' style='position:absolute; left:"+(((windowWidth-10)/2)-125)+"px; top:"+(masterTop-110)+"px; display:none;'>");
	masterTop = masterTop + itemHeight + bumpDown;
	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<table border='1' id='textLoadDisplay' style='position:absolute; left:5px; width:500px; top:"+(masterTop+30)+"px; height:500px; font-size:10px; font-weight:bold; display:none;'>");
	document.write("<tr>");
	document.write("<td id='loadDisplay' style='height:500px; width:500px; font-size:10px; line-height:10px; font-family:monospace; display:none;'>");
	document.write("</td>");
	document.write("</tr>");
	document.write("</table>");

	document.write("</div>");

//	WORLD MAP DIV		#####################################################################################################

	document.write("<div id='divWorldMap' style='display:none;'>");

	document.write("<canvas id='worldMapDisplay' border='1' width='10' height='10' style='position:absolute; left:"+(((windowWidth-10)/2)-515)+"px; top:110px; display:none;'></canvas>");
	document.write("<img id='canvasImageWorldMapDisplay' border='0' width='10' height='10' style='position:absolute; left:"+(((windowWidth-10)/2)-515)+"px; top:110px; display:block;' alt='Right click to save me!'>");

	masterTop = 62;

	itemHeight = 38;
	document.write("<BUTTON TYPE='button' id='buttonCloseWorldMap' class='btn' onClick='openEditor();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:18px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px; width:200px; height:40px;'>Close World Map</button>");
	document.write("<BUTTON TYPE='button' id='buttonTurnOffRedSquare' class='btn' onClick='redSquareOn=0; turnOffRedSquare();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:18px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px; width:300px; height:40px; display:block'>Turn OFF Red Square</button>");
	document.write("<BUTTON TYPE='button' id='buttonTurnOnRedSquare' class='btn' onClick='redSquareOn=1; turnOffRedSquare();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:18px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px; width:300px; height:40px; display:none'>Turn ON Red Square</button>");
	document.write("<textarea id='worldMapError' style='position:absolute; top:500px; left:5px; width:300px; height:100px; color:darkblue; display:none;'></textarea>");
	document.write("</div>");

//	COMPRESSED TEXT DIV		#####################################################################################################

	document.write("<div id='divCompressedText' style='display:none;'>");
	masterTop = 62;

	itemHeight = 38;
	document.write("<BUTTON TYPE='button' id='buttonCloseTextDisplay2' class='btn' onClick='closeTextDisplay();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:18px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px; width:200px; height:40px;'>Close Text Display</button>");
	document.write("<BUTTON TYPE='button' id='buttonDisplayTextMap2' class='btn' onClick='openTextDisplay();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:18px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px; width:300px; height:40px;'>Display Text Map</button>");

	document.write("<textarea id='textDisplayCompressed' style='position:absolute; top:110px; left:"+(((windowWidth-10)/2)-515)+"px; width:1040px; height:500px;'></textarea>");
	document.write("</div>");

//	DISPLAY TEXT DIV		#####################################################################################################

	document.write("<div id='divDisplayText' style='display:none;'>");
	masterTop = 62;

	itemHeight = 38;
	document.write("<BUTTON TYPE='button' id='buttonCloseTextDisplay' class='btn' onClick='closeTextDisplay();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:18px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px; width:200px; height:40px;'>Close Text Display</button>");
	document.write("<BUTTON TYPE='button' id='buttonCompressArray' class='btn' onClick='compressTextArray();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:18px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px; width:300px; height:40px;'>Compress Text Array</button>");

	document.write("<table border='1' id='textDisplayTable' style='position:absolute; left:"+(((windowWidth-10)/2)-515)+"px; width:500px; top:110px; height:500px; font-size:10px; font-weight:bold;'>");
	document.write("<tr>");
	document.write("<td id='textDisplay' style='height:500px; width:500px; font-size:10px; line-height:10px; font-family:monospace;'>");
	document.write("</td>");
	document.write("</tr>");
	document.write("</table>");

	document.write("</div>");

//	ZOOM / EDIT DIV		#####################################################################################################

	document.write("<div id='divZoomEdit' style='display:none;'>");
	editorLeft=((windowWidth/2)-218);
	leftEdge = (((windowWidth-10)/2)-515);
	editorTop=62;

	document.write("<font style='position:absolute; top:"+editorTop+"px; left:"+leftEdge+"px; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue;'>Selected terrain:</font>");
	document.write("<button type='button' width='18px' id='selectedTerrain' title='Selected Terrain' style='margin:0; border:0; padding:0; position:absolute; left:"+(leftEdge+150)+"px; top:"+editorTop+"px; width:18px; height:18px;'></button>");
	document.getElementById("selectedTerrain").style.background="url(terrain/grass.gif) no-repeat";

	document.write("<button type='button' id='editGrass' title='Grass' onClick='editorSelection=1;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+leftEdge+"px;top:100px;width:18px;height:18px;'></button>");
	document.getElementById("editGrass").style.background="url(terrain/grass.gif) no-repeat";

	document.write("<button type='button' id='editLongGrass' title='Grass (Long)' onClick='editorSelection=2;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+25)+"px;top:100px;width:18px;height:18px;'></button>");
	document.getElementById("editLongGrass").style.background="url(terrain/longgrass.gif) no-repeat";

	document.write("<button type='button' id='editScrub' title='Scrub' onClick='editorSelection=3;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+50)+"px;top:100px;width:18px;height:18px;'></button>");
	document.getElementById("editScrub").style.background="url(terrain/scrub.gif) no-repeat";

	document.write("<button type='button' id='editTrees' title='Trees' onClick='editorSelection=4;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+75)+"px;top:100px;width:18px;height:18px;'></button>");
	document.getElementById("editTrees").style.background="url(terrain/trees.gif) no-repeat";

	document.write("<button type='button' id='editForest' title='Forest' onClick='editorSelection=5;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+100)+"px;top:100px;width:18px;height:18px;'></button>");
	document.getElementById("editForest").style.background="url(terrain/forest.gif) no-repeat";

	document.write("<button type='button' id='editMixedForest' title='Mixed Forest' onClick='editorSelection=6;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+125)+"px;top:100px;width:18px;height:18px;'></button>");
	document.getElementById("editMixedForest").style.background="url(terrain/forestboreal.gif) no-repeat";

	document.write("<button type='button' id='editBoreal' title='Boreal' onClick='editorSelection=7;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+150)+"px;top:100px;width:18px;height:18px;'></button>");
	document.getElementById("editBoreal").style.background="url(terrain/boreal.gif) no-repeat";

	document.write("<button type='button' id='editHillsMeadow' title='Hills (Meadow)' onClick='editorSelection=8;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+175)+"px;top:100px;width:18px;height:18px;'></button>");
	document.getElementById("editHillsMeadow").style.background="url(terrain/hillsmeadow.gif) no-repeat";

	document.write("<button type='button' id='editLowMountains' title='Low Mountains' onClick='editorSelection=9;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+200)+"px;top:100px;width:18px;height:18px;'></button>");
	document.getElementById("editLowMountains").style.background="url(terrain/lowmountains.gif) no-repeat";

	document.write("<button type='button' id='editHighMountains' title='High Mountains' onClick='editorSelection=10;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+225)+"px;top:100px;width:18px;height:18px;'></button>");
	document.getElementById("editHighMountains").style.background="url(terrain/highmountains.gif) no-repeat";

	document.write("<button type='button' id='editIce' title='Ice' onClick='editorSelection=11;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+leftEdge+"px;top:125px;width:18px;height:18px;'></button>");
	document.getElementById("editIce").style.background="url(terrain/ice.gif) no-repeat";

	document.write("<button type='button' id='editTundra' title='Tundra' onClick='editorSelection=12;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+25)+"px;top:125px;width:18px;height:18px;'></button>");
	document.getElementById("editTundra").style.background="url(terrain/tundra.gif) no-repeat";

	document.write("<button type='button' id='editLongTundra' title='Tundra (Long)' onClick='editorSelection=13;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+50)+"px;top:125px;width:18px;height:18px;'></button>");
	document.getElementById("editLongTundra").style.background="url(terrain/tundralong.gif) no-repeat";

	document.write("<button type='button' id='editScrubPolar' title='Scrub (Polar)' onClick='editorSelection=14;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+75)+"px;top:125px;width:18px;height:18px;'></button>");
	document.getElementById("editScrubPolar").style.background="url(terrain/scrubpolar.gif) no-repeat";

	document.write("<button type='button' id='editTreesPolar' title='Trees (Polar)' onClick='editorSelection=15;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+100)+"px;top:125px;width:18px;height:18px;'></button>");
	document.getElementById("editTreesPolar").style.background="url(terrain/treespolar.gif) no-repeat";

	document.write("<button type='button' id='editBorealPolar' title='Boreal (Polar)' onClick='editorSelection=16;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+125)+"px;top:125px;width:18px;height:18px;'></button>");
	document.getElementById("editBorealPolar").style.background="url(terrain/borealpolar.gif) no-repeat";

	document.write("<button type='button' id='editHillsScrub' title='Hills (Polar)' onClick='editorSelection=17;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+150)+"px;top:125px;width:18px;height:18px;'></button>");
	document.getElementById("editHillsScrub").style.background="url(terrain/hillsscrub.gif) no-repeat";

	document.write("<button type='button' id='editRainforest' title='Rainforest' onClick='editorSelection=18;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+leftEdge+"px;top:150px;width:18px;height:18px;'></button>");
	document.getElementById("editRainforest").style.background="url(terrain/rainforest.gif) no-repeat";

	document.write("<button type='button' id='editHillsLush' title='Hills (Lush)' onClick='editorSelection=19;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+25)+"px;top:150px;width:18px;height:18px;'></button>");
	document.getElementById("editHillsLush").style.background="url(terrain/hillslush.gif) no-repeat";

	document.write("<button type='button' id='editLowMountainsLush' title='Low Mountains (Lush)' onClick='editorSelection=20;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+50)+"px;top:150px;width:18px;height:18px;'></button>");
	document.getElementById("editLowMountainsLush").style.background="url(terrain/lowmountainslush.gif) no-repeat";

	document.write("<button type='button' id='editDeepWater' title='Water (Deep)' onClick='editorSelection=21;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+leftEdge+"px;top:175px;width:18px;height:18px;'></button>");
	document.getElementById("editDeepWater").style.background="url(terrain/waterdeep.gif) no-repeat";

	document.write("<button type='button' id='editShallowWater' title='Water (Shallow)' onClick='editorSelection=22;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+25)+"px;top:175px;width:18px;height:18px;'></button>");
	document.getElementById("editShallowWater").style.background="url(terrain/watershallow.gif) no-repeat";

	document.write("<button type='button' id='editLava' title='Lava / Fire' onClick='editorSelection=23;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+50)+"px;top:175px;width:18px;height:18px;'></button>");
	document.getElementById("editLava").style.background="url(terrain/fire.gif) no-repeat";

	document.write("<button type='button' id='editDirt' title='Dirt / Burnt Ground' onClick='editorSelection=24;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+75)+"px;top:175px;width:18px;height:18px;'></button>");
	document.getElementById("editDirt").style.background="url(terrain/dirt.gif) no-repeat";

	document.write("<button type='button' id='editSwamp' title='Swamp' onClick='editorSelection=25;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+100)+"px;top:175px;width:18px;height:18px;'></button>");
	document.getElementById("editSwamp").style.background="url(terrain/swamp.gif) no-repeat";

	document.write("<button type='button' id='editSand' title='Sand / Desert' onClick='editorSelection=26;changeSelection();' style='margin:0; border:0; padding:0; position:absolute;left:"+(leftEdge+125)+"px;top:175px;width:18px;height:18px;'></button>");
	document.getElementById("editSand").style.background="url(terrain/sand.gif) no-repeat";

	//	BRUSH SIZE

	document.write("<font style='position:absolute; top:210px; left:"+leftEdge+"px; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue;'>Brush Size:</font>");

	document.write("<input id='editorBrushSizeSlider' onChange='showEditorBrushSize();' type='range' min='1' max='21' value='1' step='2' style='position:absolute; top:210px; left:"+(leftEdge+100)+"px;'>");
	document.write("<textarea id='editorBrushSizeTextArea' style='position:absolute; width:25px; top:210px; left:"+(leftEdge+265)+"px;'>1</textarea>");

	document.write("<button type='button' onClick='nw2();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue; top:350px; left:"+(((windowWidth-10)/2)-486)+"px; width:45px; height:45px;'>NW</button>");
	document.write("<button type='button' onClick='n2();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue; top:350px; left:"+(((windowWidth-10)/2)-386)+"px; width:45px; height:45px;'>N</button>");
	document.write("<button type='button' onClick='ne2();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue; top:350px; left:"+(((windowWidth-10)/2)-286)+"px; width:45px; height:45px;'>NE</button>");

	document.write("<button type='button' onClick='nw();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue; top:400px; left:"+(((windowWidth-10)/2)-436)+"px; width:45px; height:45px;'>NW</button>");
	document.write("<button type='button' onClick='n();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue; top:400px; left:"+(((windowWidth-10)/2)-386)+"px; width:45px; height:45px;'>N</button>");
	document.write("<button type='button' onClick='ne();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue; top:400px; left:"+(((windowWidth-10)/2)-336)+"px; width:45px; height:45px;'>NE</button>");

	document.write("<button type='button' onClick='w2();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue; top:450px; left:"+(((windowWidth-10)/2)-486)+"px; width:45px; height:45px;'>W</button>");
	document.write("<button type='button' onClick='w();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue; top:450px; left:"+(((windowWidth-10)/2)-436)+"px; width:45px; height:45px;'>W</button>");
	document.write("<button type='button' onClick='e();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue; top:450px; left:"+(((windowWidth-10)/2)-336)+"px; width:45px; height:45px;'>E</button>");
	document.write("<button type='button' onClick='e2();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue; top:450px; left:"+(((windowWidth-10)/2)-286)+"px; width:45px; height:45px;'>E</button>");

	document.write("<button type='button' onClick='sw();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue; top:500px; left:"+(((windowWidth-10)/2)-436)+"px; width:45px; height:45px;'>SW</button>");
	document.write("<button type='button' onClick='south();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue; top:500px; left:"+(((windowWidth-10)/2)-386)+"px; width:45px; height:45px;'>S</button>");
	document.write("<button type='button' onClick='se();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue; top:500px; left:"+(((windowWidth-10)/2)-336)+"px; width:45px; height:45px;'>SE</button>");

	document.write("<button type='button' onClick='sw2();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue; top:550px; left:"+(((windowWidth-10)/2)-486)+"px; width:45px; height:45px;'>SW</button>");
	document.write("<button type='button' onClick='south2();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue; top:550px; left:"+(((windowWidth-10)/2)-386)+"px; width:45px; height:45px;'>S</button>");
	document.write("<button type='button' onClick='se2();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue; top:550px; left:"+(((windowWidth-10)/2)-286)+"px; width:45px; height:45px;'>SE</button>");

	document.write("<button type='button' id='buttonDisplayWorldMap' onClick='redSquareOn=1; openWorldMapDisplay();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue; top:600px; left:"+(((windowWidth-10)/2)-515)+"px; width:297px; height:45px;'>Where Am I? / View Map</button>");
	document.write("<button type='button' id='buttonEditorShowText' onClick='openTextDisplay();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:16px; color:darkblue; top:650px; left:"+(((windowWidth-10)/2)-515)+"px; width:297px; height:45px;'>Display Text Map</button>");
	document.write("<textarea id='zoomEditError' style='position:absolute; top:700px; left:"+(((windowWidth-10)/2)-515)+"px; width:297px; height:100px; color:darkblue;'></textarea>");

	editorButtonCount = 0;
	for (y=1;y<=41;y++)
	{
		for (x=1;x<=41;x++)
		{
			editorButtonCount = editorButtonCount + 1;
//			document.write("<button type='button' id='editorButton"+editorButtonCount+"' onClick='editorButtonChange="+editorButtonCount+";tileChangeX="+x+";tileChangeY="+y+";changeTile();' style='margin:0; border:0; padding:0; position:absolute;left:"+editorLeft+"px;top:"+editorTop+"px;width:18px;height:18px;'>");
			document.write("<button type='button' id='editorButton"+x+","+y+"' onClick='editorButtonChange="+editorButtonCount+";tileChangeX="+x+";tileChangeY="+y+";changeTile();' style='margin:0; border:0; padding:0; position:absolute;left:"+editorLeft+"px;top:"+editorTop+"px;width:18px;height:18px;'>");
//			document.getElementById("editorButton"+editorButtonCount).style.background="url(terrain/boreal.gif) no-repeat";
			editorLeft = editorLeft + 18;
		}
		editorLeft = editorLeft - (18*41);
		editorTop = editorTop + 18;
	}

	document.write("</div>");

//	CLIMATE BUILDER DIV		#####################################################################################################

	document.write("<div id='divClimateBuilder' style='display:none;'>");

	stage2Left = (((windowWidth-10)/2)-515);

	document.write("<canvas id='climateDisplay' border='0' width='10' height='10' style='position:absolute; left:"+(stage2Left+460)+"px; top:62px; display:none;'></canvas>");
	document.write("<img id='canvasImageClimateBuilder' border='0' width='10' height='10' style='position:absolute; left:"+(stage2Left+460)+"px; top:62px; display:block;' alt='Right click to save me!'>");

	document.write("<font style='font-family:Arial; font-weight:bold; font-size:14px; color:darkblue;'>");

	document.write("<img src='waiting.gif' id='waitingClimate' style='position:absolute; left:"+(((windowWidth-10)/2)-220)+"px; top:360px; display:none;'>");
	document.write("<img src='green.png' id='greenClimate' style='position:absolute; left:"+(((windowWidth-10)/2)-220)+"px; top:360px; display:none;'>");

	masterTop = 62;

//	PLANET SPIN

	document.write("<font id='textSpin' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'>SPIN:</font>");

	itemHeight = 22;

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font id='textWestToEast' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-490)+"px;'>West to East</font>");
	document.write("<img id='picWestToEast' height='25px' src='AntiClockwiseSml.png' style='position:absolute; top:"+(masterTop-4)+"px; left:"+(((windowWidth-10)/2)-380)+"px;'>");
	document.write("<button type='button' id='buttonWestToEast' onClick='spin=0;changeSpin();' style='margin:0; border:0; padding:0; position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-280)+"px; height:20px; width:22px;'></button>");
	document.getElementById("buttonWestToEast").style.background="url(checked.png) no-repeat";

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font id='textEastToWest' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-490)+"px;'>East to West</font>");
	document.write("<img id='picEastToWest' height='25px' src='ClockwiseSml.png' style='position:absolute; top:"+(masterTop-4)+"px; left:"+(((windowWidth-10)/2)-380)+"px;'>");
	document.write("<button type='button' id='buttonEastToWest' onClick='spin=1;changeSpin();' style='margin:0; border:0; padding:0; position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-280)+"px; height:20px; width:22px;'></button>");
	document.getElementById("buttonEastToWest").style.background="url(unchecked.png) no-repeat";

//	CLIMATE

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font id='textClimate' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'>CLIMATE:</font>");

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font id='textWet' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-490)+"px;'>Wet</font>");
	document.write("<button type='button' id='buttonWet' onClick='climate=0;changeClimate();' style='margin:0; border:0; padding:0; position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-280)+"px; height:20px; width:22px;'></button>");
	document.getElementById("buttonWet").style.background="url(unchecked.png) no-repeat";

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font id='textMedium' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-490)+"px;'>Medium</font>");
	document.write("<button type='button' id='buttonMedium' onClick='climate=1;changeClimate();' style='margin:0; border:0; padding:0; position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-280)+"px; height:20px; width:22px;'></button>");
	document.getElementById("buttonMedium").style.background="url(checked.png) no-repeat";

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font id='textDry' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-490)+"px;'>Dry</font>");
	document.write("<button type='button' id='buttonDry' onClick='climate=2;changeClimate();' style='margin:0; border:0; padding:0; position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-280)+"px; height:20px; width:22px;'></button>");
	document.getElementById("buttonDry").style.background="url(unchecked.png) no-repeat";

//	TEMPERATURE

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font id='textTemperature' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'>TEMPERATURE:</font>");

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font id='textCold' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-490)+"px;'>Cold</font>");
	document.write("<button type='button' id='buttonCold' onClick='temperature=0;changeTemperature();' style='margin:0; border:0; padding:0; position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-280)+"px; height:20px; width:22px;'></button>");
	document.getElementById("buttonCold").style.background="url(unchecked.png) no-repeat";

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font id='textTemperate' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-490)+"px;'>Temperate</font>");
	document.write("<button type='button' id='buttonTemperate' onClick='temperature=1;changeTemperature();' style='margin:0; border:0; padding:0; position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-280)+"px; height:20px; width:22px;'></button>");
	document.getElementById("buttonTemperate").style.background="url(checked.png) no-repeat";

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font id='textHot' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-490)+"px;'>Hot</font>");
	document.write("<button type='button' id='buttonHot' onClick='temperature=2;changeTemperature();' style='margin:0; border:0; padding:0; position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-280)+"px; height:20px; width:22px;'></button>");
	document.getElementById("buttonHot").style.background="url(unchecked.png) no-repeat";

//	DESERT DEPTH

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font id='textDesertDepth' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'>DESERT BREDTH:</font>");

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font id='textAnkles' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-490)+"px;'>Ankles</font>");
	document.write("<button type='button' id='buttonAnkles' onClick='desertDepth=0;changeDesertDepth();' style='margin:0; border:0; padding:0; position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-280)+"px; height:20px; width:22px;'></button>");
	document.getElementById("buttonAnkles").style.background="url(unchecked.png) no-repeat";

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font id='textWaist' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-490)+"px;'>Waist</font>");
	document.write("<button type='button' id='buttonWaist' onClick='desertDepth=1;changeDesertDepth();' style='margin:0; border:0; padding:0; position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-280)+"px; height:20px; width:22px;'></button>");
	document.getElementById("buttonWaist").style.background="url(checked.png) no-repeat";

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font id='textNeck' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-490)+"px;'>Neck</font>");
	document.write("<button type='button' id='buttonNeck' onClick='desertDepth=2;changeDesertDepth();' style='margin:0; border:0; padding:0; position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-280)+"px; height:20px; width:22px;'></button>");
	document.getElementById("buttonNeck").style.background="url(unchecked.png) no-repeat";

	//	Load un-climatologicalized map
	//	Which way does planet spin?
	//	Wet or dry planet?
	//	Cool or hot planet?

//	ADD CLIMATOLOGICAL GOODNESS

	masterTop = masterTop + itemHeight + bumpDown;
	itemHeight = 38;
	document.write("<BUTTON TYPE='button' id='buttonAddClimate2' class='btn' onClick='addClimatologicalGoodness();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:18px; color:darkblue; top:"+masterTop+"px; left:"+stage2Left+"px; width:430px; height:40px;'>Add Climatological Goodness</button>");

//	ADD DESERTS

	masterTop = masterTop + itemHeight + bumpDown;
	itemHeight = 38;
	document.write("<BUTTON TYPE='button' id='buttonAddDeserts' class='btn' onClick='desertCreation=1;' style='position:absolute; font-family:Arial; font-weight:bold; font-size:18px; color:darkblue; top:"+masterTop+"px; left:"+stage2Left+"px; width:430px; height:40px;'>Create Deserts</button>");
	buttonAddDeserts.disabled=true;

//	ZOOM IN / EDIT

	masterTop = masterTop + itemHeight + bumpDown;
	itemHeight = 38;
	document.write("<BUTTON TYPE='button' id='buttonZoomEdit' class='btn' onClick='openEditor();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:18px; color:darkblue; top:"+masterTop+"px; left:"+stage2Left+"px; width:430px; height:40px;'>Zoom In / Edit World</button>");
	buttonZoomEdit.disabled=true;

//	DISPLAY TEXT

	masterTop = masterTop + itemHeight + bumpDown;
	itemHeight = 38;
	document.write("<BUTTON TYPE='button' id='buttonOpenTextDisplay' class='btn' onClick='openTextDisplay();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:18px; color:darkblue; top:"+masterTop+"px; left:"+stage2Left+"px; width:430px; height:40px;'>Display Text Map</button>");

//	CLIMATEBUILDERERROR FIELD

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<textarea id='climateBuilderError' style='position:absolute; top:"+(masterTop+2)+"px; left:"+stage2Left+"px; width:430px; height:200px; color:darkblue;'></textarea>");

	document.write("</font>");
	document.write("</div>");

//	HEADER DIV	#####################################################################################################

	masterTop = 5;
	document.write("<div id='divHeader' style='display:none;'>");

//	TITLE

	itemHeight = 36;
	document.write("<img src='rb2.png' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px; height:40px;'>");
	masterTop = masterTop + itemHeight + bumpDown;
	itemHeight = 0;
	document.write("<a href='http://www.CrashRhinoceros.com' target='_blank'><img src='crtitle6.png' id='cr' style='position:absolute; top:22px; left:"+(((windowWidth-10)/2)+245)+"px; width:230px;'></a>");
	document.write("<a href='http://en.wikipedia.org/wiki/Rhinoceros' target='_blank'><img src='rhino.png' id='rhino' style='position:absolute; top:15px; left:"+(((windowWidth-10)/2)+480)+"px; width:45px;'></a>");
	masterTop = masterTop + itemHeight + bumpDown;
	itemHeight = 5;
	document.write("<img src='hline.png' id='hline' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px; width:1040px; height:2px;'>");

//	ABOUT BUTTON

	document.write("<BUTTON TYPE='button' id='buttonAbout' Value='About' class='btn' onClick='about();' style='position:absolute; top:14px; font-size:18px; color:darkblue; left:"+((windowWidth / 2)+10)+"px; height:30px; width:130px;'><b>About</b></BUTTON>");

//	INSTRUCTIONS BUTTON

	document.write("<BUTTON TYPE='button' id='buttonInstructions' class='btn' onClick='instructions();' style='position:absolute; top:14px; font-size:18px; color:darkblue; left:"+((windowWidth / 2)-140)+"px; height:30px; width:130px;'><b>Instructions</b></BUTTON>");
	document.write("<img id='aboutArrowPic' src='animated_arrow_left_11.gif' style='position:absolute; top:15px; left:"+((windowWidth / 2)+150)+"px; height:30px;'>");
	document.write("</div>");

//	BUILDER DIV		#####################################################################################################

	masterTop = masterTop + itemHeight + bumpDown;

	document.write("<div id='divBuilder' style='display:none;'>");
	document.write("<font style='font-family:Arial; font-weight:bold; font-size:14px; color:darkblue;'>");
	itemHeight = 14;
	document.write("<font style='position:absolute; top:80px; left:"+(((windowWidth-10)/2)-515)+"px;'>PRESETS:</font>");
	itemHeight = 30;
	document.write("<BUTTON TYPE='button' id='buttonSetPreset' Value='Set' class='btn' onClick='setPreset()' style='position:absolute; font-family:Arial; font-weight:bold; font-size:10px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-415)+"px; width:95px; height:30px;'>Set</button>");
	document.write("<BUTTON TYPE='button' id='buttonCancelSetPreset' Value='Cancel' class='btn' onClick='cancelSetPreset()' style='position:absolute; font-family:Arial; font-weight:bold; font-size:14px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-415)+"px; width:95px; height:30px; display:none;'>CANCEL</button>");

	document.write("<BUTTON TYPE='button' id='buttonPreset1' Value='Preset 1' class='btn' onClick='activePreset = 1; setThePreset()' style='position:absolute; font-family:Arial; font-weight:bold; font-size:10px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-315)+"px; width:95px; height:30px;'>Preset 1</button>");
	document.write("<BUTTON TYPE='button' id='buttonPreset2' Value='Preset 2' class='btn' onClick='activePreset = 2; setThePreset()' style='position:absolute; font-family:Arial; font-weight:bold; font-size:10px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-215)+"px; width:95px; height:30px;'>Preset 2</button>");
	document.write("<BUTTON TYPE='button' id='buttonPreset3' Value='Preset 3' class='btn' onClick='activePreset = 3; setThePreset()' style='position:absolute; font-family:Arial; font-weight:bold; font-size:10px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-115)+"px; width:95px; height:30px;'>Preset 3</button>");
	itemHeight = 30;
	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<BUTTON TYPE='button' id='buttonRestorePreset' Value='Restore' class='btn' onClick='restorePreset()' style='position:absolute; font-family:Arial; font-weight:bold; font-size:10px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-415)+"px; width:95px; height:30px;'>Restore</button>");
	document.write("<BUTTON TYPE='button' id='buttonCancelRestorePreset' Value='Cancel' class='btn' onClick='cancelRestorePreset()' style='position:absolute; font-family:Arial; font-weight:bold; font-size:14px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-415)+"px; width:95px; height:30px; display:none;'>CANCEL</button>");

	document.write("<BUTTON TYPE='button' id='buttonPreset4' Value='Preset 4' class='btn' onClick='activePreset = 4; setThePreset()' style='position:absolute; font-family:Arial; font-weight:bold; font-size:10px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-315)+"px; width:95px; height:30px;'>Preset 4</button>");
	document.write("<BUTTON TYPE='button' id='buttonPreset5' Value='Preset 5' class='btn' onClick='activePreset = 5; setThePreset()' style='position:absolute; font-family:Arial; font-weight:bold; font-size:10px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-215)+"px; width:95px; height:30px;'>Preset 5</button>");
	document.write("<BUTTON TYPE='button' id='buttonPreset6' Value='Preset 6' class='btn' onClick='activePreset = 6; setThePreset()' style='position:absolute; font-family:Arial; font-weight:bold; font-size:10px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-115)+"px; width:95px; height:30px;'>Preset 6</button>");

	masterTop = masterTop + itemHeight + bumpDown;
//	itemHeight = 2;
//	document.write("<img src='hline.png' id='hline' style='position:absolute; top:"+masterTop+"px; left:5px; width:"+(windowWidth-10)+"px; height:2px;'>");

//	WORLD WIDTH

//	masterTop = masterTop + itemHeight + bumpDown;
	itemHeight = 19;
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'>World Width:</font>");
	document.write("<input id='widthSlider' onChange='showWidth();' top='500px' type='range' min='100' max='1000' value='500' step='50' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px;'>");
	document.write("<textarea id='widthTextArea' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-135)+"px;'>500</textarea>");
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-100)+"px;'>Tiles Wide</font>");
	document.write("<img src='exclamation20.png' id='exclamationWidth' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-15)+"px; display:none;'>");

//	WORLD HEIGHT

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'>World Height:</font>");
	document.write("<input id='heightSlider' onChange='showHeight();' top='500px' type='range' min='100' max='1000' value='500' step='50' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px;'>");
	document.write("<textarea id='heightTextArea' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-135)+"px;'>500</textarea>");
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-100)+"px;'>Tiles High</font>");
	document.write("<img src='exclamation20.png' id='exclamationHeight' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-15)+"px; display:none;'>");

//	ELEVATIONS

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'>Elevations:</font>");
	document.write("<input id='elevationsSlider' onChange='showElevations();' top='500px' type='range' min='1' max='30' value='30' step='1' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px;'>");
	document.write("<textarea id='elevationsTextArea' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-135)+"px;'>30</textarea>");
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-100)+"px;'>Elevations</font>");

//	# OF MOUNTAIN RANGES

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'># of Mountain Ranges:</font>");
	document.write("<input id='numMtnRangesSlider' onChange='showNumMtnRanges();' top='500px' type='range' min='0' max='100' value='30' step='1' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px;'>");
	document.write("<textarea id='numMtnRangesTextArea' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-135)+"px;'>30</textarea>");
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-100)+"px;'>Mountains</font>");

//	MAX MOUNTAIN RANGE LENGTH

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'>Max Mountain Range Length:</font>");
	document.write("<input id='maxMtnLengthSlider' onChange='showMaxMtnLength();' top='500px' type='range' min='1' max='100' value='10' step='1' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px;'>");
	document.write("<textarea id='maxMtnLengthTextArea' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-135)+"px;'>10</textarea>");
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-100)+"px;'>% of Map</font>");

//	MAX MOUNTAIN RANGE GIRTH

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'>Max Mountain Range Girth:</font>");
	document.write("<input id='maxMtnGirthSlider' onChange='showMaxMtnGirth();' top='500px' type='range' min='1' max='21' value='3' step='1' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px;'>");
	document.write("<textarea id='maxMtnGirthTextArea' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-135)+"px;'>3</textarea>");
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-100)+"px;'>Tiles</font>");

//	# OF HILL RANGES

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'># of Hill Ranges:</font>");
	document.write("<input id='numHillRangesSlider' onChange='showNumHillRanges();' top='500px' type='range' min='0' max='200' value='25' step='1' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px;'>");
	document.write("<textarea id='numHillRangesTextArea' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-135)+"px;'>25</textarea>");
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-100)+"px;'>Hills</font>");

//	MAX HILL RANGE LENGTH

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'>Max Hill Range Length:</font>");
	document.write("<input id='maxHillLengthSlider' onChange='showMaxHillLength();' top='500px' type='range' min='1' max='100' value='10' step='1' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px;'>");
	document.write("<textarea id='maxHillLengthTextArea' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-135)+"px;'>10</textarea>");
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-100)+"px;'>% of Map</font>");

//	MAX HILL RANGE GIRTH

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'>Max Hill Range Girth:</font>");
	document.write("<input id='maxHillGirthSlider' onChange='showMaxHillGirth();' top='500px' type='range' min='1' max='21' value='3' step='1' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px;'>");
	document.write("<textarea id='maxHillGirthTextArea' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-135)+"px;'>3</textarea>");
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-100)+"px;'>Tiles</font>");

//	HILL RANGE CURVYNESS

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<a href='http://images.google.com/search?&hl=en&safe=on&tbm=isch&biw=1566&bih=922&q=curvy' target='blank'><font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'>Hill Range Curvyness:</font></a>");
	document.write("<input id='hillCurvynessSlider' onChange='showHillCurvyness();' top='500px' type='range' min='0' max='100' value='80' step='1' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px;'>");
	document.write("<textarea id='hillCurvynessTextArea' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-135)+"px;'>80</textarea>");
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-100)+"px;'>% Curvy</font>");

//	CONFINE HILLS

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<a href='#' onClick='jealousGod();'><font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'>Confine hills to selected areas <font style='font-weight:normal; font-size:9px'>(What's it like to be a jealous god?)</font>:</font></a>");
	document.write("<button type='button' id='hillsConfined' onClick='hillsConfined();' style='margin:0; border:0; padding:0; position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-130)+"px; height:20px; width:22px;'></button>");
	document.write("<img src='run.gif' id='rungif' style='position:absolute; top:"+(masterTop-4)+"px; left:"+(((windowWidth-10)/2)-100)+"px; display:none;'>");
	document.getElementById("hillsConfined").style.background="url(checked.png) no-repeat";
//	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-100)+"px;'>% Curvy</font>");

//	HILLS ARE WILD AND FREE

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<a href='http://en.wikipedia.org/wiki/My_side_of_the_mountain' target='blank'><font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'>Let the hills run wild and free <font style='font-weight:normal; font-size:9px'>(as Nature intended)</font>:</font></a>");
	document.write("<button type='button' id='hillsWild' onClick='hillsWild();' style='margin:0; border:0; padding:0; position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-130)+"px; height:20px; width:22px;'></button>");
	document.getElementById("hillsWild").style.background="url(unchecked.png) no-repeat";
//	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-100)+"px;'>% Curvy</font>");

//	HILL RANGE MULTIPLIER

//	masterTop = masterTop + itemHeight + bumpDown;
//	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'>Hill Range Multiplier:</font>");
//	document.write("<input id='hillMultiplierSlider' onChange='showHillMultiplier();' type='range' min='100' max='200' value='110' step='1' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px;'>");
//	document.write("<textarea id='hillMultiplierTextArea' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-135)+"px;'>110</textarea>");
//	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-100)+"px;'>% / Level</font>");

//	LAND SLOPE SPREAD

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<a href='http://en.wikipedia.org/wiki/Mountain' target='blank'><font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'>Land Slope Spread:</font></a>");
	document.write("<input id='landSlopeSlider' onChange='showLandSlope();' top='500px' type='range' min='100' max='200' value='100' step='1' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px;'>");
	document.write("<textarea id='landSlopeTextArea' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-135)+"px;'>108</textarea>");
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-100)+"px;'>% Spread</font>");

//	# OF VOLCANOES

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'># of Volcanoes:</font>");
	document.write("<input id='numVolcanoesSlider' onChange='showNumVolcanoes();' top='500px' type='range' min='0' max='100' value='6' step='1' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px;'>");
	document.write("<textarea id='numVolcanoesTextArea' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-135)+"px;'>6</textarea>");
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-100)+"px;'>Volcanoes</font>");

//	MAX VOLCANO SIZE

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<a href='http://en.wikipedia.org/wiki/Yellowstone_Caldera' target='blank'><font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'>Max Volcano Size:</font></a>");
	document.write("<input id='maxVolcanoSizeSlider' onChange='showMaxVolcanoSize();' top='500px' type='range' min='4' max='100' value='8' step='1' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px;'>");
	document.write("<textarea id='maxVolcanoSizeTextArea' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-135)+"px;'>8</textarea>");
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-100)+"px;'>Tiles</font>");

//	LAND MASS UNIFORMITY

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'>Land Mass Uniformity:</font>");
	document.write("<input id='landUniformitySlider' onChange='showLandUniformity();' top='500px' type='range' min='1' max='100' value='25' step='1' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-300)+"px;'>");
	document.write("<textarea id='landUniformityTextArea' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-135)+"px;'>25</textarea>");
	document.write("<font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-100)+"px;'>% Uniformity</font>");

//	SLOPE DISPLAY

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<a href='http://www.google.com/search?t=&q=mount+fuji&hl=en&tbm=isch&biw=1566&bih=922' target='blank'><font style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px;'>Mountain Slope Contour:</font></a>");

	masterTop = masterTop + itemHeight + bumpDown;
	itemHeight=33;
	document.write("<canvas id='slopeDisplay' border='0' width='500' height='30' top='600' style='position:absolute; border:0px solid #d3d3d3; left:"+(((windowWidth-10)/2)-515)+"px; top:"+masterTop+"px; display:block;'>Your browser does not support the HTML5 canvas tag.</canvas>");

//	BUILDER ERROR FIELD

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<textarea id='builderError' style='position:absolute; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)-515)+"px; width:500px; height:166px; color:darkblue;'></textarea>");

	masterTop = 61;
	itemHeight = 30;

//	DRAW / ERASE LAND

	document.write("<BUTTON TYPE='button' id='buttonDrawLand' class='btn' onClick='toggleDrawLand()' style='position:absolute; font-family:Arial; font-weight:bold; font-size:10px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)+25)+"px; width:80px; height:30px;'>Draw Land</button>");
	document.write("<BUTTON TYPE='button' id='buttonEraseLand' class='btn' onClick='toggleEraseLand()' style='position:absolute; font-family:Arial; font-weight:bold; font-size:10px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)+110)+"px; width:80px; height:30px;'>Erase Land</button>");

//	BRUSH SIZE

	document.write("<font style='position:absolute; top:"+(masterTop+8)+"px; left:"+(((windowWidth-10)/2)+195)+"px;'>Brush Size:</font>");
	document.write("<input id='brushSizeSlider' onChange='showBrushSize();' type='range' min='1' max='21' value='1' step='2' style='position:absolute; top:"+(masterTop+6)+"px; left:"+(((windowWidth-10)/2)+280)+"px;'>");
	document.write("<textarea id='brushSizeTextArea' style='position:absolute; top:"+(masterTop+6)+"px; left:"+(((windowWidth-10)/2)+445)+"px;'>1</textarea>");
	document.write("<font style='position:absolute; top:"+(masterTop+8)+"px; left:"+(((windowWidth-10)/2)+480)+"px;'>Tiles</font>");

//	SELECT / CLEAR ALL

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<BUTTON TYPE='button' id='buttonSelectAll' Value='Plot Land' class='btn' onClick='selectAll()' style='position:absolute; font-family:Arial; font-weight:bold; font-size:10px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)+25)+"px; width:80px; height:30px;'>Select All</button>");
	document.write("<BUTTON TYPE='button' id='buttonClearAll' Value='Plot Land' class='btn' onClick='clearAll()' style='position:absolute; font-family:Arial; font-weight:bold; font-size:10px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)+110)+"px; width:80px; height:30px;'>Clear All</button>");

//	RANDOM LAND

	document.write("<BUTTON TYPE='button' id='buttonRandomLand' Value='Plot Land' class='btn' onClick='createRandomLand()' style='position:absolute; font-family:Arial; font-weight:bold; font-size:10px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)+195)+"px; width:80px; height:30px;'>Random Land</button>");
	document.write("<input id='randomLandSlider' onChange='showRandomLand();' type='range' min='1' max='100' value='30' step='1' style='position:absolute; top:"+(masterTop+6)+"px; left:"+(((windowWidth-10)/2)+280)+"px;'>");
	document.write("<textarea id='randomLandTextArea' style='position:absolute; top:"+(masterTop+6)+"px; left:"+(((windowWidth-10)/2)+445)+"px;'>30</textarea>");
	document.write("<font style='position:absolute; top:"+(masterTop+8)+"px; left:"+(((windowWidth-10)/2)+480)+"px;'>% Land</font>");

	masterTop = masterTop + itemHeight + bumpDown;

//	checkboxX = 550;
	checkboxX = ((windowWidth-10) / 2) + 25;
	checkboxY = masterTop;
	checkboxSize = 10;

	itemHeight = checkboxSize * 50;

	checkboxNumber = 0;

	for (checkboxCountB=1;checkboxCountB<=50;checkboxCountB++)
	{
		for (checkboxCountA=1;checkboxCountA<=50;checkboxCountA++)
		{
			checkboxNumber = checkboxNumber + 1;

			document.write("<button type='button' id='checkboxx"+checkboxCountA+"y"+checkboxCountB+"' onClick='changeX="+checkboxCountA+"; changeY="+checkboxCountB+" ;changeBox()' style='margin:0; border:0; padding:0; position:absolute; top:"+(checkboxY)+"px; left:"+(checkboxX)+"px; height:"+checkboxSize+"px; width:"+checkboxSize+"px;'></button>");
			document.getElementById("checkboxx"+checkboxCountA+"y"+checkboxCountB).style.background="url(boxblue10.png) no-repeat";

			checkboxX = checkboxX + checkboxSize;
		}
		checkboxY = checkboxY + checkboxSize;
//		checkboxX = 550;
		checkboxX = ((windowWidth-10) / 2) + 25;
	}

	masterTop = masterTop + itemHeight + bumpDown;

//	document.write("<BUTTON TYPE='button' id='buttonClearLocalStorage' Value='Plot Land' class='btn' onClick='clearLocalStorage()' style='position:absolute; font-family:Arial; font-weight:bold; font-size:10px; color:darkblue; top:"+masterTop+"px; left:550px; width:80px; height:30px;'>Clear localStorage</button>");

	document.write("<BUTTON TYPE='button' id='run' Value='Plot Land' class='btn' onClick='doBuildWorld=1;' style='position:absolute; font-family:Arial; font-weight:bold; font-size:36px; color:darkblue; top:"+masterTop+"px; left:"+(((windowWidth-10)/2)+100)+"px; width:350px; height:100px;'>BUILD WORLD</button>");

	buttonPreset1.disabled=true;
//	builderError.value += "\nPreset 1 disabled.";
	buttonDrawLand.disabled=true;

//	builderError.value += "\nPreset 1 loaded";

	setGrowthCurve();
	checkAndLoadPreset1();

	document.write("</font>");
	document.write("</div>");

//	CONSTRUCTOR DIV		#####################################################################################################

	document.write("<div id='divConstructor' style='display:none;'>");
	document.write("<img src='waiting.gif' id='waiting' style='position:absolute; left:"+(((windowWidth-10)/2)-45)+"px; top:100px; '>");
	document.write("<img src='green.png' id='green' style='position:absolute; left:"+(((windowWidth-10)/2)-45)+"px; top:100px; display:none'>");
	document.write("<img src='red.png' id='red' style='position:absolute; left:"+(((windowWidth-10)/2)-55)+"px; top:100px; display:none'>");
	document.write("<textarea id='constructorError' style='position:absolute; top:250px; left:"+(((windowWidth-10)/2)-245)+"px; width:500px; height:300px; color:darkblue;'></textarea>");
	document.write("<BUTTON TYPE='button' id='buttonProceed' class='btn' onClick='openSecondStage();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:24px; color:darkblue; top:600px; left:"+(((windowWidth-10)/2)-120)+"px; width:250px; height:75px; display:none;'>CONTINUE</button>");
	document.write("<BUTTON TYPE='button' id='buttonReturnToBuilder' class='btn' onClick='returnToBuilder();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:24px; color:darkblue; top:600px; left:"+(((windowWidth-10)/2)-120)+"px; width:250px; height:75px; display:none;'>GO BACK</button>");

	document.write("</div>");

//	CONSTRUCTOR STAGE 2 DIV		#####################################################################################################

	stage2Left = (((windowWidth-10)/2)-515);

	document.write("<div id='divConstructorStage2' style='display:none;'>");

	document.write("<canvas id='drawDisplay' border='0' width='10' height='10' style='position:absolute; left:"+(stage2Left+460)+"px; top:62px; display:none;'></canvas>");
	document.write("<img id='canvasImageConstructor' border='0' width='10' height='10' style='position:absolute; left:"+(stage2Left+460)+"px; top:62px; display:block;' alt='Right click to save me!'>");
	document.write("<font style='font-family:Arial; font-weight:bold; font-size:14px; color:darkblue;'>");

	masterTop = 62;

//	WATER LEVEL

//	masterTop = masterTop + itemHeight + bumpDown;
	itemHeight = 28;
	document.write("<BUTTON TYPE='button' id='buttonChangeWaterLevel' class='btn' onClick='changeWaterLevel();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:14px; color:darkblue; top:"+masterTop+"px; left:"+stage2Left+"px; width:140px; height:30px; display:block;'>Set Water Level</button>");
	document.write("<input id='waterLevelSlider' onChange='showWaterLevel();' type='range' min='1' max='31' value='"+waterLevel+"' step='1' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+150)+"px;'>");
	document.write("<textarea id='waterLevelTextArea' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+315)+"px;'>"+waterLevel+"</textarea>");

//	EDIT LAND

//	masterTop = masterTop + itemHeight + bumpDown;
//	itemHeight = 28;
//	document.write("<BUTTON TYPE='button' id='buttonEditLand' class='btn' onClick='editLand();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:14px; color:darkblue; top:"+masterTop+"px; left:"+stage2Left+"px; width:140px; height:30px; display:block;'>Edit Land</button>");
//	document.write("<input id='waterLevelSlider' onChange='showWaterLevel();' type='range' min='1' max='31' value='"+waterLevel+"' step='1' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+150)+"px;'>");
//	document.write("<textarea id='waterLevelTextArea' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+315)+"px;'>"+waterLevel+"</textarea>");

//	SHALLOWS

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<BUTTON TYPE='button' id='buttonAddShallows' class='btn' onClick='shallowsCount=0;doAddShallows=1;' style='position:absolute; font-family:Arial; font-weight:bold; font-size:14px; color:darkblue; top:"+masterTop+"px; left:"+stage2Left+"px; width:140px; height:30px; display:block;'>Add Shallows</button>");
	document.write("<input id='addShallowsSlider' onChange='showNumShallows();' type='range' min='0' max='10' value='1' step='1' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+150)+"px;'>");
	document.write("<textarea id='addShallowsTextArea' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+315)+"px;'>1</textarea>");
	document.write("<font id='textShallows' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+350)+"px;'>Tiles Deep</font>");

//	BEACHES

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<BUTTON TYPE='button' id='buttonAddBeaches' class='btn' onClick='beachesCount=0;doAddBeaches=1;' style='position:absolute; font-family:Arial; font-weight:bold; font-size:14px; color:darkblue; top:"+masterTop+"px; left:"+stage2Left+"px; width:140px; height:30px; display:block;'>Add Beaches</button>");
	document.write("<input id='addBeachesSlider' onChange='showNumBeaches();' type='range' min='0' max='10' value='"+numBeaches+"' step='1' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+150)+"px;'>");
	document.write("<textarea id='addBeachesTextArea' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+315)+"px;'>"+numBeaches+"</textarea>");
	document.write("<font id='textBeaches' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+350)+"px;'>Tiles Deep</font>");

//	RIVER / LAVA WIDTH

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font id='textRiverWidth' style='position:absolute; top:"+(masterTop+5)+"px; left:"+stage2Left+"px;'>River / Lava Width:</font>");
	document.write("<button type='button' id='buttonRiverNarrow' onClick='riversNarrow=1; changeRiverWidth()' style='margin:0; border:0; padding:0; position:absolute; top:"+(masterTop+2)+"px; left:"+(stage2Left+155)+"px; height:20px; width:22px;'></button>");
	document.write("<font id='textRiversRegular' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+190)+"px;'>Regular</font>");
	document.write("<button type='button' id='buttonRiverWide' onClick='riversNarrow=0; changeRiverWidth()' style='margin:0; border:0; padding:0; position:absolute; top:"+(masterTop+2)+"px; left:"+(stage2Left+315)+"px; height:20px; width:22px;'></button>");
	document.write("<font id='textRiversWide' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+350)+"px;'>Wide</font>");
	document.getElementById("buttonRiverNarrow").style.background="url(checked.png) no-repeat";
	document.getElementById("buttonRiverWide").style.background="url(unchecked.png) no-repeat";

//	LAVA CURVYNESS

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font id='buttonLavaCurvyness' style='position:absolute; top:"+(masterTop+5)+"px; left:"+stage2Left+"px;'>Lava Curvyness:</font>");
	document.write("<input id='lavaCurvynessSlider' onChange='showLavaCurvyness();' type='range' min='0' max='100' value='"+lavaCurvyness+"' step='1' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+150)+"px;'>");
	document.write("<textarea id='lavaCurvynessTextArea' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+315)+"px;'>"+lavaCurvyness+"</textarea>");
	document.write("<font id='textLavaCurvyness' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+350)+"px;'>% Curvy</font>");

//	LAVA THICKNESS

//	masterTop = masterTop + itemHeight + bumpDown;
//	document.write("<font style='position:absolute; top:"+(masterTop+5)+"px; left:"+stage2Left+"px;'>Lava Flow Width:</font>");

//	ADD LAVA FLOWS

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<BUTTON TYPE='button' id='buttonAddLavaFlows' class='btn' onClick='buttonAddLavaFlow=1;' style='position:absolute; font-family:Arial; font-weight:bold; font-size:14px; color:darkblue; top:"+masterTop+"px; left:"+stage2Left+"px; width:140px; height:30px; display:block;'>Add Lava Flows</button>");
	document.write("<input id='addLavaFlowsSlider' onChange='showNumLavaFlows();' type='range' min='0' max='100' value='"+numLavaFlows+"' step='1' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+150)+"px;'>");
	document.write("<textarea id='addLavaFlowsTextArea' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+315)+"px;'>"+numLavaFlows+"</textarea>");
	document.write("<font id='textLavaFlows' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+350)+"px;'>Flows</font>");

//	RIVER CURVYNESS

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<font id='buttonRiverCurvyness' style='position:absolute; top:"+(masterTop+5)+"px; left:"+stage2Left+"px;'>River Curvyness:</font>");
	document.write("<input id='riverCurvynessSlider' onChange='showRiverCurvyness();' type='range' min='0' max='100' value='"+riverCurvyness+"' step='1' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+150)+"px;'>");
	document.write("<textarea id='riverCurvynessTextArea' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+315)+"px;'>"+riverCurvyness+"</textarea>");
	document.write("<font id='textRiverCurvyness' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+350)+"px;'>% Curvy</font>");

//	RIVERS

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<BUTTON TYPE='button' id='buttonAddRivers' class='btn' onClick='thisIsLava=0; buttonAddRiver=1;' style='position:absolute; font-family:Arial; font-weight:bold; font-size:14px; color:darkblue; top:"+masterTop+"px; left:"+stage2Left+"px; width:140px; height:30px; display:block;'>Add Rivers</button>");
	document.write("<input id='addRiversSlider' onChange='showNumRivers();' type='range' min='0' max='100' value='"+numRivers+"' step='1' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+150)+"px;'>");
	document.write("<textarea id='addRiversTextArea' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+315)+"px;'>"+numRivers+"</textarea>");
	document.write("<font id='textRivers' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+350)+"px;'>Rivers</font>");

//	ERASE CHANGES

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<BUTTON TYPE='button' id='buttonEraseChanges' class='btn' onClick='eraseMods=1;changeWaterLevel();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:14px; color:darkblue; top:"+masterTop+"px; left:"+stage2Left+"px; width:140px; height:30px; display:block;'>Erase Changes</button>");

//	DISPLAY TEXT ARRAY

//	masterTop = masterTop + itemHeight + bumpDown;
//	itemHeight = 28;
//	document.write("<BUTTON TYPE='button' id='buttonDisplayText' class='btn' onClick='displayTextArray();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:14px; color:darkblue; top:"+masterTop+"px; left:"+(stage2Left+150)+"px; width:197px; height:30px; display:block;'>Display / Copy Text Array</button>");

//	COPY FORMATTED TEXT TO CLIPBOARD

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<BUTTON TYPE='button' id='buttonCopyTextArray' class='btn' onClick='copyTextDisplay();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:14px; color:darkblue; top:"+masterTop+"px; left:"+stage2Left+"px; width:210px; height:30px;'>Copy Formatted Array</button>");

//	COPY UNFORMATTED TEXT TO CLIPBOARD

//	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<BUTTON TYPE='button' id='buttonCopyTextArrayNCR' class='btn' onClick='copyTextDisplayNCR();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:14px; color:darkblue; top:"+masterTop+"px; left:"+(stage2Left+220)+"px; width:210px; height:30px;'>Copy Unformatted Array</button>");

//	ADD CLIMATOLOGICAL GOODNESS

	masterTop = masterTop + itemHeight + bumpDown;
	itemHeight = 38;
	document.write("<BUTTON TYPE='button' id='buttonAddClimate' class='btn' onClick='openClimateBuilder();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:18px; color:darkblue; top:"+masterTop+"px; left:"+stage2Left+"px; width:430px; height:40px;'>Set Base Terrain</button>");

//	STAGE2ERROR FIELD

	masterTop = masterTop + itemHeight + bumpDown;
	document.write("<textarea id='stage2Error' style='position:absolute; top:"+(masterTop+2)+"px; left:"+stage2Left+"px; width:430px; height:200px; color:darkblue;'></textarea>");

//	document.write("<table border='0' id='textDisplayTable' style='position:absolute; left:550px; width:500px; top:100px; height:500px; font-size:10px; font-weight:bold; display:none;'>");
//	document.write("<tr>");
//	document.write("<td id='textDisplay' style='height:500px; width:500px; font-size:10px; line-height:10px; font-family:monospace;'>");
//	document.write("</td>");
//	document.write("</tr>");
//	document.write("</table>");

	masterTop = 410;
	itemHeight = 0;


	document.write("</font>");
	document.write("</div>");

//	INSTRUCTIONS DIV		#####################################################################################################

	instructionsLeft = (((windowWidth-10)/2)-515);

	document.write("<div id='divInstructions' style='display:none;'>");

	document.write("<font style='font-family:Arial; font-weight:bold; font-size:14px; color:darkblue;'>");

	document.write("<table border='1' id='tableInstructions' style='position:absolute; left:"+instructionsLeft+"px; width:1040px; top:100px; height:500px;'>");
	document.write("<tr>");
	document.write("<td id='instructionsDisplay' valign='top' style='height:500px; width:500px; padding:10px;'>");
	document.write("</td>");
	document.write("</tr>");
	document.write("</table>");

	document.write("</font>");

	masterTop = 62;

//	CLOSE BUTTON

	itemHeight = 28;
	document.write("<BUTTON TYPE='button' id='buttonCloseInstructions' class='btn' onClick='closeInstructions();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:14px; color:darkblue; top:"+masterTop+"px; left:"+instructionsLeft+"px; width:140px; height:30px; display:block;'>Close</button>");

	document.write("</div>");

	instructionsString = "";
//	instructionsString=instructionsString+"<div align='center' width='600px'>";
	instructionsString=instructionsString+"<font style='color:darkblue; font-weight:bold; font-size:14px;'>";
	instructionsString=instructionsString+"<font style='font-size:18px;'>So you want to play a god...<br>&nbsp;<br></font>";
	instructionsString=instructionsString+"You may open and view these instructions at any time, from any point in the world-building process.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"<hr><br>";
	instructionsString=instructionsString+"<u>OVERVIEW</u><br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"<table style='position:relative; left:20px; width:980px; color:darkblue; font-weight:bold; font-size:14px;'><tr><td>";
	instructionsString=instructionsString+"There are five main processes in Rhino Builder:<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"<u>Building</u> - The base world is built. User designates locations and properties for land creation.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"<u>Adding Features</u> - Shallow zones, beaches, rivers and lava flows (if volcanoes are present) are created.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"<u>Adjusting Climate</u> - Equatorial bands (and the included vegetation) are adjusted according to user's settings. Deserts and lush zones are created based on mountain range size.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"<u>Editing</u> - User may hand-edit his or her world.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"<u>Saving</u> - The world map is exported as a text array (standard or compressed). This array may be loaded back in to Rhino Builder at a later time for further editing.<br>";
	instructionsString=instructionsString+"</td></tr></table>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"<hr><br>";
	instructionsString=instructionsString+"<u>JUMPING IN</u><br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"If this is your first time with Rhino Builder, click 'Create World' to get things going with the default settings.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"Check out the 'Builder' screen - lots of options there to mess with. You can mess with the options or click in the land-designation area (the blue/green square) or just build the default world. First, notice the green squares in the land-designation area - this is where land (mountains and hills) will be spawned. The land in your world will follow whatever pattern is created here. Go ahead and click 'BUILD WORLD' (on the lower right) to start building a default world.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"Make sure to explore all of the 6 presets. There are sample worlds there (some of which you may recognize) all ready to go.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"The screen will change and you'll see reports of the world being built. There will be a maximum of 30 levels built. When it's done, click 'CONTINUE' to go to the next stage.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"Here, after the initial world is built, you can add features such as shallows, beaches, lava flows and rivers. <u>It's best to follow that order for feature creation</u> - you may see some odd results otherwise. You may also grab a copy of the text array (more on that later) using the 'Copy Formatted Array' or 'Copy Unformatted Aray' buttons. Keep in mind that the text array at this point will contain elevation layers only - no vegetation layers. When you've added features to your satisfaction, click 'Set Base Terrain' to move on.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"Although the map remains very similar to what you were looking at previously, the world vegetation has been laid in according to basic elevation levels. Now it's time to add climate-based modifications to the world.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"Climate science is pretty complex, so I've tried to simplify things here. If the options aren't fairly self-explanatory, please see below for further details. Once you've made your selections, click 'Add Climatological Goodness' to imbue your world with the climate selections.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"Once the climate has been altered, you may click 'Create Deserts' to do just that. <u>Desert creation may take some time as Rhino Builder has to scan for and isolate all of the mountain ranges, so please be patient.</u> You will see a notification in the text box on the lower left of the screen when desert creation is complete.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"When desert creation is complete, you can either view the text array / map or zoom in with the world editor for a closer view and/or to edit things. For now, click on 'Zoom In / Edit World'.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"In the editor, at the top left, you will see a pallete of various terrains. The terrain currently selected will display next to 'Selected Terrain'. Hovering with the mouse over each terrain selection wil reveal what each one is. Clicking on the world view (on the right) will cause whatever terrain is selected to be added to the world. You may change the brush size by moving the 'brush size' slider.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"Below the terrain palette, you will see two layers of cardinal direction buttons. These will move the world view either 1 tile (the inner layer of buttons) or 20 tiles (the outer layer of buttons). If you get lost, click the 'Where Am I?' button to see an overview of the world and look for the red square which marks your current location in the world view.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"When you've edited your world to your satisfaction, click the 'Display Text Map' button to see the array / text map of the world. It's going to be considerably larger than the graphic world map you've viewed before as each text character represents a single tile in the world. This text array is the final product Rhino Builder produces for you - an array you may capture and drop directly in to an application. At the top of this screen, you will see the button 'Compress Text Array'. Clicking that will compress the text array to a size anywhere from 25%-50% of its original size.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"The compressed array string has several components:<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"The first five characters will always be 'RBCOM'. If you load a compressed array in to Rhino Builder, please leave this at the beginning - without it Rhino Builder will not recognize the string as a compressed array.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"Next will be the first array character (from the top left of the array). That first character will be followed by the number of times that character is repeated in that line of the array before either the end of the line or another character is found in the array.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"The end of a line is signified by a ';' (semicolon) character.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"At the end of the compressed string is found the characters 'EOF'. This tells Rhino Builder it has reached the end of the string.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"<hr><br>";
	instructionsString=instructionsString+"Following are descriptions of the basic ideas and various features in Rhino Builder:<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>BUILDER</u>:<br>&nbsp;<br>";
	instructionsString=instructionsString+"<table style='position:relative; left:20px; width:980px; color:darkblue; font-weight:bold; font-size:14px;'><tr><td>";
	instructionsString=instructionsString+"<u>Presets</u>: These buttons work in a similar fashion to automotive radio preset buttons. When Rhino Builder loads, Preset 1 (whether user-created or the default) will be active. You may load another preset by clicking a Preset button. To set a Preset, first click 'Set' and then the Preset button to which you would like to set the currently displayed values. All values on the screen will be saved, including the locations designated for land to spawn. If you wish to restore a Preset to its default, click 'Restore' and then click the Preset button you wish to restore.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>World Width</u>: The created world width in tiles.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>World Height</u>: The created world height in tiles.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Elevations</u>: The max number of elevations. Not all elevations will be used if the slope extends to fill the map before the max elevation is reached.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u># of Mountain Ranges</u>: The number of mountain ranges created throughout the world.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Max Mountain Range Length</u>: % of world width. Mountain range length will vary between the max and half the max.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Max Mountain Range Girth</u>: 'Width' of the mountain ranges in world tiles.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u># of Hill Ranges</u>: Number of hill ranges created <u>PER LEVEL</u> (beyond level 2).<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Max Hill Range Length</u>: % of world width. Hill range length will vary between the max and half the max.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Max Hill Range Girth</u>: 'Width' of the hill ranges in world tiles.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Hill Range Curvynes</u>: % chance a hill range will curve at every plot step.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Confine Hills / Hills Are Free</u>: Confining hills will restrict their peaks to selected land areas only. Allowing hills to run free will allow them, once initially plotted, to run beyond selected land areas.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Land Slope Spread</u>: % increase in linear land area for each level created.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u># of Volcanoes</u>: Max number of volcanoes created throughout the world.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Max Volcano Size</u>: Max diameter of volcanoes, in world tiles. Volcano size will vary between max and half the max.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Land Mass Uniformity</u>: % chance land will be created below (on the next level) any previously created land.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Mountain Slope Contour</u>: This is a display of the mountain contour. It will change depending on various settings.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Draw Land</u>: Allows land to be 'drawn' in the map area.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Erase Land</u>: Allows land to be 'erased' from the map area.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Brush Size</u>: Sets the diameter of the 'brush' when creating or erasing land.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Select All</u>: Selects all squares in the map area.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Clear All</u>: Clears all squares in the map area.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Random Land</u>: Selects random squares in the map area, based on the % designated.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Land-Designation Area / Editor</u>: Click to draw or erase land areas. Land will only be spawned in the areas selected (unless hills are not confined).<br>&nbsp;<br>";
	instructionsString=instructionsString+"</td></tr></table>";
	instructionsString=instructionsString+"<u>LAND FEATURE CREATOR</u>:<br>&nbsp;<br>";
	instructionsString=instructionsString+"<table style='position:relative; left:20px; width:980px; color:darkblue; font-weight:bold; font-size:14px;'><tr><td>";
	instructionsString=instructionsString+"<u>Set Water Level</u>: To expose land by dropping the water level, drag the slider to the right and click 'Set Water Level'. Conversely, to decrease the amount of land exposed, drag the slider to the left and click 'Set Water Level'.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Add Shallows</u>: To add shallow water areas at the edges of all land, click 'Add Shallows'. You can vary the amount of shallows created with the slider.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Add Beaches</u>: Adding beaches at the edge of all water (but not rivers) is similar to adding shallows.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>River / Lava Width</u>: Set the width of rivers or lava flows by checking either 'Regular' or 'Wide'. This setting will work individually for lava flows and rivers. For example, you may choose to create narrow lava flows, then check the 'Wide' box before creating rivers to create wide rivers.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Lava Curvyness</u>: This is the percent chance a lava flow will curve to the left or to the right instead of going straight.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Add Lava Flows</u>: The number of lava flows designated (assuming you have created volcanoes) will be created. Lava flows start in a random volcano's cauldron and flow down hill until it reaches water or becomes trapped by the terrain. Charred land will be created on the sides of lava flows for all elevations containing vegetation.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>River Curvyness</u>: Similar to lava curvyness.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Add Rivers</u>: Rivers originate in the higher elevations of a world, in areas which would translate, in terms of terrain, to mountains, hills, boreal, forest or trees. From the origin point, rivers flow 'down-hill' until they meet coastal water or become trapped by the terrain (this may create a lake of sorts).<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Erase Changes</u>: Click this button to undo all of the world features you have added.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Copy Formatted Array</u>: Click this to capture the world array prior to terrain trnaslation. All levels of exposed land will be represented. The capture will include a carriage return at the end of each array line.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Copy Unformatted Arry</u>: Similar to 'Copy Formatted Array' but without a carriage return at the end of each line.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Set Base Terrain</u>: Clicking this will translate the world map array to a terrain-based set. That is, elevations will no longer be represented by vertical position, but rather by what sort of terrain populates a specific elevation. In a world with more than 10 elevations, some of those elevations will be combined.<br>&nbsp;<br>";
	instructionsString=instructionsString+"</td></tr></table>";
	instructionsString=instructionsString+"<u>CLIMATE BUILDER</u>:<br>&nbsp;<br>";
	instructionsString=instructionsString+"<table style='position:relative; left:20px; width:980px; color:darkblue; font-weight:bold; font-size:14px;'><tr><td>";
	instructionsString=instructionsString+"<u>Spin</u>: The direction your world spins will dictate on which side of the mountain ranges will be created deserts and lush zones. If the world spins west to east (like Earth), deserts will be created on the west sides of mountain ranges and lush zones will be created on the east sides. This is due to the relative direction of the atmosphere. The opposite will be true for a world spinning east to west.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Climate</u>: A wet planet will tend to have a more lush environment (more rainforests and such). A dry planet will tend to have less foliage.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Temperature</u>: A cold planet will have larger polar regions, which will extend further toward the equator. A hot planet will have a larger tropical zone.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Desert Depth</u>: You can adjust the bredth of your deserts as a function of the north/south length of your mountain ranges. 'Ankles' will produce relatively narrow deserts. 'Neck' will produce broad, expansive deserts.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Add Climatological Goodness</u>: Click here to adjust your world according to the settings you have picked.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Create Deserts</u>: The 'Create Deserts' button may only be used <u>after</u> climatological goodness has been added. Creating deserts and lush zones takes some time, so please be patient.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Zoom In / Edit World</u>: Like the 'Create Deserts' button, this may only be employed <u>after</u> climatological goodness has been added. Clicking this will take you to the world editor.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Display Text Map</u>: You may click here to view and capture the world array before editing it.<br>&nbsp;<br>";
	instructionsString=instructionsString+"</td></tr></table>";
	instructionsString=instructionsString+"<u>WORLD EDITOR</u>:<br>&nbsp;<br>";
	instructionsString=instructionsString+"<table style='position:relative; left:20px; width:980px; color:darkblue; font-weight:bold; font-size:14px;'><tr><td>";
	instructionsString=instructionsString+"<u>Terrain Selection</u>: Click any of the terrain tiles in the upper left of the screen to paint or draw with that terrain. The selected terrain will appear next to 'Selected terrain'.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Brush Size</u>: You may adjust the brush size for purposes of editing by adjusting the slider here. This works in a similar fashion to the land-designation tool in that a larger brush size will create a circle of the selected terrain with a diameter equal to the brush size.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Cardinal Directions</u>: Use these buttons to navigate around the world with the zoomed view. Clicking a button on the outside of the compass will advance the world view 20 tiles in the selected direction. Clicking a button on the inside of the compass will advance the world only 1 tile.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Where Am I?</u>: Click this to see the graphical world map with an overlaid red square indicating where the zoomed world view is at the time.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Display Text Map</u>: You may click here to view and capture and/or compress the world array. Any edits made in the editor will be reflected in the world array immediately.<br>&nbsp;<br>";
	instructionsString=instructionsString+"</td></tr></table>";
	instructionsString=instructionsString+"<u>SAVING / LOADING MAPS</u>:<br>&nbsp;<br>";
	instructionsString=instructionsString+"<table style='position:relative; left:20px; width:980px; color:darkblue; font-weight:bold; font-size:14px;'><tr><td>";
	instructionsString=instructionsString+"<u>Saving</u>: Once a map is created and you're in the final stage of the map editor (where you may edit the map a single tile at a time), you may click the button 'Display Text Map'. Clicking this will pull up the text aray representing the map you've created, in its raw (uncompressed) form. This is ultimately the final product of RhinoBuilder, which you would want to incorporate in to your game or application. To save the map, select all of the text in the text display (omitting the other text on the page),then copy and paste it in to a blank text document. It's critical copy nothing other than the text representation of the map. save this text document.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Compression</u>: Raw text maps can be pretty big and you might not want to use it in its full form. At the top of the screen you may click 'Compress Text Array', at which point RhinoBuilder will display a compressed version of the text map.<br>&nbsp;<br>";
	instructionsString=instructionsString+"The compressed array string has several components:<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"The first five characters will always be 'RBCOM'. If you load a compressed array in to Rhino Builder, please leave this at the beginning - without it Rhino Builder will not recognize the string as a compressed array.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"Next will be the first array character (from the top left of the array). That first character will be followed by the number of times that character is repeated in that line of the array before either the end of the line or another character is found in the array.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"The end of a line is signified by a ';' (semicolon) character.<br>";
	instructionsString=instructionsString+"&nbsp;<br>";
	instructionsString=instructionsString+"At the end of the compressed string is found the characters 'EOF'. This tells Rhino Builder it has reached the end of the string.<br>&nbsp;<br>";
	instructionsString=instructionsString+"<u>Loading</u>: To load a map, load RhinoBuilder and click 'Load / Edit World'. Open the raw text document containing your map in whatever editor you use (TextPad or BBEdit are good). Select and copy the entire map (either in raw or compressed form) and paste the entirety of the text in to the area indicating 'Paste map text array here' in RhinoBuilder. Then, fill in the map width and height and click 'Load Map'. RhinoBuilder will indicate to you whether the map properly loaded or not.<br>&nbsp;<br>";
	instructionsString=instructionsString+"</td></tr></table>";
//	instructionsString=instructionsString+"<u>Topic</u>: Explanatory text.<br>&nbsp;<br>";
//	instructionsString=instructionsString+"<u>Topic</u>: Explanatory text.<br>&nbsp;<br>";
//	instructionsString=instructionsString+"<u>Topic</u>: Explanatory text.<br>&nbsp;<br>";
	instructionsString=instructionsString+"</font>";
//	instructionsString=instructionsString+"</div>";

	document.getElementById('instructionsDisplay').innerHTML = instructionsString;

//	ABOUT DIV		#####################################################################################################

	aboutLeft = (((windowWidth-10)/2)-515);

	document.write("<div id='divAbout' style='display:none;'>");

	document.write("<table border='1' id='tableAbout' style='position:absolute; left:"+aboutLeft+"px; width:1040px; top:100px; height:500px;'>");
	document.write("<tr>");
	document.write("<td id='aboutDisplay' valign='top' style='height:500px; width:500px; padding:10px;'>");
	document.write("</td>");
	document.write("</tr>");
	document.write("</table>");

	masterTop = 62;

//	CLOSE BUTTON

	itemHeight = 28;
	document.write("<BUTTON TYPE='button' id='buttonCloseAbout' class='btn' onClick='closeAbout();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:14px; color:darkblue; top:"+masterTop+"px; left:"+aboutLeft+"px; width:140px; height:30px; display:block;'>Close</button>");

	document.write("</div>");

	aboutString = "";
	aboutString=aboutString+"<font style='font-family:Arial; color:darkblue; font-weight:bold; font-size:14px;'>";
	aboutString=aboutString+"<i><font style='font-size:18px;'>Rhino Builder </font><font style='font-size:24px; color:red;'>2</font></i><br>";

	//	<font style='font-size:14px;'>.1</font></i>

	aboutString=aboutString+"<font style='font-size:11px;'>with Climatological Goodness<sup>&reg;</sup></font><br>";
	aboutString=aboutString+"&nbsp;<br>";
	aboutString=aboutString+"by John Poppin &copy;2012 <a href='mailto:CrashRhinoceros@Gmail.com'><u>CrashRhinoceros@Gmail.com</u></a><br>";
	aboutString=aboutString+"&nbsp;<br>";
	aboutString=aboutString+"An organic 3D game-world builder (with Climatological Goodness<sup>&reg;</sup>), written (mostly) while riding on the Larkspur ferry to and from San Francisco, under the Opera browser for use in Safari, Chrome and Opera.<br>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"<u>What, exactly and in plain language, does Rhino Builder do?<br></u>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"Rhino Builder is a game-world creation tool. It creates a semi-random game-world map and produces a text array which can be dropped directly in to an application's code.<br>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"<u>What is this all about?<br></u>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"In 2009, I decided I'd like to write an 'Ultima'-style adventure game for the iPhone platform. And so I began.<br>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"As most projects of this nature go, the game grew to a pretty decent size and degree of complexity, and I realized the game-world needed to be bigger; Much bigger and 'natural' looking, but with a good balance for game-play.<br>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"The map I had previously created for the game was pretty good: It had continents, different terrains, and what I thought was a good balance. But the technical problem was <u>how</u> it was created. I drew the map in MS Paint, then used an on-line tool to turn it in to an ASCII drawing so I could load the characters in to an array for use in the game. This proved to be a very messy and much more time-consuming exercise than I had thought it might be.<br>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"So in my process of thinking about a new game-world, I realized I could probably write a piece of software which could, given a limited amount of input, produce exactly the type of map I wanted - clean and ready to go for use in a game. With that in mind, I wrote 'Rhino Builder' and released it to the world in 2011.<br>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"'Rhino Builder' seemed, from the feedback I received, to be a success as far as an amateur attempt. People commented that it was useful for more than just computer-based games and that the idea was pretty sound. But the interface was clunky and needed some polish.<br>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"At some point, I wondered if I could include code in the application which would dynamically alter the map for climate (different latitudes, effects of mountain ranges and such). This idea really intrigued me and I decided to create a new version of 'Rhino Builder' with this functionality in mind.<br>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"After about a year's worth of work and plenty of study on the science of climate, 'Rhino Builder 2' sports:<br>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Upgraded and streamlined user-interface<br>";
	aboutString=aboutString+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;New HTML5 graphics<br>";
	aboutString=aboutString+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Expanded world-depth (more levels)<br>";
	aboutString=aboutString+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dynamic mountain slope calculator<br>";
	aboutString=aboutString+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;More detailed land-spawn field (with variable brush size)<br>";
	aboutString=aboutString+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Graphic (instead of ASCII-based) world maps<br>";
	aboutString=aboutString+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Climatological terrain adjustment<br>";
	aboutString=aboutString+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Text-array compressor<br>";
	aboutString=aboutString+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Upgraded map editor<br>";
	aboutString=aboutString+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Saveable map images<br>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"<u>What's 'Climatological Goodness<sup>&reg;</sup>'?<br></u>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"After it creates a world and populates the world with base-level vegetation (based on altitude), Rhino Builder then takes input from the user on the climate humidity and temperature, and adjusts the vegetation according to latitudinal position (i.e., grasses and shrubs grow at lower altitudes, coniferous vegetation grows at higher altitudes). If a user builds a cold world with low humidity, Rhino Builder will increase the size of the polar regions and shrink the size of the tropical region, adjusting the vegetation for those regions. Conversely, if a user selects a hot climate with high humidity, Rhino Builder will shrink the polar regions and increase the size of the tropical region.<br>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"Rhino Builder will also create deserts and lush-zones. Each mountain range in the created world is individually analyzed, and based on the spin-direction of the world and the north/south latitudinal length of the mountain ranges, deserts are laid out on the leeward sides of the mountain ranges according to a user preference for desert breadth. Lush zones are created on the windward sides of the mountain ranges.<br>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"<u>Why JavaScript?<br></u>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"JavaScript is a great language for a proof-of-concept; it has nearly all of the utilitarian functionality as lower-level languages. Because they're browser-based, JavaScript applications will work on a PC or a Mac fairly uniformly.<br>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"<u>Organic 3D? How does that work?<br></u>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"Each of the 30 levels of elevation is grown from the one preceeding it. Water and land features follow changes in elevation according to nature (water flows down hill, et cetera).<br>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"<u>Why not Firefox or Internet Explorer?<br></u>";
	aboutString=aboutString+"<br>";
	aboutString=aboutString+"Firefox and Internet Explorer use different HTML and JavaScript conventions than do Chrome, Safari and Opera. The differences aren't huge, but they're large enough that at this time I don't care to modify this program specifically to work with them. I know how to do this, it's just more work than I want to deal with for this project. Besides, I prefer Chrome, Safari and Opera.<br>";
	aboutString=aboutString+"</font>";

	document.getElementById('aboutDisplay').innerHTML = aboutString;

//	IE DIV		#####################################################################################################

	document.write("<div id='divIE' align='center' style='display:none;'>");
	document.write("<img src='noIE.png'><br>");
	document.write("<font size='+2'><b>Rhino Builder 2 does not support Microsoft Internet Explorer.<b></font><br>");
	document.write("&nbsp;<br>");
	document.write("<font size='+2'><b>Please use <a href='http://www.apple.com/safari/'><u>Safari</u><a>, <a href='https://www.google.com/intl/en/chrome/browser/'><u>Chrome</u></a> or <a href='http://www.opera.com/download/'><u>Opera</u></a>.<b></font><br>");
	document.write("&nbsp;<br>");
	document.write("<a href='http://www.apple.com/safari/'><img border=0 src='safari.png'></a> <a href='https://www.google.com/intl/en/chrome/browser/'><img border=0 src='chrome.jpg'></a> <a href='http://www.opera.com/download/'><img border=0 src='opera.png'></a>");
	document.write("</div>");

//	FIREFOX DIV		#####################################################################################################

	document.write("<div id='divFirefox' align='center' style='display:none;'>");
	document.write("&nbsp;<br>");
	document.write("<img src='noFirefox.jpg'><br>");
	document.write("&nbsp;<br>");
	document.write("<font size='+2'><b>Rhino Builder 2 does not support Firefox.<b></font><br>");
	document.write("&nbsp;<br>");
	document.write("<font size='+2'><b>Please use <a href='http://www.apple.com/safari/'><u>Safari</u><a>, <a href='https://www.google.com/intl/en/chrome/browser/'><u>Chrome</u></a> or <a href='http://www.opera.com/download/'><u>Opera</u></a>.<b></font><br>");
	document.write("&nbsp;<br>");
	document.write("<a href='http://www.apple.com/safari/'><img border=0 src='safari.png'></a> <a href='https://www.google.com/intl/en/chrome/browser/'><img border=0 src='chrome.jpg'></a> <a href='http://www.opera.com/download/'><img border=0 src='opera.png'></a>");
	document.write("</div>");

//	SPLASH DIV		#####################################################################################################

	splashLeft = (((windowWidth-10)/2)-515);

	document.write("<div id='divSplash' style='display:none;'>");

	document.write("<font style='font-family:Arial; font-weight:bold; font-size:14px; color:darkblue;'>");

	masterTop = 62;

//	GO ON BUTTON

	itemHeight = 28;
//	document.write("<BUTTON TYPE='button' id='buttonGoOn' class='btn' onClick='openBuilder();' style='position:absolute; font-family:Arial; font-weight:bold; font-size:14px; color:darkblue; top:"+masterTop+"px; left:"+aboutLeft+"px; width:140px; height:30px; display:block;'>Continue</button>");

	document.write("<table border='0' id='tableSplash' style='position:absolute; left:"+splashLeft+"px; width:1050px; top:62px; height:800px;'>");
	document.write("<tr>");
	document.write("<td valign='top' id='splashDisplay' style='height:500px; width:500px;'>");
	document.write("</td>");
	document.write("</tr>");
	document.write("</table>");

	splashString = "";
	splashString=splashString+"<div align='center' width='600px'>";
//	splashString=splashString+"<font style='font-size:18px;'>&nbsp;<br></font>";
	splashString=splashString+"<font style='font-size:30px; color:darkblue;'><b>Welcome to</b><br></font>";
//	splashString=splashString+"<font style='font-size:6px;'>&nbsp;<br></font>";
	splashString=splashString+"<font style='font-size:48px; color:darkblue;'><b><i>Rhino Builder</i></b></font>";
	splashString=splashString+"<font style='font-size:60px; color:red;'><b><i> 2</i></b></font><br>";
//	splashString=splashString+"<font style='font-size:48px; color:darkblue;'><b><i>!</i></b></font><br>";
//	splashString=splashString+"<font style='font-size:6px;'>&nbsp;<br></font>";
	splashString=splashString+"<font style='font-size:24px; color:darkblue;'><i><b>Now with Climatological Goodness<sup>&reg;</sup>!</b></i></font><br>";
	splashString=splashString+"<font style='font-size:24px;'>&nbsp;<br></font>";
	splashString=splashString+"<img src='SplashPic3.png'><br>";
	splashString=splashString+"<font style='font-size:24px;'>&nbsp;<br></font>";
	splashString=splashString+"<button type='button' id='buttonOpenBuilder' onClick='openBuilder();' style='font-family:Arial; font-weight:bold; font-size:36px; color:darkblue; width:350px; height:60px;'>Create World</button><br>";
	splashString=splashString+"<font style='font-size:8px;'>&nbsp;<br></font>";
	splashString=splashString+"<button type='button' id='buttonLoadWorld' onClick='openLoadDiv();' style='font-family:Arial; font-weight:bold; font-size:36px; color:darkblue; width:350px; height:60px;'>Load / Edit World</button>";
	splashString=splashString+"<br>&nbsp;<br>";
	splashString=splashString+"<a href='http://www.easycounter.com/'><img src='http://www.easycounter.com/counter.php?rhinobuilder'border='0' alt='Web Counters'></a>";
	splashString=splashString+"<br>&nbsp;<br>";
	splashString=splashString+"<font style='font-size:9px; color:darkblue;'><b>browserName:</b>"+browserName+" / </font>";
	splashString=splashString+"<font style='font-size:9px; color:darkblue;'><b>platformName:</b>"+platformName+" / </font>";
	splashString=splashString+"<font style='font-size:9px; color:darkblue;'><b>Screen X:</b>"+screenW+" / </font>";
	splashString=splashString+"<font style='font-size:9px; color:darkblue;'><b>Screen Y:</b>"+screenH+" / </font>";
	splashString=splashString+"<font style='font-size:9px; color:darkblue;'><b>userAgent:</b>"+userAgent+" / </font>";
	splashString=splashString+"<font style='font-size:9px; color:darkblue;'><b>Browser:</b>"+specificBrowser+" / </font>";
	splashString=splashString+"<font style='font-size:9px; color:darkblue;'><b>Platform:</b>"+specificPlatform+"</font>";
//	splashString=splashString+"<br><font style='font-size:9px; color:darkblue;'><b>localStorage.aboutArrow:</b>"+localStorage.aboutArrow+"</font>";
	splashString=splashString+"</div>";

	document.getElementById('splashDisplay').innerHTML = splashString;

//	document.write("<font id='textRivers' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(aboutLeft+400)+"px; font-size:24px;'>Welcome to</font>");
//	masterTop = masterTop + itemHeight + bumpDown;
//	document.write("<font id='textRivers' style='position:absolute; top:"+(masterTop+5)+"px; left:"+(stage2Left+350)+"px;'>RhinoBuilder 2</font>");
	document.write("</div>");

	divSplashOn = 1;
//	buttonLoadWorld.disabled=true;
}

function changeRiverWidth()
{
	if (riversNarrow==1)
	{
		document.getElementById("buttonRiverNarrow").style.background="url(checked.png) no-repeat";
		document.getElementById("buttonRiverWide").style.background="url(unchecked.png) no-repeat";
		stage2Error.value += "\n[Rivers regular.]";
		stage2Error.scrollTop = stage2Error.scrollHeight;
	}
	else
	{
		document.getElementById("buttonRiverNarrow").style.background="url(unchecked.png) no-repeat";
		document.getElementById("buttonRiverWide").style.background="url(checked.png) no-repeat";
		stage2Error.value += "\n[Rivers wide.]";
		stage2Error.scrollTop = stage2Error.scrollHeight;
	}
}

function addClimatologicalGoodness()
{
	convertLandToTerrain();
	drawMap();
	buttonAddDeserts.disabled=false;
	buttonZoomEdit.disabled=false;
}

function convertLandToTerrain()
{
/*

a	high mountains
b	low mountains
c	hills meadow
d	boreal
e	mixed forest
f	forest
g	trees
h	scrub
i	long grass
j	grass


1	a	high mountains	a
2	b	low mountains	b
3	c	hills meadow	c
4	d	boreal			d
5	e	boreal			d
6	f	mixed forest	e
7	g	mixed forest	e
8	h	forest			f
9	i	forest			f
10	j	trees			g
11	k	trees			g
12	l	scrub			h
13	m	scrub			h
14	n	long grass		i
15	o	long grass		i
16	p	grass			j
17	q	grass			j
18	r
19	s
20	t

a	a
b	a
c	a
d	a
d	a
e	a
f	a
g	a
h	a
i	a
j	a

*/
	if (waterLevel == 2)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
			}
		}
	}
	else if (waterLevel == 3)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 4)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 5)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 6)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 7)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 8)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 9)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 10)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 11)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 12)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 13)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "l")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 14)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "c";}	//	hills
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "e";}	//	mixed
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "l")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "m")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 15)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "c";}	//	hills
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "e";}	//	mixed
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "l")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "m")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "n")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 16)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "c";}	//	hills
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "e";}	//	mixed
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "l")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "m")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "n")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "o")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 17)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "c";}	//	hills
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "e";}	//	mixed
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "l")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "m")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "n")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "o")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "p")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 18)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "l")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "m")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "n")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "o")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "p")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "q")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 19)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "l")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "m")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "n")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "o")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "p")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "q")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "r")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 20)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "l")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "m")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "n")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "o")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "p")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "q")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "r")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "s")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 21)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "l")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "m")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "n")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "o")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "p")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "q")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "r")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "s")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "t")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 22)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "l")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "m")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "n")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "o")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "p")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "q")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "r")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "s")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "t")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "u")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 23)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "l")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "m")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "n")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "o")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "p")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "q")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "r")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "s")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "t")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "u")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "v")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 24)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "l")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "m")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "n")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "o")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "p")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "q")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "r")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "s")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "t")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "u")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "v")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "w")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 25)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "l")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "m")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "n")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "o")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "p")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "q")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "r")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "s")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "t")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "u")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "v")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "w")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "x")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 26)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "l")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "m")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "n")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "o")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "p")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "q")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "r")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "s")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "t")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "u")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "v")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "w")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "x")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "y")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 27)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "l")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "m")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "n")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "o")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "p")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "q")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "r")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "s")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "t")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "u")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "v")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "w")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "x")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "y")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "z")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 28)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "l")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "m")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "n")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "o")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "p")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "q")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "r")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "s")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "t")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "u")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "v")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "w")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "x")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "y")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "z")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "1")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 29)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "l")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "m")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "n")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "o")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "p")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "q")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "r")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "s")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "t")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "u")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "v")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "w")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "x")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "y")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "z")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "1")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "2")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 30)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "l")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "m")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "n")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "o")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "p")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "q")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "r")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "s")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "t")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "u")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "v")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "w")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "x")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "y")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "z")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "1")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "2")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "3")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}
	else if (waterLevel == 31)
	{
		for (y=1;y<=mapSizeY;y++)
		{
			for (x=1;x<=mapSizeX;x++)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "c";}	//	hills meadow
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "d";}	//	boreal
				else if (mapArrayDev[x][y] == "k")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "l")		{mapArrayDev[x][y] = "e";}	//	mixed forest
				else if (mapArrayDev[x][y] == "m")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "n")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "o")		{mapArrayDev[x][y] = "f";}	//	forest
				else if (mapArrayDev[x][y] == "p")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "q")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "r")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "s")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "t")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "u")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "v")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "w")		{mapArrayDev[x][y] = "h";}	//	scrub
				else if (mapArrayDev[x][y] == "x")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "y")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "z")		{mapArrayDev[x][y] = "i";}	//	long grass
				else if (mapArrayDev[x][y] == "1")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "2")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "3")		{mapArrayDev[x][y] = "j";}	//	grass
				else if (mapArrayDev[x][y] == "4")		{mapArrayDev[x][y] = "j";}	//	grass
			}
		}
	}

	//	CONVERT POLAR AND TROPICAL REGIONS

/*
		high polar		10%
		high middle		30%
		tropical		20%
		low middle		30%
		low polar		10%

		MID LATITUDE			POLAR					TROPICAL
		high hmountains	a		high mountains	a		high mountains		a
		low mountains	b		low mountains	b		low mountains lush	0
		hills meadow	c		hills scrub		5		hills lush			!
		boreal			d		boreal polar	d		rainforest			@
		mixed forest	e		boreal polar	d		rainforest			@
		forest			f		boreal polar	d		rainforest			@
		trees			g		trees polar		6		rainforest			@
		scrub			h		scrub polar		7		rainforest			@
		longgrass		i		tundra long		8		trees				g
		grass			j		tundra			9		grass				j

		climate 0	wet		tropical region grows 20%
		climate 1	medium
		climate 2	dry		tropical region shrinks 10%

		temperature 0	cold		polar regions grow 10%, tropical region shrinks 10%
		temperature 1	temperate
		temperature 2	hot			polar regions shrink 5%, tropical region grows 10%
*/
	northPolarLowLine = 		Math.round(mapSizeY * 0.14);
	northPolarVariance = 		Math.round(mapSizeY * 0.15);

	tropicalHighLineVariance = 	Math.round(mapSizeY * 0.39);
	tropicalHighLine = 			Math.round(mapSizeY * 0.40);
	tropicalLowLine = 			Math.round(mapSizeY * 0.60);
	tropicalLowLineVariance = 	Math.round(mapSizeY * 0.61);

	southPolarVariance = 		Math.round(mapSizeY * 0.85);
	southPolarHighLine = 		Math.round(mapSizeY * 0.86);

	if (climate == 0)
	{
		tropicalHighLineVariance = tropicalHighLineVariance - Math.round(mapSizeY * .1);
		tropicalHighLine = tropicalHighLine - Math.round(mapSizeY * .1);
		tropicalLowLine = tropicalLowLine + Math.round(mapSizeY * .1);
		tropicalLowLineVariance = tropicalLowLineVariance + Math.round(mapSizeY * .1);
	}
	else if (climate == 2)
	{
		tropicalHighLineVariance = tropicalHighLineVariance + Math.round(mapSizeY * .05);
		tropicalHighLine = tropicalHighLine + Math.round(mapSizeY * .05);
		tropicalLowLine = tropicalLowLine - Math.round(mapSizeY * .05);
		tropicalLowLineVariance = tropicalLowLineVariance - Math.round(mapSizeY * .05);
	}

	if (temperature == 0)
	{
		northPolarLowLine = northPolarLowLine + Math.round(mapSizeY * .1);
		northPolarVariance = northPolarVariance + Math.round(mapSizeY * .1);

		tropicalHighLineVariance = tropicalHighLineVariance + Math.round(mapSizeY * .05);
		tropicalHighLine = tropicalHighLine + Math.round(mapSizeY * .05);
		tropicalLowLine = tropicalLowLine - Math.round(mapSizeY * .05);
		tropicalLowLineVariance = tropicalLowLineVariance - Math.round(mapSizeY * .05);

		southPolarHighLine = southPolarHighLine - Math.round(mapSizeY * .1);
		southPolarVariance = southPolarVariance - Math.round(mapSizeY * .1);
	}
	else if (temperature == 2)
	{
		northPolarLowLine = northPolarLowLine - Math.round(mapSizeY * .05);
		northPolarVariance = northPolarVariance - Math.round(mapSizeY * .05);

		tropicalHighLineVariance = tropicalHighLineVariance - Math.round(mapSizeY * .05);
		tropicalHighLine = tropicalHighLine - Math.round(mapSizeY * .05);
		tropicalLowLine = tropicalLowLine + Math.round(mapSizeY * .05);
		tropicalLowLineVariance = tropicalLowLineVariance + Math.round(mapSizeY * .05);

		southPolarHighLine = southPolarHighLine + Math.round(mapSizeY * .05);
		southPolarVariance = southPolarVariance + Math.round(mapSizeY * .05);
	}

	var varianceChance = 50;

	for (y=1;y<=mapSizeY;y++)
	{
		for (x=1;x<=mapSizeX;x++)
		{
			//	NORTH POLAR REGION

			if (y <= northPolarLowLine)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = ")";}	//	hills scrub
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "(";}	//	boreal polar
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "(";}	//	boreal polar
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "(";}	//	boreal polar
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "+";}	//	trees polar
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "=";}	//	scrub polar
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "{";}	//	tundra long
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "}";}	//	tundra
				else if (mapArrayDev[x][y] == "~")		{mapArrayDev[x][y] = "#";}	//	ice
				else if (mapArrayDev[x][y] == "Q" || mapArrayDev[x][y] == "R")
				{
					randomNumber=Math.floor(Math.random()*100)+1;
					if (randomNumber <= varianceChance)
					{
						mapArrayDev[x][y] = "#";
					}
				}
			}

			//	NORTH POLAR VARIANCE

			else if (y > northPolarLowLine && y <= northPolarVariance)
			{
				randomNumber=Math.floor(Math.random()*100)+1;
				if (randomNumber <= varianceChance)
				{
					if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
					else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
					else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = ")";}	//	hills scrub
					else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "(";}	//	boreal polar
					else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "(";}	//	boreal polar
					else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "(";}	//	boreal polar
					else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "+";}	//	trees polar
					else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "=";}	//	scrub polar
					else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "{";}	//	tundra long
					else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "}";}	//	tundra
					else if (mapArrayDev[x][y] == "~")		{mapArrayDev[x][y] = "#";}	//	ice
					else if (mapArrayDev[x][y] == "Q" || mapArrayDev[x][y] == "R")
					{
						randomNumber=Math.floor(Math.random()*100)+1;
						if (randomNumber <= varianceChance)
						{
							mapArrayDev[x][y] = "#";
						}
					}
				}
			}

			//	NORTH TROPICAL VARIANCE

			else if (y > tropicalHighLineVariance && y <= tropicalHighLine)
			{
				randomNumber=Math.floor(Math.random()*100)+1;
				if (randomNumber <= varianceChance)
				{
					if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
					else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "?";}	//	low mountains lush
					else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "!";}	//	hills lush
					else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "@";}	//	rainforest
					else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "@";}	//	rainforest
					else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "@";}	//	rainforest
					else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "@";}	//	rainforest
					else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "@";}	//	rainforest
					else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "g";}	//	trees
					else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "j";}	//	grass
				}
			}

			//	TROPICAL REGION

			else if (y >= tropicalHighLine && y <= tropicalLowLine)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "?";}	//	low mountains lush
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "!";}	//	hills lush
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "@";}	//	rainforest
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "@";}	//	rainforest
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "@";}	//	rainforest
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "@";}	//	rainforest
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "@";}	//	rainforest
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "g";}	//	trees
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "j";}	//	grass
			}

			//	SOUTH TROPICAL VARIANCE

			else if (y > tropicalLowLine && y <= tropicalLowLineVariance)
			{
				randomNumber=Math.floor(Math.random()*100)+1;
				if (randomNumber <= varianceChance)
				{
					if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
					else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "?";}	//	low mountains lush
					else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = "!";}	//	hills lush
					else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "@";}	//	rainforest
					else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "@";}	//	rainforest
					else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "@";}	//	rainforest
					else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "@";}	//	rainforest
					else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "@";}	//	rainforest
					else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "g";}	//	trees
					else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "j";}	//	grass
				}
			}

			//	SOUTH POLAR VARIANCE

			else if (y >= southPolarVariance && y < southPolarHighLine)
			{
				randomNumber=Math.floor(Math.random()*100)+1;
				if (randomNumber <= varianceChance)
				{
					if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
					else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
					else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = ")";}	//	hills scrub
					else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "(";}	//	boreal polar
					else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "(";}	//	boreal polar
					else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "(";}	//	boreal polar
					else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "+";}	//	trees polar
					else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "=";}	//	scrub polar
					else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "{";}	//	tundra long
					else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "}";}	//	tundra
					else if (mapArrayDev[x][y] == "~")		{mapArrayDev[x][y] = "#";}	//	ice
					else if (mapArrayDev[x][y] == "Q" || mapArrayDev[x][y] == "R")
					{
						randomNumber=Math.floor(Math.random()*100)+1;
						if (randomNumber <= varianceChance)
						{
							mapArrayDev[x][y] = "#";
						}
					}
				}
			}

			//	SOUTH POLAR REGION

			else if (y >= southPolarHighLine)
			{
				if      (mapArrayDev[x][y] == "a")		{mapArrayDev[x][y] = "a";}	//	high mountains
				else if (mapArrayDev[x][y] == "b")		{mapArrayDev[x][y] = "b";}	//	low mountains
				else if (mapArrayDev[x][y] == "c")		{mapArrayDev[x][y] = ")";}	//	hills scrub
				else if (mapArrayDev[x][y] == "d")		{mapArrayDev[x][y] = "(";}	//	boreal polar
				else if (mapArrayDev[x][y] == "e")		{mapArrayDev[x][y] = "(";}	//	boreal polar
				else if (mapArrayDev[x][y] == "f")		{mapArrayDev[x][y] = "(";}	//	boreal polar
				else if (mapArrayDev[x][y] == "g")		{mapArrayDev[x][y] = "+";}	//	trees polar
				else if (mapArrayDev[x][y] == "h")		{mapArrayDev[x][y] = "=";}	//	scrub polar
				else if (mapArrayDev[x][y] == "i")		{mapArrayDev[x][y] = "{";}	//	tundra long
				else if (mapArrayDev[x][y] == "j")		{mapArrayDev[x][y] = "}";}	//	tundra
				else if (mapArrayDev[x][y] == "~")		{mapArrayDev[x][y] = "#";}	//	ice
				else if (mapArrayDev[x][y] == "Q" || mapArrayDev[x][y] == "R")
				{
					randomNumber=Math.floor(Math.random()*100)+1;
					if (randomNumber <= varianceChance)
					{
						mapArrayDev[x][y] = "#";
					}
				}
			}
		}
	}

	if (waterLevel >= 10)
	{
		waterLevel = 10;
	}
	climateBuilderError.value += "\n" + timeText + " - [Set base terrain.]";
//	createDeserts();
}

function startDesertCreation()
{
	document.getElementById("waitingClimate").style.display="block";
	createDeserts();
}

function createDeserts()
{
	var noMoreMountainRanges = 0;
	var noMountainsFound = 0;
	var numDeserts = 0;
	var desertDepthPct = 0;

	while (noMountainsFound==0)
	{
		climateBuilderError.value += "\nScanning for mountain ranges...";
		climateBuilderError.scrollTop = climateBuilderError.scrollHeight;

	//	rangePointArray

	//	WestToEast spin=0 <--
	//	EastToWest spin=1 -->

	//	var rangePointArrayX = new Array(10000);
	//	var rangePointArrayY = new Array(10000);
	//	var rangePointArrayIndex = new Array(10000);

		var scanX = 0;
		var scanY = 1;
		var examinedTile = "";
		var scanIndex = 0;
		var rangeTop = mapSizeY;
		var rangeBottom = 0;
		var rangeLeft = mapSizeX;
		var rangeRight = 0;
		var rangeHeight = 0;

		if (spin==0)
		{
			scanX = mapSizeX;

		//	climateBuilderError.value += "\nStarting scan at: "+scanX+","+scanY;
		//	climateBuilderError.scrollTop = climateBuilderError.scrollHeight;

			while (examinedTile != "a" && noMountainsFound == 0)
			{
				examinedTile = mapArrayDev[scanX][scanY];
				scanX = scanX - 1;

				if (scanY == mapSizeY && scanX < 1)
				{
					noMountainsFound = 1;
					climateBuilderError.value += "\nNo more mountain ranges located.";
					climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
				}
				if (scanY < mapSizeY && scanX < 1)
				{
					scanX = mapSizeX;
					scanY = scanY + 1;
				}
			}

			if (noMountainsFound==0)
			{
				scanX = scanX + 1;

				numDeserts += 1;

				climateBuilderError.value += "\nFound mountain range "+numDeserts+" at: "+scanX+","+scanY;
				climateBuilderError.scrollTop = climateBuilderError.scrollHeight;

				climateBuilderError.value += "\n    Isolating range...";
				climateBuilderError.scrollTop = climateBuilderError.scrollHeight;

				mapArrayDev[scanX][scanY] = "A";

				for (passes=1;passes<=4;passes++)
				{
					for (y=1;y<=mapSizeY;y++)
					{
						for (x=1;x<=mapSizeX;x++)
						{
							if (mapArrayDev[x][y]=="A")
							{
								for (yy=-1;yy<=1;yy++)
								{
									yyy=yy;
									for (xx=-1;xx<=1;xx++)
									{
										xxx=xx;

										if ((x+xxx) < 1)
										{
											xxx = (mapSizeX-1);
										}
										else if ((x+xxx) > mapSizeX)
										{
											xxx = ((-mapSizeX)+1);
										}
										if ((y+yyy) < 1)
										{
											yyy = (mapSizeY-1);
										}
										else if ((y+yyy) > mapSizeY)
										{
											yyy = ((-mapSizeY)+1);
										}

										try
										{
											if (mapArrayDev[(x-0)+(xxx-0)][(y-0)+(yyy-0)]=="a")
											{
												mapArrayDev[(x-0)+(xxx-0)][(y-0)+(yyy-0)] = "A";
											}
										}
										catch(err)
										{
									//		climateBuilderError.value += "\nERROR (10168): x,y: "+x+","+y+"; xxx,yyy: "+xxx+","+yyy+"; PLOT: "+(x+xxx)+","+(y+yyy);
									//		climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
										}
									}
								}
							}
						}
					}

					for (y=mapSizeY;y>=1;y--)
					{
						for (x=mapSizeX;x>=1;x--)
						{
							if (mapArrayDev[x][y]=="A")
							{
								for (yy=-1;yy<=1;yy++)
								{
									yyy=yy;
									for (xx=-1;xx<=1;xx++)
									{
										xxx=xx;

										if ((x+xxx) < 1)
										{
											xxx = (mapSizeX-1);
										}
										else if ((x+xxx) > mapSizeX)
										{
											xxx = ((-mapSizeX)+1);
										}
										if ((y+yyy) < 1)
										{
											yyy = (mapSizeY-1);
										}
										else if ((y+yyy) > mapSizeY)
										{
											yyy = ((-mapSizeY)+1);
										}

										try
										{
											if (mapArrayDev[(x-0)+(xxx-0)][(y-0)+(yyy-0)]=="a")
											{
												mapArrayDev[(x-0)+(xxx-0)][(y-0)+(yyy-0)] = "A";
											}
										}
										catch(err)
										{
									//		climateBuilderError.value += "\nERROR (10216): x,y: "+x+","+y+"; xxx,yyy: "+xxx+","+yyy+"; PLOT: "+(x+xxx)+","+(y+yyy);
									//		climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
										}
									}
								}
							}
						}
					}

					for (y=1;y<=mapSizeY;y++)
					{
						for (x=mapSizeX;x>=1;x--)
						{
							if (mapArrayDev[x][y]=="A")
							{
								for (yy=-1;yy<=1;yy++)
								{
									yyy=yy;
									for (xx=-1;xx<=1;xx++)
									{
										xxx=xx;

										if ((x+xxx) < 1)
										{
											xxx = (mapSizeX-1);
										}
										else if ((x+xxx) > mapSizeX)
										{
											xxx = ((-mapSizeX)+1);
										}
										if ((y+yyy) < 1)
										{
											yyy = (mapSizeY-1);
										}
										else if ((y+yyy) > mapSizeY)
										{
											yyy = ((-mapSizeY)+1);
										}

										try
										{
											if (mapArrayDev[(x-0)+(xxx-0)][(y-0)+(yyy-0)]=="a")
											{
												mapArrayDev[(x-0)+(xxx-0)][(y-0)+(yyy-0)] = "A";
											}
										}
										catch(err)
										{
									//		climateBuilderError.value += "\nERROR (10264): x,y: "+x+","+y+"; xxx,yyy: "+xxx+","+yyy+"; PLOT: "+(x+xxx)+","+(y+yyy);
									//		climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
										}
									}
								}
							}
						}
					}

					for (y=mapSizeY;y>=1;y--)
					{
						for (x=1;x<=mapSizeX;x++)
						{
							if (mapArrayDev[x][y]=="A")
							{
								for (yy=-1;yy<=1;yy++)
								{
									yyy=yy;
									for (xx=-1;xx<=1;xx++)
									{
										xxx=xx;

										if ((x+xxx) < 1)
										{
											xxx = (mapSizeX-1);
										}
										else if ((x+xxx) > mapSizeX)
										{
											xxx = ((-mapSizeX)+1);
										}
										if ((y+yyy) < 1)
										{
											yyy = (mapSizeY-1);
										}
										else if ((y+yyy) > mapSizeY)
										{
											yyy = ((-mapSizeY)+1);
										}

										try
										{
											if (mapArrayDev[(x-0)+(xxx-0)][(y-0)+(yyy-0)]=="a")
											{
												mapArrayDev[(x-0)+(xxx-0)][(y-0)+(yyy-0)] = "A";
											}
										}
										catch(err)
										{
									//		climateBuilderError.value += "\nERROR (10311): x,y: "+x+","+y+"; xxx,yyy: "+xxx+","+yyy+"; PLOT: "+(x+xxx)+","+(y+yyy);
									//		climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
										}
									}
								}
							}
						}
					}
				}

			//	climateBuilderError.value += "\n16 passes completed to isolate range.";
			//	climateBuilderError.scrollTop = climateBuilderError.scrollHeight;

				rangePointArrayIndex = 0;

				for (y=1;y<=mapSizeY;y++)
				{
					for (x=1;x<=mapSizeX;x++)
					{
						if (mapArrayDev[x][y]=="A")
						{
							rangeHeight = rangeHeight + 1;
							x=1;
							y=y+1;
						}
					}
				}
				climateBuilderError.value += "\n    Range Height: "+rangeHeight;
				if ((rangeHeight % 2) == 0)
				{
		//			climateBuilderError.value += "\nRange Height is even.";
					rangeHeightHalf = (rangeHeight / 2) - 1;
				}
				else
				{
		//			climateBuilderError.value += "\nRange Height is odd.";
					rangeHeightHalf = ((rangeHeight-1) / 2);
				}
				climateBuilderError.scrollTop = climateBuilderError.scrollHeight;

			//	need to describe a half-circle and track the plots on each Y-axis line

				var circleDiameter = rangeHeight;
				var circleRadius = rangeHeightHalf;
				var circleRadiusNeg = (rangeHeightHalf - (rangeHeightHalf * 2));
				var halfCirclePlots = new Array(rangeHeight);

				for (x=1;x<=rangeHeight;x++)
				{
					halfCirclePlots[x] = 0;
				}

				var halfCirclePlotIndex = 0;

				for (y=circleRadiusNeg;y<=circleRadius;y++)
				{
					halfCirclePlotIndex = halfCirclePlotIndex + 1;
					for (x=circleRadiusNeg;x<=circleRadius;x++)
					{
			//			climateBuilderError.value += "\nChecking plot: "+x+","+y;
						if (((x * x) + (y * y)) <= (circleRadius * circleRadius))
						{
			//				climateBuilderError.value += " - It's in.";
							halfCirclePlots[halfCirclePlotIndex] = halfCirclePlots[halfCirclePlotIndex] + 1;
			//				climateBuilderError.value += " - halfCirclePlots["+halfCirclePlotIndex+"]: "+halfCirclePlots[halfCirclePlotIndex];
						}
					}
					if ((y+1) == (rangeHeightHalf / 2))
					{
						y = circleRadius;
					}
				}

				var desertPlotDistance = new Array((rangeHeight*2));
				var desertPlotIndex = 0;

				if (rangeHeightHalf == ((rangeHeight / 2) - 1))	//	EVEN
				{
					for (x=1;x<=(rangeHeightHalf+1);x++)
					{
						desertPlotIndex += 1;
						desertPlotDistance[desertPlotIndex] = halfCirclePlots[x];
			//			climateBuilderError.value += "\nPlot count ["+desertPlotIndex+"]: "+halfCirclePlots[x];
			//			climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
					}
					for (x=(rangeHeightHalf+1);x>=1;x--)
					{
						desertPlotIndex += 1;
						desertPlotDistance[desertPlotIndex] = halfCirclePlots[x];
			//			climateBuilderError.value += "\nPlot count ["+desertPlotIndex+"]: "+halfCirclePlots[x];
			//			climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
					}
				}
				else											//	ODD
				{
					for (x=1;x<=(rangeHeightHalf+1);x++)
					{
						desertPlotIndex += 1;
						desertPlotDistance[desertPlotIndex] = halfCirclePlots[x];
			//			climateBuilderError.value += "\nPlot count ["+desertPlotIndex+"]: "+halfCirclePlots[x];
			//			climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
					}
					for (x=rangeHeightHalf;x>=1;x--)
					{
						desertPlotIndex += 1;
						desertPlotDistance[desertPlotIndex] = halfCirclePlots[x];
			//			climateBuilderError.value += "\nPlot count ["+desertPlotIndex+"]: "+halfCirclePlots[x];
			//			climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
					}
				}

				//	CREATE THE DESERT ON THE LEEWARD SIDE

				climateBuilderError.value += "\n    Creating leeward side desert...";
				climateBuilderError.scrollTop = climateBuilderError.scrollHeight;

				desertPlotIndex=0;

				if 		(desertDepth==0)		{desertDepthPct = .50;}
				else if (desertDepth==1)		{desertDepthPct = .75;}
				else if (desertDepth==2)		{desertDepthPct = 1;}

				for (y=1;y<=mapSizeY;y++)
				{
					for (x=1;x<=mapSizeX;x++)
					{
						if (mapArrayDev[x][y]=="A")
						{
							desertPlotIndex += 1;

		//					for (z=1;z<=(Math.round((desertPlotDistance[desertPlotIndex])/2));z++)
		//					for (z=1;z<=desertPlotDistance[desertPlotIndex];z++)
							for (z=1;z<=(Math.round((desertPlotDistance[desertPlotIndex]) * desertDepthPct));z++)
							{
								if      (mapArrayDev[(x-z)][y] == "?")			{mapArrayDev[(x-z)][y] ="b";}
								else if (mapArrayDev[(x-z)][y] == "!")			{mapArrayDev[(x-z)][y] ="|";}
								else if (mapArrayDev[(x-z)][y] == "c")			{mapArrayDev[(x-z)][y] ="|";}
								else if (mapArrayDev[(x-z)][y] == "d")			{mapArrayDev[(x-z)][y] ="|";}
								else if (mapArrayDev[(x-z)][y] == "e")			{mapArrayDev[(x-z)][y] ="~";}
								else if (mapArrayDev[(x-z)][y] == "f")			{mapArrayDev[(x-z)][y] ="~";}
								else if (mapArrayDev[(x-z)][y] == "g")			{mapArrayDev[(x-z)][y] ="~";}
								else if (mapArrayDev[(x-z)][y] == "h")			{mapArrayDev[(x-z)][y] ="~";}
								else if (mapArrayDev[(x-z)][y] == "i")			{mapArrayDev[(x-z)][y] ="~";}
								else if (mapArrayDev[(x-z)][y] == "j")			{mapArrayDev[(x-z)][y] ="~";}

								else if (mapArrayDev[(x-z)][y] == ")")			{mapArrayDev[(x-z)][y] ="}";}
								else if (mapArrayDev[(x-z)][y] == "(")			{mapArrayDev[(x-z)][y] ="}";}
								else if (mapArrayDev[(x-z)][y] == "+")			{mapArrayDev[(x-z)][y] ="}";}
								else if (mapArrayDev[(x-z)][y] == "=")			{mapArrayDev[(x-z)][y] ="}";}
								else if (mapArrayDev[(x-z)][y] == "{")			{mapArrayDev[(x-z)][y] ="}";}
								else if (mapArrayDev[(x-z)][y] == "}")			{mapArrayDev[(x-z)][y] ="#";}

								else if (mapArrayDev[(x-z)][y] == "@")			{mapArrayDev[(x-z)][y] ="/";}
							}
							x = mapSizeX;
						}
					}
				}

				climateBuilderError.value += "\n    Leeward side desert complete.";
				climateBuilderError.scrollTop = climateBuilderError.scrollHeight;

				//	CREATE THE LUSH ZONE ON THE WINDWARD SIDE

				climateBuilderError.value += "\n    Creating windward side lush zone...";
				climateBuilderError.scrollTop = climateBuilderError.scrollHeight;

				desertPlotIndex=0;

				for (y=1;y<=mapSizeY;y++)
				{
					for (x=mapSizeX;x>=1;x--)
					{
						if (mapArrayDev[x][y]=="A")
						{
							desertPlotIndex += 1;

		//					for (z=1;z<=(Math.round((desertPlotDistance[desertPlotIndex])/2));z++)
		//					for (z=1;z<=desertPlotDistance[desertPlotIndex];z++)
							for (z=1;z<=(Math.round((desertPlotDistance[desertPlotIndex]) * 0.75));z++)
							{
								if      (mapArrayDev[(x+z)][y] == "b")			{mapArrayDev[(x+z)][y] ="?";}
								else if (mapArrayDev[(x+z)][y] == "c")			{mapArrayDev[(x+z)][y] ="d";}
								else if (mapArrayDev[(x+z)][y] == "d")			{mapArrayDev[(x+z)][y] ="e";}
								else if (mapArrayDev[(x+z)][y] == "e")			{mapArrayDev[(x+z)][y] ="f";}

								else if (mapArrayDev[(x+z)][y] == ")")			{mapArrayDev[(x+z)][y] ="(";}
							}
							x = 1;
						}
					}
				}

				climateBuilderError.value += "\n    Windward side lush zone complete.";
				climateBuilderError.scrollTop = climateBuilderError.scrollHeight;

				for (y=1;y<=mapSizeY;y++)
				{
					for (x=1;x<=mapSizeX;x++)
					{
						if (mapArrayDev[x][y] == "A")
						{
							mapArrayDev[x][y] = "B";
						}
					}
				}
			}
		}
		else
		{
			scanX = 1;

		//	climateBuilderError.value += "\nStarting scan at: "+scanX+","+scanY;
		//	climateBuilderError.scrollTop = climateBuilderError.scrollHeight;

			while (examinedTile != "a" && noMountainsFound == 0)
			{
				examinedTile = mapArrayDev[scanX][scanY];
				scanX = scanX + 1;

				if (scanY == mapSizeY && scanX > mapSizeX)
				{
					noMountainsFound = 1;
				}
				if (scanY < mapSizeY && scanX > mapSizeX)
				{
					scanX = 1;
					scanY = scanY + 1;
				}
			}

			if (noMountainsFound==0)
			{
				scanX = scanX - 1;

				numDeserts += 1;

				climateBuilderError.value += "\nFound mountain range "+numDeserts+" at: "+scanX+","+scanY;
				climateBuilderError.scrollTop = climateBuilderError.scrollHeight;

				climateBuilderError.value += "\n    Isolating range...";
				climateBuilderError.scrollTop = climateBuilderError.scrollHeight;

				mapArrayDev[scanX][scanY] = "A";

				for (passes=1;passes<=4;passes++)
				{
					for (y=1;y<=mapSizeY;y++)
					{
						for (x=1;x<=mapSizeX;x++)
						{
							if (mapArrayDev[x][y]=="A")
							{
								for (yy=-1;yy<=1;yy++)
								{
									yyy=yy;
									for (xx=-1;xx<=1;xx++)
									{
										xxx=xx;

										if ((x+xxx) < 1)
										{
											xxx = (mapSizeX-1);
										}
										else if ((x+xxx) > mapSizeX)
										{
											xxx = ((-mapSizeX)+1);
										}
										if ((y+yyy) < 1)
										{
											yyy = (mapSizeY-1);
										}
										else if ((y+yyy) > mapSizeY)
										{
											yyy = ((-mapSizeY)+1);
										}

										try
										{
											if (mapArrayDev[(x-0)+(xxx-0)][(y-0)+(yyy-0)]=="a")
											{
												mapArrayDev[(x-0)+(xxx-0)][(y-0)+(yyy-0)] = "A";
											}
										}
										catch(err)
										{
				//							climateBuilderError.value += "\nERROR (10168): x,y: "+x+","+y+"; xxx,yyy: "+xxx+","+yyy+"; PLOT: "+(x+xxx)+","+(y+yyy);
				//							climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
										}
									}
								}
							}
						}
					}

					for (y=mapSizeY;y>=1;y--)
					{
						for (x=mapSizeX;x>=1;x--)
						{
							if (mapArrayDev[x][y]=="A")
							{
								for (yy=-1;yy<=1;yy++)
								{
									yyy=yy;
									for (xx=-1;xx<=1;xx++)
									{
										xxx=xx;

										if ((x+xxx) < 1)
										{
											xxx = (mapSizeX-1);
										}
										else if ((x+xxx) > mapSizeX)
										{
											xxx = ((-mapSizeX)+1);
										}
										if ((y+yyy) < 1)
										{
											yyy = (mapSizeY-1);
										}
										else if ((y+yyy) > mapSizeY)
										{
											yyy = ((-mapSizeY)+1);
										}

										try
										{
											if (mapArrayDev[(x-0)+(xxx-0)][(y-0)+(yyy-0)]=="a")
											{
												mapArrayDev[(x-0)+(xxx-0)][(y-0)+(yyy-0)] = "A";
											}
										}
										catch(err)
										{
				//							climateBuilderError.value += "\nERROR (10216): x,y: "+x+","+y+"; xxx,yyy: "+xxx+","+yyy+"; PLOT: "+(x+xxx)+","+(y+yyy);
				//							climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
										}
									}
								}
							}
						}
					}

					for (y=1;y<=mapSizeY;y++)
					{
						for (x=mapSizeX;x>=1;x--)
						{
							if (mapArrayDev[x][y]=="A")
							{
								for (yy=-1;yy<=1;yy++)
								{
									yyy=yy;
									for (xx=-1;xx<=1;xx++)
									{
										xxx=xx;

										if ((x+xxx) < 1)
										{
											xxx = (mapSizeX-1);
										}
										else if ((x+xxx) > mapSizeX)
										{
											xxx = ((-mapSizeX)+1);
										}
										if ((y+yyy) < 1)
										{
											yyy = (mapSizeY-1);
										}
										else if ((y+yyy) > mapSizeY)
										{
											yyy = ((-mapSizeY)+1);
										}

										try
										{
											if (mapArrayDev[(x-0)+(xxx-0)][(y-0)+(yyy-0)]=="a")
											{
												mapArrayDev[(x-0)+(xxx-0)][(y-0)+(yyy-0)] = "A";
											}
										}
										catch(err)
										{
				//							climateBuilderError.value += "\nERROR (10264): x,y: "+x+","+y+"; xxx,yyy: "+xxx+","+yyy+"; PLOT: "+(x+xxx)+","+(y+yyy);
				//							climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
										}
									}
								}
							}
						}
					}

					for (y=mapSizeY;y>=1;y--)
					{
						for (x=1;x<=mapSizeX;x++)
						{
							if (mapArrayDev[x][y]=="A")
							{
								for (yy=-1;yy<=1;yy++)
								{
									yyy=yy;
									for (xx=-1;xx<=1;xx++)
									{
										xxx=xx;

										if ((x+xxx) < 1)
										{
											xxx = (mapSizeX-1);
										}
										else if ((x+xxx) > mapSizeX)
										{
											xxx = ((-mapSizeX)+1);
										}
										if ((y+yyy) < 1)
										{
											yyy = (mapSizeY-1);
										}
										else if ((y+yyy) > mapSizeY)
										{
											yyy = ((-mapSizeY)+1);
										}

										try
										{
											if (mapArrayDev[(x-0)+(xxx-0)][(y-0)+(yyy-0)]=="a")
											{
												mapArrayDev[(x-0)+(xxx-0)][(y-0)+(yyy-0)] = "A";
											}
										}
										catch(err)
										{
			//								climateBuilderError.value += "\nERROR (10311): x,y: "+x+","+y+"; xxx,yyy: "+xxx+","+yyy+"; PLOT: "+(x+xxx)+","+(y+yyy);
			//								climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
										}
									}
								}
							}
						}
					}
				}

			//	climateBuilderError.value += "\n16 passes completed to isolate range.";
			//	climateBuilderError.scrollTop = climateBuilderError.scrollHeight;

				rangePointArrayIndex = 0;

				for (y=1;y<=mapSizeY;y++)
				{
					for (x=1;x<=mapSizeX;x++)
					{
						if (mapArrayDev[x][y]=="A")
						{
							rangeHeight = rangeHeight + 1;
							x=1;
							y=y+1;
						}
					}
				}
				climateBuilderError.value += "\n    Range Height: "+rangeHeight;
				if ((rangeHeight % 2) == 0)
				{
			//		climateBuilderError.value += "\nRange Height is even.";
					rangeHeightHalf = (rangeHeight / 2) - 1;
				}
				else
				{
			//		climateBuilderError.value += "\nRange Height is odd.";
					rangeHeightHalf = ((rangeHeight-1) / 2);
				}
				climateBuilderError.scrollTop = climateBuilderError.scrollHeight;

			//	need to describe a half-circle and track the plots on each Y-axis line

				var circleDiameter = rangeHeight;
				var circleRadius = rangeHeightHalf;
				var circleRadiusNeg = (rangeHeightHalf - (rangeHeightHalf * 2));
				var halfCirclePlots = new Array(rangeHeight);

				for (x=1;x<=rangeHeight;x++)
				{
					halfCirclePlots[x] = 0;
				}

				var halfCirclePlotIndex = 0;

				for (y=circleRadiusNeg;y<=circleRadius;y++)
				{
					halfCirclePlotIndex = halfCirclePlotIndex + 1;
					for (x=circleRadiusNeg;x<=circleRadius;x++)
					{
			//			climateBuilderError.value += "\nChecking plot: "+x+","+y;
						if (((x * x) + (y * y)) <= (circleRadius * circleRadius))
						{
			//				climateBuilderError.value += " - It's in.";
							halfCirclePlots[halfCirclePlotIndex] = halfCirclePlots[halfCirclePlotIndex] + 1;
			//				climateBuilderError.value += " - halfCirclePlots["+halfCirclePlotIndex+"]: "+halfCirclePlots[halfCirclePlotIndex];
						}
					}
					if ((y+1) == (rangeHeightHalf / 2))
					{
						y = circleRadius;
					}
				}

				var desertPlotDistance = new Array((rangeHeight*2));
				var desertPlotIndex = 0;

				if (rangeHeightHalf == ((rangeHeight / 2) - 1))	//	EVEN
				{
					for (x=1;x<=(rangeHeightHalf+1);x++)
					{
						desertPlotIndex += 1;
						desertPlotDistance[desertPlotIndex] = halfCirclePlots[x];
		//				climateBuilderError.value += "\nPlot count ["+desertPlotIndex+"]: "+halfCirclePlots[x];
		//				climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
					}
					for (x=(rangeHeightHalf+1);x>=1;x--)
					{
						desertPlotIndex += 1;
						desertPlotDistance[desertPlotIndex] = halfCirclePlots[x];
		//				climateBuilderError.value += "\nPlot count ["+desertPlotIndex+"]: "+halfCirclePlots[x];
		//				climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
					}
				}
				else											//	ODD
				{
					for (x=1;x<=(rangeHeightHalf+1);x++)
					{
						desertPlotIndex += 1;
						desertPlotDistance[desertPlotIndex] = halfCirclePlots[x];
		//				climateBuilderError.value += "\nPlot count ["+desertPlotIndex+"]: "+halfCirclePlots[x];
		//				climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
					}
					for (x=rangeHeightHalf;x>=1;x--)
					{
						desertPlotIndex += 1;
						desertPlotDistance[desertPlotIndex] = halfCirclePlots[x];
		//				climateBuilderError.value += "\nPlot count ["+desertPlotIndex+"]: "+halfCirclePlots[x];
		//				climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
					}
				}

		//		climateBuilderError.value += "\nPlot count complete.";
		//		climateBuilderError.scrollTop = climateBuilderError.scrollHeight;

				//	CREATE THE DESERT ON THE LEEWARD SIDE

				climateBuilderError.value += "\n    Creating leeward side desert...";
				climateBuilderError.scrollTop = climateBuilderError.scrollHeight;

				desertPlotIndex=0;

				for (y=1;y<=mapSizeY;y++)
				{
		//			climateBuilderError.value += "\nScanning vertically. Y: "+y;
		//			climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
					for (x=mapSizeX;x>=1;x--)
					{
						if (mapArrayDev[x][y]=="A")
						{
		//					climateBuilderError.value += "\nFound desert tile at X: "+x;
		//					climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
							desertPlotIndex += 1;

		//					for (z=1;z<=(Math.round((desertPlotDistance[desertPlotIndex])/2));z++)
		//					for (z=1;z<=desertPlotDistance[desertPlotIndex];z++)
							for (z=1;z<=(Math.round((desertPlotDistance[desertPlotIndex]) * 0.75));z++)
							{
								if      (mapArrayDev[(x+z)][y] == "?")			{mapArrayDev[(x+z)][y] ="b";}
								else if (mapArrayDev[(x+z)][y] == "!")			{mapArrayDev[(x+z)][y] ="|";}
								else if (mapArrayDev[(x+z)][y] == "c")			{mapArrayDev[(x+z)][y] ="|";}
								else if (mapArrayDev[(x+z)][y] == "d")			{mapArrayDev[(x+z)][y] ="|";}
								else if (mapArrayDev[(x+z)][y] == "e")			{mapArrayDev[(x+z)][y] ="~";}
								else if (mapArrayDev[(x+z)][y] == "f")			{mapArrayDev[(x+z)][y] ="~";}
								else if (mapArrayDev[(x+z)][y] == "g")			{mapArrayDev[(x+z)][y] ="~";}
								else if (mapArrayDev[(x+z)][y] == "h")			{mapArrayDev[(x+z)][y] ="~";}
								else if (mapArrayDev[(x+z)][y] == "i")			{mapArrayDev[(x+z)][y] ="~";}
								else if (mapArrayDev[(x+z)][y] == "j")			{mapArrayDev[(x+z)][y] ="~";}

								else if (mapArrayDev[(x+z)][y] == ")")			{mapArrayDev[(x+z)][y] ="}";}
								else if (mapArrayDev[(x+z)][y] == "(")			{mapArrayDev[(x+z)][y] ="}";}
								else if (mapArrayDev[(x+z)][y] == "+")			{mapArrayDev[(x+z)][y] ="}";}
								else if (mapArrayDev[(x+z)][y] == "=")			{mapArrayDev[(x+z)][y] ="}";}
								else if (mapArrayDev[(x+z)][y] == "{")			{mapArrayDev[(x+z)][y] ="}";}
								else if (mapArrayDev[(x+z)][y] == "}")			{mapArrayDev[(x+z)][y] ="#";}

								else if (mapArrayDev[(x+z)][y] == "@")			{mapArrayDev[(x+z)][y] ="/";}
							}
							x = 1;
						}
					}
				}

				climateBuilderError.value += "\n    Leeward side desert complete.";
				climateBuilderError.scrollTop = climateBuilderError.scrollHeight;

				//	CREATE THE LUSH ZONE ON THE WINDWARD SIDE

				climateBuilderError.value += "\n    Creating windward side lush zone....";
				climateBuilderError.scrollTop = climateBuilderError.scrollHeight;

				desertPlotIndex=0;

				for (y=1;y<=mapSizeY;y++)
				{
					for (x=mapSizeX;x>=1;x--)
					{
						if (mapArrayDev[x][y]=="A")
						{

							desertPlotIndex += 1;

		//					for (z=1;z<=(Math.round((desertPlotDistance[desertPlotIndex])/2));z++)
		//					for (z=1;z<=desertPlotDistance[desertPlotIndex];z++)
							for (z=1;z<=(Math.round((desertPlotDistance[desertPlotIndex]) * 0.75));z++)
							{
								if      (mapArrayDev[(x-z)][y] == "b")			{mapArrayDev[(x-z)][y] ="?";}
								else if (mapArrayDev[(x-z)][y] == "c")			{mapArrayDev[(x-z)][y] ="d";}
								else if (mapArrayDev[(x-z)][y] == "d")			{mapArrayDev[(x-z)][y] ="e";}
								else if (mapArrayDev[(x-z)][y] == "e")			{mapArrayDev[(x-z)][y] ="f";}

								else if (mapArrayDev[(x-z)][y] == ")")			{mapArrayDev[(x-z)][y] ="(";}
							}
							x = 1;
						}
					}
				}
				climateBuilderError.value += "\n    Windward side lush zone complete.";
				climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
				for (y=1;y<=mapSizeY;y++)
				{
					for (x=1;x<=mapSizeX;x++)
					{
						if (mapArrayDev[x][y] == "A")
						{
							mapArrayDev[x][y] = "B";
						}
					}
				}
			}
		}
	}
	climateBuilderError.value += "\n[Desert creation complete.]";
	climateBuilderError.scrollTop = climateBuilderError.scrollHeight;
	desertsComplete();
}

function desertsComplete()
{
	document.getElementById("waitingClimate").style.display="none";
	document.getElementById("greenClimate").style.display="block";
}

function openClimateBuilder()
{
	document.getElementById("divConstructorStage2").style.display="none";
	document.getElementById("divClimateBuilder").style.display="block";
	divSplashOn = 0;
	divConstructorOn = 0;
	divConstructorStage2On = 0;
	divAboutOn = 0;
	divInstructionsOn = 0;
	divBuilderOn = 0;
	divClimateBuilderOn = 1;

	if (mapSizeX > 580)
	{
		canvasLeft = ((stage2Left+460) - ((mapSizeX-580)/2));
		picLeft = ((stage2Left) - ((mapSizeX-580)/2)) + 135;
		buttonLeft = (stage2Left - ((mapSizeX-580)/2)) + 235;
		sliderLeft = ((stage2Left+150) - ((mapSizeX-580)/2));
		textAreaLeft = ((stage2Left+315) - ((mapSizeX-580)/2));
		textLeft = ((stage2Left) - ((mapSizeX-580)/2));
		textIndentLeft = ((stage2Left) - ((mapSizeX-580)/2)) + 25;

		waitingClimate.style.left = buttonLeft+50;
		greenClimate.style.left = buttonLeft+50;

		climateDisplay.style.left = canvasLeft;
		textSpin.style.left = textLeft;
		textWestToEast.style.left = textIndentLeft;
		picWestToEast.style.left = picLeft;
		buttonWestToEast.style.left = buttonLeft;
		textEastToWest.style.left = textIndentLeft;
		picEastToWest.style.left = picLeft;
		buttonEastToWest.style.left = buttonLeft;
		textClimate.style.left = textLeft;
		textWet.style.left = textIndentLeft;
		buttonWet.style.left = buttonLeft;
		textMedium.style.left = textIndentLeft;
		buttonMedium.style.left = buttonLeft;
		textDry.style.left = textIndentLeft;
		buttonDry.style.left = buttonLeft;
		textTemperature.style.left = textLeft;
		textCold.style.left = textIndentLeft;
		buttonCold.style.left = buttonLeft;
		textTemperate.style.left = textIndentLeft;
		buttonTemperate.style.left = buttonLeft;
		textHot.style.left = textIndentLeft;
		buttonHot.style.left = buttonLeft;
		buttonAddClimate2.style.left = textLeft;
		buttonZoomEdit.style.left = textLeft;
		climateBuilderError.style.left = textLeft;
		buttonOpenTextDisplay.style.left = textLeft;

		textDesertDepth.style.left = textLeft;
		textAnkles.style.left = textIndentLeft;
		buttonAnkles.style.left = buttonLeft;
		textWaist.style.left = textIndentLeft;
		buttonWaist.style.left = buttonLeft;
		textNeck.style.left = textIndentLeft;
		buttonNeck.style.left = buttonLeft;
		buttonAddDeserts.style.left = textLeft;
	}

//	convertLandToTerrain();
	drawMap();
}

function browserCheck()
{
	if ((userAgent.search("Safari") > (-1)) && (userAgent.search("Chrome") == (-1)))
	{
		specificBrowser = "Safari";
	}
	else if (userAgent.search("Chrome") > (-1))
	{
		specificBrowser = "Chrome";
	}
	else if (userAgent.search("Firefox") > (-1))
	{
		specificBrowser = "Firefox";
	}
	else if (userAgent.search("Opera") > (-1))
	{
		specificBrowser = "Opera";
	}
	else if (browserName = "Microsoft Internet Explorer")
	{
		specificBrowser = "Internet Explorer";
	}
	else
	{
		specificBrowser = "No idea...";
	}

	if (platformName=="Win32")
	{
		specificPlatform = "PC";
	}
	else if (platformName=="MacIntel")
	{
		specificPlatform = "Mac";
	}
	else if (platformName=="iPhone")
	{
		specificPlatform = "iPhone";
	}
	else if (platformName=="iPad")
	{
		specificPlatform = "iPad";
	}
	else
	{
		specificPlatform = "No idea..."
	}
}

function makeGo()
{
	if (specificBrowser != "Internet Explorer" && specificBrowser != "Firefox")
	{
		document.getElementById("divHeader").style.display="block";
		document.getElementById("divSplash").style.display="block";
	//	document.getElementById("divClimateBuilder").style.display="block";
	}
	else if (specificBrowser == "Internet Explorer")
	{
		document.getElementById("divIE").style.display="block";
	}
	else if (specificBrowser == "Firefox")
	{
		document.getElementById("divFirefox").style.display="block";
	}
}

function jealousGod()
{
	builderError.value += "\nExodus 34:14";
	builderError.scrollTop = builderError.scrollHeight;
	displayRunGif = 10;
}

function hillsConfined()
{
	confineHills = 1;
	document.getElementById("hillsConfined").style.background="url(checked.png) no-repeat";
	document.getElementById("hillsWild").style.background="url(unchecked.png) no-repeat";
	builderError.value += "\nHilltops are confined to selected land areas.";
	builderError.scrollTop = builderError.scrollHeight;
}

function hillsWild()
{
	confineHills = 0;
	document.getElementById("hillsConfined").style.background="url(unchecked.png) no-repeat";
	document.getElementById("hillsWild").style.background="url(checked.png) no-repeat";
	builderError.value += "\nHilltops are wild and free!";
	builderError.scrollTop = builderError.scrollHeight;
}

function openSecondStage()
{
	divSplashOn = 0;
	divConstructorOn = 0;
	divConstructorStage2On = 0;
	divAboutOn = 0;
	divInstructionsOn = 0;
	divBuilderOn = 0;
	divClimateBuilderOn = 0;
	divLoadOn = 0;
	divWorldMapOn = 0;
	divCompressedTextOn = 0;
	divDisplayTextOn = 0;
	divZoomEditOn = 0;
	document.getElementById("divConstructor").style.display="none";
	document.getElementById("divConstructorStage2").style.display="block";
	divConstructorStage2On = 1;
	divConstructorOn = 0;
	waterLevelSlider.value = waterLevel;
	waterLevelTextArea.value = waterLevel;

	if      (mapSizeX < 250)						 {addShallowsSlider.value = 1; addShallowsTextArea.value = 1; addBeachesSlider.value = 1; addBeachesTextArea.value = 1; addRiversSlider.value = 1; addRiversTextArea.value = 1;}     // 125
//	if      (mapSizeX < 250)						 {addShallowsSlider.value = 1; addShallowsTextArea.value = 1; addBeachesSlider.value = 1; addBeachesTextArea.value = 1; addRiversSlider.value = 13; addRiversTextArea.value = 13;}     // 125
	else if (mapSizeX >= 250 && mapSizeX < 375)      {addShallowsSlider.value = 2; addShallowsTextArea.value = 2; addBeachesSlider.value = 1; addBeachesTextArea.value = 1; addRiversSlider.value = 25; addRiversTextArea.value = 25;}     // 250
	else if (mapSizeX >= 375 && mapSizeX < 500)      {addShallowsSlider.value = 3; addShallowsTextArea.value = 3; addBeachesSlider.value = 1; addBeachesTextArea.value = 1; addRiversSlider.value = 38; addRiversTextArea.value = 38;}     // 375
	else if (mapSizeX >= 500 && mapSizeX < 625)      {addShallowsSlider.value = 4; addShallowsTextArea.value = 4; addBeachesSlider.value = 1; addBeachesTextArea.value = 1; addRiversSlider.value = 50; addRiversTextArea.value = 50;}     // 500
	else if (mapSizeX >= 625 && mapSizeX < 750)      {addShallowsSlider.value = 4; addShallowsTextArea.value = 4; addBeachesSlider.value = 1; addBeachesTextArea.value = 1; addRiversSlider.value = 63; addRiversTextArea.value = 63;}     // 625
	else if (mapSizeX >= 750 && mapSizeX < 825)      {addShallowsSlider.value = 4; addShallowsTextArea.value = 4; addBeachesSlider.value = 1; addBeachesTextArea.value = 1; addRiversSlider.value = 75; addRiversTextArea.value = 75;}     // 750
	else if (mapSizeX >= 875 && mapSizeX < 1000)     {addShallowsSlider.value = 4; addShallowsTextArea.value = 4; addBeachesSlider.value = 1; addBeachesTextArea.value = 1; addRiversSlider.value = 88; addRiversTextArea.value = 88;}     // 875
	else if (mapSizeX >= 1000 && mapSizeX < 1125)    {addShallowsSlider.value = 4; addShallowsTextArea.value = 4; addBeachesSlider.value = 1; addBeachesTextArea.value = 1; addRiversSlider.value = 100; addRiversTextArea.value = 100;}     // 1000
	else if (mapSizeX >= 1125 && mapSizeX < 1250)    {addShallowsSlider.value = 4; addShallowsTextArea.value = 4; addBeachesSlider.value = 1; addBeachesTextArea.value = 1; addRiversSlider.value = 113; addRiversTextArea.value = 113;}     // 1125
	else if (mapSizeX >= 1250 && mapSizeX < 1375)    {addShallowsSlider.value = 4; addShallowsTextArea.value = 4; addBeachesSlider.value = 1; addBeachesTextArea.value = 1; addRiversSlider.value = 125; addRiversTextArea.value = 125;}     // 1250
	else if (mapSizeX >= 1375 && mapSizeX < 1500)    {addShallowsSlider.value = 4; addShallowsTextArea.value = 4; addBeachesSlider.value = 1; addBeachesTextArea.value = 1; addRiversSlider.value = 138; addRiversTextArea.value = 138;}     // 1375
	else if (mapSizeX >= 1500 && mapSizeX < 1625)    {addShallowsSlider.value = 4; addShallowsTextArea.value = 4; addBeachesSlider.value = 1; addBeachesTextArea.value = 1; addRiversSlider.value = 150; addRiversTextArea.value = 150;}     // 1500
	else if (mapSizeX >= 1625 && mapSizeX < 1875)    {addShallowsSlider.value = 4; addShallowsTextArea.value = 4; addBeachesSlider.value = 1; addBeachesTextArea.value = 1; addRiversSlider.value = 163; addRiversTextArea.value = 163;}     // 1625
	else if (mapSizeX >= 1875 && mapSizeX < 2000)    {addShallowsSlider.value = 4; addShallowsTextArea.value = 4; addBeachesSlider.value = 1; addBeachesTextArea.value = 1; addRiversSlider.value = 188; addRiversTextArea.value = 188;}     // 1875
	else if (mapSizeX >= 2000)    					 {addShallowsSlider.value = 4; addShallowsTextArea.value = 4; addBeachesSlider.value = 1; addBeachesTextArea.value = 1; addRiversSlider.value = 200; addRiversTextArea.value = 200;}     // 2000

	addLavaFlowsSlider.value = (numVolcanoesStart * 3);
	addLavaFlowsTextArea.value = (numVolcanoesStart * 3);

	getTime();
	stage2Error.value += "\n[2nd stage recommendations set.]";
	stage2Error.scrollTop = stage2Error.scrollHeight;

//	stage2Left = (((windowWidth-10)/2)-515);

	if (mapSizeX > 580)
	{
		canvasLeft = ((stage2Left+460) - ((mapSizeX-580)/2));
		buttonLeft = (stage2Left - ((mapSizeX-580)/2));
		sliderLeft = ((stage2Left+150) - ((mapSizeX-580)/2));
		textAreaLeft = ((stage2Left+315) - ((mapSizeX-580)/2));
		textLeft = ((stage2Left+350) - ((mapSizeX-580)/2));

		drawDisplay.style.left = canvasLeft;
		canvasImageConstructor.style.left = canvasLeft;
		canvasImageClimateBuilder.style.left = canvasLeft;

		buttonChangeWaterLevel.style.left = buttonLeft;
		waterLevelSlider.style.left = sliderLeft;
		waterLevelTextArea.style.left = textAreaLeft;

		buttonAddShallows.style.left = buttonLeft;
		addShallowsSlider.style.left = sliderLeft;
		addShallowsTextArea.style.left = textAreaLeft;
		textShallows.style.left = textLeft;

		buttonAddBeaches.style.left = buttonLeft;
		addBeachesSlider.style.left = sliderLeft;
		addBeachesTextArea.style.left = textAreaLeft;
		textBeaches.style.left = textLeft;

		buttonLavaCurvyness.style.left = buttonLeft;
		lavaCurvynessSlider.style.left = sliderLeft;
		lavaCurvynessTextArea.style.left = textAreaLeft;
		textLavaCurvyness.style.left = textLeft;

		buttonAddLavaFlows.style.left = buttonLeft;
		addLavaFlowsSlider.style.left = sliderLeft;
		addLavaFlowsTextArea.style.left = textAreaLeft;
		textLavaFlows.style.left = textLeft;

		buttonRiverCurvyness.style.left = buttonLeft;
		riverCurvynessSlider.style.left = sliderLeft;
		riverCurvynessTextArea.style.left = textAreaLeft;
		textRiverCurvyness.style.left = textLeft;

		textRiverWidth.style.left = buttonLeft;
		buttonRiverNarrow.style.left = sliderLeft;
		textRiversRegular.style.left = sliderLeft+35;
		buttonRiverWide.style.left = textAreaLeft;
		textRiversWide.style.left = textLeft

		buttonAddRivers.style.left = buttonLeft;
		addRiversSlider.style.left = sliderLeft;
		addRiversTextArea.style.left = textAreaLeft;
		textRivers.style.left = textLeft;

		buttonEraseChanges.style.left = buttonLeft;

		buttonCopyTextArray.style.left = buttonLeft;
		buttonCopyTextArrayNCR.style.left = buttonLeft+220;
		buttonAddClimate.style.left = buttonLeft;

		stage2Error.style.left = buttonLeft;
	}

	if (numVolcanoesStart < 1)
	{
		buttonAddLavaFlows.disabled=true;
	}

	doPrintWorld = 1;
}

function returnToBuilder()
{
	document.getElementById("divConstructor").style.display="none";
	document.getElementById("red").style.display="none";
	document.getElementById("buttonReturnToBuilder").style.display="none";
	document.getElementById("waiting").style.display="block";
	document.getElementById("divBuilder").style.display="block";
}

function assemblePresetString()
{
//	mapSizeX

	if (mapSizeX > 999)				{presetString = "U" + mapSizeX.toString();}
	else							{presetString = "U0" + mapSizeX.toString();}

//	mapSizeY

	if (mapSizeY > 999)				{presetString += mapSizeY.toString();}
	else							{presetString += "0" + mapSizeY.toString();}

//	elevations

	if (elevations > 9)				{presetString += elevations.toString();}
	else							{presetString += "0" + elevations.toString();}

//	numMtnRanges

	if (numMtnRanges > 99)			{presetString += numMtnRanges.toString();}
	else if (numMtnRanges > 9 &&
			 numMtnRanges < 100)	{presetString += "0" + numMtnRanges.toString();}
	else							{presetString += "00" + numMtnRanges.toString();}

//	maxMtnLength

	if (maxMtnLength > 99)			{presetString += maxMtnLength.toString();}
	else if (maxMtnLength > 9 &&
			 maxMtnLength < 100)	{presetString += "0" + maxMtnLength.toString();}
	else							{presetString += "00" + maxMtnLength.toString();}

//	maxMtnGirth

	if (maxMtnGirth > 9)			{presetString += maxMtnGirth.toString();}
	else							{presetString += "0" + maxMtnGirth.toString();}

//	numHillRanges

	if (numHillRanges > 99)			{presetString += numHillRanges.toString();}
	else if (numHillRanges > 9 &&
			 numHillRanges < 100)	{presetString += "0" + numHillRanges.toString();}
	else							{presetString += "00" + numHillRanges.toString();}

//	maxHillLength

	if (maxHillLength > 99)			{presetString += maxHillLength.toString();}
	else if (maxHillLength > 9 &&
			 maxHillLength < 100)	{presetString += "0" + maxHillLength.toString();}
	else							{presetString += "00" + maxHillLength.toString();}

//	maxHillGirth

	if (maxHillGirth > 9)			{presetString += maxHillGirth.toString();}
	else							{presetString += "0" + maxHillGirth.toString();}

//	hillCurvyness

	if (hillCurvyness > 99)			{presetString += hillCurvyness.toString();}
	else if (hillCurvyness > 9 &&
			 hillCurvyness < 100)	{presetString += "0" + hillCurvyness.toString();}
	else							{presetString += "00" + hillCurvyness.toString();}

//	landSlope

	if (landSlope > 99)             {presetString += landSlope.toString();}
	else                            {presetString += "0" + landSlope.toString();}

//	numVolcanoes

	if (numVolcanoes > 99)			{presetString += numVolcanoes.toString();}
	else if (numVolcanoes > 9 &&
			 numVolcanoes < 100)	{presetString += "0" + numVolcanoes.toString();}
	else							{presetString += "00" + numVolcanoes.toString();}

//	maxVolcanoSize

	if (maxVolcanoSize > 99)		{presetString += maxVolcanoSize.toString();}
	else if (maxVolcanoSize > 9 &&
			 maxVolcanoSize < 100)	{presetString += "0" + maxVolcanoSize.toString();}
	else							{presetString += "00" + maxVolcanoSize.toString();}

//	landUniformity

	if (landUniformity > 99)		{presetString += landUniformity.toString();}
	else if (landUniformity > 9 &&
			 landUniformity < 100)	{presetString += "0" + landUniformity.toString();}
	else							{presetString += "00" + landUniformity.toString();}

//	confineHills

	presetString += confineHills.toString();

	presetString = presetString + "0000000000000000000";

//	READ IN CHECKBOX Array

	for (y=1;y<=50;y++)
	{
		for (x=1;x<=50;x++)
		{
			if (boxAddressArray[x][y]=="land")
			{
				presetString = presetString + "1";
			}
			else
			{
				presetString = presetString + "0";
			}
		}
	}

//	builderError.value += "\nPreset string: " + presetString;
	builderError.scrollTop = builderError.scrollHeight;
}

function setThePreset()
{
	if (settingPreset==1)
	{
		gatherBuilderValues();
		if (errorText == "")
		{
			assemblePresetString();
			if (activePreset==1)				{localStorage.preset1 = presetString;}
			else if (activePreset==2)			{localStorage.preset2 = presetString;}
			else if (activePreset==3)			{localStorage.preset3 = presetString;}
			else if (activePreset==4)			{localStorage.preset4 = presetString;}
			else if (activePreset==5)			{localStorage.preset5 = presetString;}
			else if (activePreset==6)			{localStorage.preset6 = presetString;}
			builderError.value += "\nPreset "+activePreset+" SET.";
		//	builderError.value += "\nPreset string: " + presetString;
		//	builderError.scrollTop = builderError.scrollHeight;
			settingPreset = 0;
		}
		else
		{
			builderError.value += "\n[*** ERROR ***]" + errorText;
			builderError.scrollTop = builderError.scrollHeight;
			errorText = "";
		}
	}
	else if (restoringPreset==1)
	{
		if (activePreset==1)				{presetString = preset1Default; localStorage.preset1 = presetString;}
		else if (activePreset==2)			{presetString = preset2Default; localStorage.preset2 = presetString;}
		else if (activePreset==3)			{presetString = preset3Default; localStorage.preset3 = presetString;}
		else if (activePreset==4)			{presetString = preset4Default; localStorage.preset4 = presetString;}
		else if (activePreset==5)			{presetString = preset5Default; localStorage.preset5 = presetString;}
		else if (activePreset==6)			{presetString = preset6Default; localStorage.preset6 = presetString;}
		parseAndInstallPresetValues();
		builderError.value += "\nPreset "+activePreset+" RESTORED.";
		builderError.scrollTop = builderError.scrollHeight;
		restoringPreset = 0;
	}
	else
	{
		loadPresetValues();
		if (presetString.substr(0,1) == "U")
		{
			builderError.value += "\nPreset "+activePreset+" LOADED.";
		}
		else
		{
			if (activePreset==1)
			{
				presetString = preset1Default;
			}
			else if (activePreset==2)
			{
				presetString = preset2Default;
			}
			else if (activePreset==3)
			{
				presetString = preset3Default;
			}
			else if (activePreset==4)
			{
				presetString = preset4Default;
			}
			else if (activePreset==5)
			{
				presetString = preset5Default;
			}
			else if (activePreset==6)
			{
				presetString = preset6Default;
			}
			builderError.value += "\nPreset "+activePreset+" [default] LOADED.";
		}
		parseAndInstallPresetValues();
//		builderError.value += "\nPreset string: " + presetString;
		builderError.scrollTop = builderError.scrollHeight;
	}
	restoreDisplay();
}

function parseAndInstallPresetValues()
{

//			  111111111122222222223333333333444444444455555555556666666666
//	01234567890123456789012345678901234567890123456789012345678901234567890
//	D05000500300300100302501003080108006008025
//	-||||----||---|||--|||---||---|||---|||---
//	U0500050030030010030250100308010800600802500000000000000000000100000000

	widthTextArea.value = parseInt(presetString.substr(1,4),10);
	widthSlider.value = widthTextArea.value;
	showWidth();

	heightTextArea.value = parseInt(presetString.substr(5,4),10);
	heightSlider.value = heightTextArea.value;
	showHeight();

	elevationsTextArea.value = parseInt(presetString.substr(9,2),10);
	elevationsSlider.value = elevationsTextArea.value;

	numMtnRangesTextArea.value = parseInt(presetString.substr(11,3),10);
	numMtnRangesSlider.value = numMtnRangesTextArea.value;

	maxMtnLengthTextArea.value = parseInt(presetString.substr(14,3),10);
	maxMtnLengthSlider.value = maxMtnLengthTextArea.value;

	maxMtnGirthTextArea.value = parseInt(presetString.substr(17,2),10);
	maxMtnGirthSlider.value = maxMtnGirthTextArea.value;

	numHillRangesTextArea.value = parseInt(presetString.substr(19,3),10);
	numHillRangesSlider.value = numHillRangesTextArea.value;

	maxHillLengthTextArea.value = parseInt(presetString.substr(22,3),10);
	maxHillLengthSlider.value = maxHillLengthTextArea.value;

	maxHillGirthTextArea.value = parseInt(presetString.substr(25,2),10);
	maxHillGirthSlider.value = maxHillGirthTextArea.value;

	hillCurvynessTextArea.value = parseInt(presetString.substr(27,3),10);
	hillCurvynessSlider.value = hillCurvynessTextArea.value;

	landSlopeTextArea.value = parseInt(presetString.substr(30,3),10);
	landSlopeSlider.value = landSlopeTextArea.value;

	numVolcanoesTextArea.value = parseInt(presetString.substr(33,3),10);
	numVolcanoesSlider.value = numVolcanoesTextArea.value;

	maxVolcanoSizeTextArea.value = parseInt(presetString.substr(36,3),10);
	maxVolcanoSizeSlider.value = maxVolcanoSizeTextArea.value;

	landUniformityTextArea.value = parseInt(presetString.substr(39,3),10);
	landUniformitySlider.value = landUniformityTextArea.value;

	if (presetString.substr(42,1) == "1")
	{
		confineHills = 1;
		document.getElementById("hillsConfined").style.background="url(checked.png) no-repeat";
		document.getElementById("hillsWild").style.background="url(unchecked.png) no-repeat";
	}
	else
	{
		confineHills = 0;
		document.getElementById("hillsConfined").style.background="url(unchecked.png) no-repeat";
		document.getElementById("hillsWild").style.background="url(checked.png) no-repeat";
	}

	z = 62;

	for (y=1;y<=50;y++)
	{
		for (x=1;x<=50;x++)
		{
			if (presetString.substr(z,1) == "1")
			{
				document.getElementById("checkboxx"+(x)+"y"+(y)).style.background="url(boxgreen10.png) no-repeat";
				boxAddressArray[x][y] = "land";
			}
			else
			{
				document.getElementById("checkboxx"+(x)+"y"+(y)).style.background="url(boxblue10.png) no-repeat";
				boxAddressArray[x][y] = "ocean";
			}

			z++;
		}
	}

	setGrowthCurve();
}

function loadPresetValues()
{
	if (activePreset==1)				{presetString = localStorage.preset1;}
	else if (activePreset==2)			{presetString = localStorage.preset2;}
	else if (activePreset==3)			{presetString = localStorage.preset3;}
	else if (activePreset==4)			{presetString = localStorage.preset4;}
	else if (activePreset==5)			{presetString = localStorage.preset5;}
	else if (activePreset==6)			{presetString = localStorage.preset6;}

//	builderError.value += "\n"+presetString;
}

function gatherBuilderValues()
{
	mapSizeX = widthTextArea.value;
	mapSizeY = heightTextArea.value;
	elevations = elevationsTextArea.value;
	numMtnRanges = numMtnRangesTextArea.value;
	maxMtnLength = maxMtnLengthTextArea.value;
	maxMtnGirth = maxMtnGirthTextArea.value;
	numHillRanges = numHillRangesTextArea.value;
	maxHillLength = maxHillLengthTextArea.value;
	maxHillGirth = maxHillGirthTextArea.value;
	hillCurvyness = hillCurvynessTextArea.value;
//	hillMultiplier = (hillMultiplierTextArea.value / 100);
	landSlope = landSlopeTextArea.value;
	numVolcanoes = numVolcanoesTextArea.value;
	numVolcanoesStart = numVolcanoesTextArea.value;
	maxVolcanoSize = maxVolcanoSizeTextArea.value;
	landUniformity = landUniformityTextArea.value;
	checkBuilderValues();
}

function checkBuilderValues()
{
	if (mapSizeX < 100 || mapSizeX > 2000 || isNaN(mapSizeX))
	{
		errorText += "\n[Map width out of specification!]";
	}
	if (mapSizeY < 100 || mapSizeY > 2000 || isNaN(mapSizeY))
	{
		errorText += "\n[Map height out of specification!]";
	}
	if (elevations < 1 || elevations > 30 || isNaN(elevations))
	{
		errorText += "\n[Elevations out of specification!]";
	}
	if (numMtnRanges < 0 || numMtnRanges > 200 || isNaN(numMtnRanges))
	{
		errorText += "\n[Max # of mountain ranges out of specification!]";
	}
	if (maxMtnLength < 1 || maxMtnLength > 200 || isNaN(maxMtnLength))
	{
		errorText += "\n[Max mountain Range length out of specification!]";
	}
	if (maxMtnGirth < 1 || maxMtnGirth > 21 || isNaN(maxMtnGirth))
	{
		errorText += "\n[Max mountain Range girth out of specification!]";
	}
	if (numHillRanges < 0 || numHillRanges > 500 || isNaN(numHillRanges))
	{
		errorText += "\n[Max # of hill ranges out of specification!]";
	}
	if (maxHillLength < 1 || maxHillLength > 100 || isNaN(maxHillLength))
	{
		errorText += "\n[Max hill Range length out of specification!]";
	}
	if (maxHillGirth < 1 || maxHillGirth > 21 || isNaN(maxHillGirth))
	{
		errorText += "\n[Max hill Range girth out of specification!]";
	}
	if (hillCurvyness < 0 || hillCurvyness > 100 || isNaN(hillCurvyness))
	{
		errorText += "\n[Hill curvyness out of specification!]";
	}
	if (landSlope < 50 || landSlope > 200 || isNaN(landSlope))
	{
		errorText += "\n[Land slope out of specification!]";
	}
	if (numVolcanoes < 0 || numVolcanoes > 100 || isNaN(numVolcanoes))
	{
		errorText += "\n[Max # of volcanoes out of specification!]";
	}
	if (maxVolcanoSize < 4 || maxVolcanoSize > 100 || isNaN(maxVolcanoSize))
	{
		errorText += "\n[Max volcano size out of specification!]";
	}
	if (landUniformity < 1 || landUniformity > 100 || isNaN(landUniformity))
	{
		errorText += "\n[Land uniformity out of specification!]";
	}
}

function restorePreset()
{
	document.getElementById("buttonRestorePreset").style.display="none";
	document.getElementById("buttonCancelRestorePreset").style.display="block";
	buttonSetPreset.disabled=true;
	buttonDrawLand.disabled=true;
	buttonEraseLand.disabled=true;
	buttonSelectAll.disabled=true;
	buttonClearAll.disabled=true;
	buttonRandomLand.disabled=true;
	buttonPreset1.disabled=false;
	buttonPreset2.disabled=false;
	buttonPreset3.disabled=false;
	buttonPreset4.disabled=false;
	buttonPreset5.disabled=false;
	buttonPreset6.disabled=false;
	restoringPreset = 1;
	builderError.value += "\nRESTORE Preset...";
	builderError.scrollTop = builderError.scrollHeight;
}

function setPreset()
{
	document.getElementById("buttonSetPreset").style.display="none";
	document.getElementById("buttonCancelSetPreset").style.display="block";
	buttonRestorePreset.disabled=true;
	buttonDrawLand.disabled=true;
	buttonEraseLand.disabled=true;
	buttonSelectAll.disabled=true;
	buttonClearAll.disabled=true;
	buttonRandomLand.disabled=true;
	buttonPreset1.disabled=false;
	buttonPreset2.disabled=false;
	buttonPreset3.disabled=false;
	buttonPreset4.disabled=false;
	buttonPreset5.disabled=false;
	buttonPreset6.disabled=false;
	settingPreset = 1;
	builderError.value += "\nSET Preset...";
	builderError.scrollTop = builderError.scrollHeight;
}

function restoreDisplay()
{
	document.getElementById("buttonSetPreset").style.display="block";
	document.getElementById("buttonCancelSetPreset").style.display="none";
	document.getElementById("buttonRestorePreset").style.display="block";
	document.getElementById("buttonCancelRestorePreset").style.display="none";
	buttonSetPreset.disabled=false;
	buttonRestorePreset.disabled=false;
	if (drawingLand==0)		{buttonDrawLand.disabled=false;}
	if (drawingLand==1)		{buttonEraseLand.disabled=false;}
	buttonSelectAll.disabled=false;
	buttonClearAll.disabled=false;
	buttonRandomLand.disabled=false;

	if (activePreset==1)			{buttonPreset1.disabled=true;}
	else							{buttonPreset1.disabled=false;}

	if (activePreset==2)			{buttonPreset2.disabled=true;}
	else							{buttonPreset2.disabled=false;}

	if (activePreset==3)			{buttonPreset3.disabled=true;}
	else							{buttonPreset3.disabled=false;}

	if (activePreset==4)			{buttonPreset4.disabled=true;}
	else							{buttonPreset4.disabled=false;}

	if (activePreset==5)			{buttonPreset5.disabled=true;}
	else							{buttonPreset5.disabled=false;}

	if (activePreset==6)			{buttonPreset6.disabled=true;}
	else							{buttonPreset6.disabled=false;}
}

function cancelRestorePreset()
{
	restoreDisplay();
	restoringPreset = 0;
	builderError.value += "\nCANCEL restore Preset.";
	builderError.scrollTop = builderError.scrollHeight;
}

function cancelSetPreset()
{
	restoreDisplay();
	settingPreset = 0;
	builderError.value += "\nCANCEL set Preset.";
	builderError.scrollTop = builderError.scrollHeight;
}

function checkForAboutArrow()
{
//	localStorage.aboutArrow = 0;
	if (localStorage.aboutArrow == "1")
	{
		document.getElementById("aboutArrowPic").style.display="none";
	}
	localStorage.aboutArrow = "1";
}

function checkAndLoadPreset1()
{
	if (specificBrowser=="Safari" || specificBrowser=="Chrome" || specificBrowser=="Opera")
	{
		if (localStorage.preset1 == null)
		{
			localStorage.preset1 = preset1Default;
		}
		if (localStorage.preset2 == null)
		{
			localStorage.preset2 = preset2Default;
		}
		if (localStorage.preset3 == null)
		{
			localStorage.preset3 = preset3Default;
		}
		if (localStorage.preset4 == null)
		{
			localStorage.preset4 = preset4Default;
		}
		if (localStorage.preset5 == null)
		{
			localStorage.preset5 = preset5Default;
		}
		if (localStorage.preset6 == null)
		{
			localStorage.preset6 = preset6Default;
		}
		if (localStorage.preset1.substr(0,1) == "U")
		{
			presetString = localStorage.preset1;
			builderError.value = "Preset 1 LOADED.";
			builderError.scrollTop = builderError.scrollHeight;
		}
		else
		{
			presetString = preset1Default;
			builderError.value = "Preset 1 [default] LOADED.";
			builderError.scrollTop = builderError.scrollHeight;
		}
		parseAndInstallPresetValues();
	}
	else
	{
		presetString = preset1Default;
	}
}

function clearLocalStorage()
{
	localStorage.preset1 = "";
	localStorage.preset2 = "";
	localStorage.preset3 = "";
	localStorage.preset4 = "";
	localStorage.preset5 = "";
	localStorage.preset6 = "";
	builderError.value += "\nClear localStorage.";
	builderError.scrollTop = builderError.scrollHeight;
}

function toggleEraseLand()
{
	drawingLand=0;
	buttonEraseLand.disabled=true;
	buttonDrawLand.disabled=false;
	builderError.value += "\nERASE land.";
	builderError.scrollTop = builderError.scrollHeight;
}

function toggleDrawLand()
{
	drawingLand=1;
	buttonEraseLand.disabled=false;
	buttonDrawLand.disabled=true;
	builderError.value += "\nDRAW land.";
	builderError.scrollTop = builderError.scrollHeight;
}

function changeBox()
{
	brushSize = brushSizeSlider.value;

	brushRadius = (Math.round(brushSize / 2)) - 1;
	brushRadiusNeg = brushRadius - (2 * brushRadius);

	for (y = brushRadiusNeg; y <= brushRadius; y++)
	{
		for (x = brushRadiusNeg; x <= brushRadius; x++)
		{

			if ((changeX+x) < 1 || (changeX+x) > 50 || (changeY+y) < 1 || (changeY+y) > 50)
			{

			}
			else
			{
				if (drawingLand==1)
				{
					if ((x * x) + (y * y) <= (brushRadius * brushRadius))
					{
						document.getElementById("checkboxx"+(changeX+x)+"y"+(changeY+y)).style.background="url(boxgreen10.png) no-repeat";
						boxAddressArray[changeX+x][changeY+y] = "land";
					}
					else
					{

					}
				}
				else
				{
					if ((x * x) + (y * y) <= (brushRadius * brushRadius))
					{
						document.getElementById("checkboxx"+(changeX+x)+"y"+(changeY+y)).style.background="url(boxblue10.png) no-repeat";
						boxAddressArray[changeX+x][changeY+y] = "ocean";
					}
					else
					{

					}
				}
			}
		}
	}
}

function createRandomLand()
{
	builderError.value += "\nGenerate RANDOM land at "+randomLandSlider.value+"% saturation.";
	builderError.scrollTop = builderError.scrollHeight;
	checkboxChance = randomLandSlider.value;

	for (y=1;y<=50;y++)
	{
		for (x=1;x<=50;x++)
		{
			randomNumber=Math.floor(Math.random()*100)+1;
			if (randomNumber <= checkboxChance)
			{
				document.getElementById("checkboxx"+(x)+"y"+(y)).style.background="url(boxgreen10.png) no-repeat";
				boxAddressArray[x][y] = "land";
			}
		}
	}
}

function selectAll()
{
	builderError.value += "\nSelect ALL land.";
	builderError.scrollTop = builderError.scrollHeight;
	for (y=1;y<=50;y++)
	{
		for (x=1;x<=50;x++)
		{
			document.getElementById("checkboxx"+(x)+"y"+(y)).style.background="url(boxgreen10.png) no-repeat";
			boxAddressArray[x][y] = "land";
		}
	}
	drawingLand=0;
	buttonEraseLand.disabled=true;
	buttonDrawLand.disabled=false;
}

function clearAll()
{
	builderError.value += "\nClear ALL land.";
	builderError.scrollTop = builderError.scrollHeight;
	for (y=1;y<=50;y++)
	{
		for (x=1;x<=50;x++)
		{
			document.getElementById("checkboxx"+(x)+"y"+(y)).style.background="url(boxblue10.png) no-repeat";
			boxAddressArray[x][y] = "ocean";
		}
	}
	drawingLand=1;
	buttonEraseLand.disabled=false;
	buttonDrawLand.disabled=true;
}

function setHillMultiplier()
{
	hillMultiplierFactor[1] = numHillRanges;
	for (x=2;x<=31;x++)
	{
		hillMultiplierFactor[x] = Math.round(hillMultiplierFactor[x-1] * hillMultiplier);
	}
}

function setGrowthCurve()
{
	for (x=1;x<=30;x++)
	{
		growth[x] = (growth[x-1] * (landSlopeSlider.value / 100)) + (Math.round(maxMtnGirthSlider.value / 2))
//		growth[x] = (growth[x-1] * (landSlopeSlider.value / 100)) + (Math.round(maxMtnGirthSlider.value / 2)) - growth[x-1];
//		builderError.value=builderError.value+"\n"+x+ "\t" +Math.round(growth[x]);
	}

//	growth2[1] = 1
//	growth[1] = (growth2[1]-0) + (maxMtnGirthSlider.value-0);
//	growth[1] = maxMtnGirthSlider.value;
//	growth[1] = Math.round(maxMtnGirthSlider.value / 2);

//	negativeGrowth = (Math.round(.5 * growth[1]))-1;

//	builderError.value=builderError.value+"\n1\t"+Math.round(growth[1])+"\t"+Math.round(.5 * growth[1])+"\t"+negativeGrowth;

//	for (x=2;x<=(elevationsSlider.value);x++)
//	{
//		growth2[x] = (growth2[(x-1)] * (landSlopeSlider.value / 100));
//		growth[x] = (growth2[x]-0)+(maxMtnGirthSlider.value-0);
//		growth[x] = (growth[(x-1)] * (landSlopeSlider.value / 100));
//		growth[x] = (growth[(x-1)] * (landSlopeSlider.value / 100)) + Math.round(maxMtnGirthSlider.value / 2);
//		growth[x] = ((growth[x-1])-0) + ((growth[1])-0);

//		builderError.value=builderError.value+"\n"+x+ "\t" +Math.round(growth[x])+"\t"+Math.round(.5 * growth[x]);
//	}

//	growth[1] = growth[1] + maxMtnGirthSlider.value;

	var canvasThing=document.getElementById("slopeDisplay");

	if (specificBrowser=="Safari" || specificBrowser=="Chrome" || specificBrowser=="Opera")
	{
		var cxt=canvasThing.getContext("2d");

	//	cxt.fillRect(0,0,(2 * Math.round(growth[x])),2);
	//	builderError.value="";
	//	cxt.fillStyle="#000000";
		cxt.clearRect(0,0,500,30);
		for (x=1;x<=(elevationsSlider.value);x++)
		{
	//		builderError.value=builderError.value+growth[x]+ "\t" +Math.round(growth[x])+"\n";

			cxt.fillRect
			(

			//	x,
			//	y,
			//	width,
			//	height

				(250-(Math.round(growth[x]))),
				(x-1),
				(2*(Math.round(growth[x]))),
				(1)
			);

		}
	//	builderError.scrollTop = builderError.scrollHeight;
	}
}

function showWidth()
{
	widthTextArea.value=widthSlider.value;
	if (widthTextArea.value > 1000)
	{
		document.getElementById("exclamationWidth").style.display="block";
	}
	else
	{
		document.getElementById("exclamationWidth").style.display="none";
	}
}

function showHeight()
{
	heightTextArea.value=heightSlider.value;
	if (heightTextArea.value > 1000)
	{
		document.getElementById("exclamationHeight").style.display="block";
	}
	else
	{
		document.getElementById("exclamationHeight").style.display="none";
	}
}

function showElevations()
{
	elevationsTextArea.value=elevationsSlider.value;
	setGrowthCurve();
}

function showNumMtnRanges()
{
	numMtnRangesTextArea.value=numMtnRangesSlider.value;
}

function showMaxMtnLength()
{
	maxMtnLengthTextArea.value=maxMtnLengthSlider.value;
}

function showMaxMtnGirth()
{
	maxMtnGirthTextArea.value=maxMtnGirthSlider.value;
	setGrowthCurve();
}

function showNumHillRanges()
{
	numHillRangesTextArea.value=numHillRangesSlider.value;
}

function showMaxHillLength()
{
	maxHillLengthTextArea.value=maxHillLengthSlider.value;
}

function showMaxHillGirth()
{
	maxHillGirthTextArea.value=maxHillGirthSlider.value;
}

function showHillCurvyness()
{
	hillCurvynessTextArea.value=hillCurvynessSlider.value;
}

function showLandSlope()
{
	landSlopeTextArea.value=landSlopeSlider.value;
	setGrowthCurve();
}

function showNumVolcanoes()
{
	numVolcanoesTextArea.value=numVolcanoesSlider.value;
}

function showMaxVolcanoSize()
{
	maxVolcanoSizeTextArea.value=maxVolcanoSizeSlider.value;
}

function showLandUniformity()
{
	landUniformityTextArea.value=landUniformitySlider.value;
}

function showBrushSize()
{
	brushSizeTextArea.value=brushSizeSlider.value;
}

function showRandomLand()
{
	randomLandTextArea.value=randomLandSlider.value;
}

function showWaterLevel()
{
	waterLevelTextArea.value=waterLevelSlider.value;
}

function showHillMultiplier()
{
	hillMultiplierTextArea.value=hillMultiplierSlider.value;
//	setHillMultiplier();
}

function showNumRivers()
{
	addRiversTextArea.value=addRiversSlider.value;
}

function showNumShallows()
{
	addShallowsTextArea.value=addShallowsSlider.value;
}

function showNumBeaches()
{
	addBeachesTextArea.value=addBeachesSlider.value;
}

function showNumLavaFlows()
{
	addLavaFlowsTextArea.value=addLavaFlowsSlider.value;
}

function showLavaCurvyness()
{
	lavaCurvynessTextArea.value=lavaCurvynessSlider.value;
}

function showRiverCurvyness()
{
	riverCurvynessTextArea.value=riverCurvynessSlider.value;
}

function newPlotRiver3()
{
	try
	{
		if (thisIsLava==1)
		{
			flowCharacter = "*";
		}
		else
		{
			flowCharacter = "R";
		}

		if
		(
			(waterLevel==4 && mapArrayDev[riverX][riverY]=="c") ||
			(waterLevel==5 && mapArrayDev[riverX][riverY]=="d") ||
			(waterLevel==6 && (mapArrayDev[riverX][riverY]=="d" || mapArrayDev[riverX][riverY]=="e")) ||
			(waterLevel==7 && (mapArrayDev[riverX][riverY]=="e" || mapArrayDev[riverX][riverY]=="f")) ||
			(waterLevel==8 && (mapArrayDev[riverX][riverY]=="e" || mapArrayDev[riverX][riverY]=="f")) ||
			(waterLevel==9 && (mapArrayDev[riverX][riverY]=="f" || mapArrayDev[riverX][riverY]=="g")) ||
			(waterLevel==10 && (mapArrayDev[riverX][riverY]=="g" || mapArrayDev[riverX][riverY]=="h")) ||
			(waterLevel==11 && (mapArrayDev[riverX][riverY]=="g" || mapArrayDev[riverX][riverY]=="h")) ||
			(waterLevel==12 && (mapArrayDev[riverX][riverY]=="g" || mapArrayDev[riverX][riverY]=="h" || mapArrayDev[riverX][riverY]=="i")) ||
			(waterLevel==13 && (mapArrayDev[riverX][riverY]=="g" || mapArrayDev[riverX][riverY]=="h" || mapArrayDev[riverX][riverY]=="i" || mapArrayDev[riverX][riverY]=="j")) ||
			(waterLevel==14 && (mapArrayDev[riverX][riverY]=="h" || mapArrayDev[riverX][riverY]=="i" || mapArrayDev[riverX][riverY]=="j" || mapArrayDev[riverX][riverY]=="k")) ||
			(waterLevel==15 && (mapArrayDev[riverX][riverY]=="h" || mapArrayDev[riverX][riverY]=="i" || mapArrayDev[riverX][riverY]=="j" || mapArrayDev[riverX][riverY]=="k")) ||
			(waterLevel==16 && (mapArrayDev[riverX][riverY]=="i" || mapArrayDev[riverX][riverY]=="j" || mapArrayDev[riverX][riverY]=="k" || mapArrayDev[riverX][riverY]=="l")) ||
			(waterLevel==17 && (mapArrayDev[riverX][riverY]=="i" || mapArrayDev[riverX][riverY]=="j" || mapArrayDev[riverX][riverY]=="k" || mapArrayDev[riverX][riverY]=="l")) ||
			(waterLevel==18 && (mapArrayDev[riverX][riverY]=="j" || mapArrayDev[riverX][riverY]=="k" || mapArrayDev[riverX][riverY]=="l" || mapArrayDev[riverX][riverY]=="m")) ||
			(waterLevel==19 && (mapArrayDev[riverX][riverY]=="j" || mapArrayDev[riverX][riverY]=="k" || mapArrayDev[riverX][riverY]=="l" || mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n")) ||
			(waterLevel==20 && (mapArrayDev[riverX][riverY]=="k" || mapArrayDev[riverX][riverY]=="l" || mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o")) ||
			(waterLevel==21 && (mapArrayDev[riverX][riverY]=="k" || mapArrayDev[riverX][riverY]=="l" || mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o")) ||
			(waterLevel==22 && (mapArrayDev[riverX][riverY]=="k" || mapArrayDev[riverX][riverY]=="l" || mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o")) ||
			(waterLevel==23 && (mapArrayDev[riverX][riverY]=="k" || mapArrayDev[riverX][riverY]=="l" || mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o" || mapArrayDev[riverX][riverY]=="p")) ||
			(waterLevel==24 && (mapArrayDev[riverX][riverY]=="l" || mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o" || mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q")) ||
			(waterLevel==25 && (mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o" || mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r")) ||
			(waterLevel==26 && (mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o" || mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s")) ||
			(waterLevel==27 && (mapArrayDev[riverX][riverY]=="o" || mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t")) ||
			(waterLevel==28 && (mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t" || mapArrayDev[riverX][riverY]=="u")) ||
			(waterLevel==29 && (mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t" || mapArrayDev[riverX][riverY]=="u" || mapArrayDev[riverX][riverY]=="v")) ||
			(waterLevel==30 && (mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t" || mapArrayDev[riverX][riverY]=="u" || mapArrayDev[riverX][riverY]=="v" || mapArrayDev[riverX][riverY]=="w")) ||
			(waterLevel==31 && (mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t" || mapArrayDev[riverX][riverY]=="u" || mapArrayDev[riverX][riverY]=="v" || mapArrayDev[riverX][riverY]=="w"))
		)
		{
	//		stage2Error.value = stage2Error.value + "\nRiver diameter: 3, X,Y: "+mapArrayDev[riverX][riverY];

			if (riversNarrow==1)
			{
		/*
				 R
				RXR
				 R
		*/
				if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[riverX][((riverY-0)-(z-0))] = flowCharacter;

				if (riverX-1 < 1)			{z=((-mapSizeX)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)-(z-0))][riverY] = flowCharacter;

				mapArrayDev2[riverX][riverY] = flowCharacter;

				if (riverX+1 > mapSizeX)	{z=((-mapSizeX)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(z-0))][riverY] = flowCharacter;

				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[riverX][((riverY-0)+(z-0))] = flowCharacter;
			}
			else
			{
		/*
				 RR
				RXRR
				RRRR
				 RR
		*/
			//	XR

				if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[riverX][((riverY-0)-(z-0))] = flowCharacter;

			//	RX

				if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
				else						{z=1;}
				if (riverX+1 > mapSizeX)	{yy=((-mapSizeX)+1);}
				else						{yy=1;}
				mapArrayDev2[((riverX-0)+(yy-0))][((riverY-0)-(z-0))] = flowCharacter;

			//////////////////////////////////////////////////////

			//	XRRR

				if (riverX-1 < 1)			{z=((-mapSizeX)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)-(z-0))][riverY] = flowCharacter;

			//	RXRR

				mapArrayDev2[riverX][riverY] = flowCharacter;

			//	RRXR

				if (riverX+1 > mapSizeX)	{z=((-mapSizeX)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(z-0))][riverY] = flowCharacter;

			//	RRRX

				if (riverX+2 > mapSizeX)	{z=((-mapSizeX)+2);}
				else						{z=2;}
				mapArrayDev2[((riverX-0)+(z-0))][riverY] = flowCharacter;

			//////////////////////////////////////////////////////

			//	XRRR

				if (riverX-1 < 1)			{yy=((-mapSizeX)+1);}
				else						{yy=1;}
				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)-(yy-0))][((riverY-0)+(z-0))] = flowCharacter;

			//	RXRR

				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[riverX][((riverY-0)+(z-0))] = flowCharacter;

			//	RRXR

				if (riverX+1 > mapSizeX)	{yy=((-mapSizeX)+1);}
				else						{yy=1;}
				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(yy-0))][((riverY-0)+(z-0))] = flowCharacter;

			//	RRRX

				if (riverX+2 > mapSizeX)	{yy=((-mapSizeX)+2);}
				else						{yy=2;}
				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(yy-0))][((riverY-0)+(z-0))] = flowCharacter;

			//////////////////////////////////////////////////////

			//	XR

				if (riverY+2 > mapSizeY)	{z=((-mapSizeY)+2);}
				else						{z=2;}
				mapArrayDev2[riverX][((riverY-0)+(z-0))] = flowCharacter;

			//	RX

				if (riverX+1 > mapSizeX)	{yy=((-mapSizeX)+1);}
				else						{yy=1;}
				if (riverY+2 > mapSizeY)	{z=((-mapSizeY)+2);}
				else						{z=2;}
				mapArrayDev2[((riverX-0)+(yy-0))][((riverY-0)+(z-0))] = flowCharacter;
			}
		}
		else if
		(
			(waterLevel==8 && mapArrayDev[riverX][riverY]=="g") ||
			(waterLevel==9 && mapArrayDev[riverX][riverY]=="h") ||
			(waterLevel==10 && mapArrayDev[riverX][riverY]=="i") ||
			(waterLevel==11 && (mapArrayDev[riverX][riverY]=="i" || mapArrayDev[riverX][riverY]=="j")) ||
			(waterLevel==12 && (mapArrayDev[riverX][riverY]=="j" || mapArrayDev[riverX][riverY]=="k")) ||
			(waterLevel==13 && (mapArrayDev[riverX][riverY]=="k" || mapArrayDev[riverX][riverY]=="l")) ||
			(waterLevel==14 && (mapArrayDev[riverX][riverY]=="l" || mapArrayDev[riverX][riverY]=="m")) ||
			(waterLevel==15 && (mapArrayDev[riverX][riverY]=="l" || mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n")) ||
			(waterLevel==16 && (mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o")) ||
			(waterLevel==17 && (mapArrayDev[riverX][riverY]=="m" || mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o" || mapArrayDev[riverX][riverY]=="p")) ||
			(waterLevel==18 && (mapArrayDev[riverX][riverY]=="n" || mapArrayDev[riverX][riverY]=="o" || mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q")) ||
			(waterLevel==19 && (mapArrayDev[riverX][riverY]=="o" || mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r")) ||
			(waterLevel==20 && (mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s")) ||
			(waterLevel==21 && (mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t")) ||
			(waterLevel==22 && (mapArrayDev[riverX][riverY]=="p" || mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t" || mapArrayDev[riverX][riverY]=="u")) ||
			(waterLevel==23 && (mapArrayDev[riverX][riverY]=="q" || mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t" || mapArrayDev[riverX][riverY]=="u" || mapArrayDev[riverX][riverY]=="v")) ||
			(waterLevel==24 && (mapArrayDev[riverX][riverY]=="r" || mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t" || mapArrayDev[riverX][riverY]=="u" || mapArrayDev[riverX][riverY]=="v" || mapArrayDev[riverX][riverY]=="w")) ||
			(waterLevel==25 && (mapArrayDev[riverX][riverY]=="s" || mapArrayDev[riverX][riverY]=="t" || mapArrayDev[riverX][riverY]=="u" || mapArrayDev[riverX][riverY]=="v" || mapArrayDev[riverX][riverY]=="w" || mapArrayDev[riverX][riverY]=="x")) ||
			(waterLevel==26 && (mapArrayDev[riverX][riverY]=="t" || mapArrayDev[riverX][riverY]=="u" || mapArrayDev[riverX][riverY]=="v" || mapArrayDev[riverX][riverY]=="w" || mapArrayDev[riverX][riverY]=="x" || mapArrayDev[riverX][riverY]=="y")) ||
			(waterLevel==27 && (mapArrayDev[riverX][riverY]=="u" || mapArrayDev[riverX][riverY]=="v" || mapArrayDev[riverX][riverY]=="w" || mapArrayDev[riverX][riverY]=="x" || mapArrayDev[riverX][riverY]=="y" || mapArrayDev[riverX][riverY]=="z")) ||
			(waterLevel==28 && (mapArrayDev[riverX][riverY]=="v" || mapArrayDev[riverX][riverY]=="w" || mapArrayDev[riverX][riverY]=="x" || mapArrayDev[riverX][riverY]=="y" || mapArrayDev[riverX][riverY]=="z" || mapArrayDev[riverX][riverY]=="1")) ||
			(waterLevel==29 && (mapArrayDev[riverX][riverY]=="w" || mapArrayDev[riverX][riverY]=="x" || mapArrayDev[riverX][riverY]=="y" || mapArrayDev[riverX][riverY]=="z" || mapArrayDev[riverX][riverY]=="1" || mapArrayDev[riverX][riverY]=="2")) ||
			(waterLevel==30 && (mapArrayDev[riverX][riverY]=="x" || mapArrayDev[riverX][riverY]=="y" || mapArrayDev[riverX][riverY]=="z" || mapArrayDev[riverX][riverY]=="1" || mapArrayDev[riverX][riverY]=="2" || mapArrayDev[riverX][riverY]=="3")) ||
			(waterLevel==31 && (mapArrayDev[riverX][riverY]=="x" || mapArrayDev[riverX][riverY]=="y" || mapArrayDev[riverX][riverY]=="z" || mapArrayDev[riverX][riverY]=="1" || mapArrayDev[riverX][riverY]=="2" || mapArrayDev[riverX][riverY]=="3" || mapArrayDev[riverX][riverY]=="4"))
		)
		{
	//		stage2Error.value = stage2Error.value + "\nRiver diameter: 4, X,Y: "+mapArrayDev[riverX][riverY];

			if (riversNarrow==1)
			{
		/*
				 RR
				RXRR
				RRRR
				 RR
		*/
			//	XR

				if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[riverX][((riverY-0)-(z-0))] = flowCharacter;

			//	RX

				if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
				else						{z=1;}
				if (riverX+1 > mapSizeX)	{yy=((-mapSizeX)+1);}
				else						{yy=1;}
				mapArrayDev2[((riverX-0)+(yy-0))][((riverY-0)-(z-0))] = flowCharacter;

			//////////////////////////////////////////////////////

			//	XRRR

				if (riverX-1 < 1)			{z=((-mapSizeX)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)-(z-0))][riverY] = flowCharacter;

			//	RXRR

				mapArrayDev2[riverX][riverY] = flowCharacter;

			//	RRXR

				if (riverX+1 > mapSizeX)	{z=((-mapSizeX)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(z-0))][riverY] = flowCharacter;

			//	RRRX

				if (riverX+2 > mapSizeX)	{z=((-mapSizeX)+2);}
				else						{z=2;}
				mapArrayDev2[((riverX-0)+(z-0))][riverY] = flowCharacter;

			//////////////////////////////////////////////////////

			//	XRRR

				if (riverX-1 < 1)			{yy=((-mapSizeX)+1);}
				else						{yy=1;}
				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)-(yy-0))][((riverY-0)+(z-0))] = flowCharacter;

			//	RXRR

				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[riverX][((riverY-0)+(z-0))] = flowCharacter;

			//	RRXR

				if (riverX+1 > mapSizeX)	{yy=((-mapSizeX)+1);}
				else						{yy=1;}
				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(yy-0))][((riverY-0)+(z-0))] = flowCharacter;

			//	RRRX

				if (riverX+2 > mapSizeX)	{yy=((-mapSizeX)+2);}
				else						{yy=2;}
				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(yy-0))][((riverY-0)+(z-0))] = flowCharacter;

			//////////////////////////////////////////////////////

			//	XR

				if (riverY+2 > mapSizeY)	{z=((-mapSizeY)+2);}
				else						{z=2;}
				mapArrayDev2[riverX][((riverY-0)+(z-0))] = flowCharacter;

			//	RX

				if (riverX+1 > mapSizeX)	{yy=((-mapSizeX)+1);}
				else						{yy=1;}
				if (riverY+2 > mapSizeY)	{z=((-mapSizeY)+2);}
				else						{z=2;}
				mapArrayDev2[((riverX-0)+(yy-0))][((riverY-0)+(z-0))] = flowCharacter;
			}
			else
			{
			/*
			  RR
			 RRRR
			RRXRRR
			RRRRRR
			 RRRR
			  RR
			*/
			//	XR

				if (riverY-2 < 1)			{z=((-mapSizeY)+2);}
				else						{z=2;}
				mapArrayDev2[(riverX-0)][((riverY-0)-(z-0))] = flowCharacter;

			//	RX

				if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
				else						{zz=1;}
				if (riverY-2 < 1)			{z=((-mapSizeY)+2);}
				else						{z=2;}
				mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)-(z-0))] = flowCharacter;

			////////////////////////////////////////////

			//	XRRR

				if (riverX-1 < 1)			{zz=((-mapSizeX)+1);}
				else						{zz=1;}
				if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)-(zz-0))][((riverY-0)-(z-0))] = flowCharacter;

			//	RXRR

				if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[(riverX-0)][((riverY-0)-(z-0))] = flowCharacter;

			//	RRXR

				if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
				else						{zz=1;}
				if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)-(z-0))] = flowCharacter;

			//	RRRX

				if (riverX+2 > mapSizeX)	{zz=((-mapSizeX)+2);}
				else						{zz=2;}
				if (riverY-1 < 1)			{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)-(z-0))] = flowCharacter;

			////////////////////////////////////////////

			//	XRRRRR

				if (riverX-2 < 1)			{zz=((-mapSizeX)+2);}
				else						{zz=2;}
				mapArrayDev2[((riverX-0)-(zz-0))][(riverY-0)] = flowCharacter;

			//	RXRRRR

				if (riverX-1 < 1)			{zz=((-mapSizeX)+1);}
				else						{zz=1;}
				mapArrayDev2[((riverX-0)-(zz-0))][(riverY-0)] = flowCharacter;

			//	RRXRRR

				mapArrayDev2[(riverX-0)][(riverY-0)] = flowCharacter;

			//	RRRXRR

				if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
				else						{zz=1;}
				mapArrayDev2[((riverX-0)+(zz-0))][(riverY-0)] = flowCharacter;

			//	RRRRXR

				if (riverX+2 > mapSizeX)	{zz=((-mapSizeX)+2);}
				else						{zz=2;}
				mapArrayDev2[((riverX-0)+(zz-0))][(riverY-0)] = flowCharacter;

			//	RRRRRX

				if (riverX+3 > mapSizeX)	{zz=((-mapSizeX)+3);}
				else						{zz=3;}
				mapArrayDev2[((riverX-0)+(zz-0))][(riverY-0)] = flowCharacter;

			////////////////////////////////////////////

			//	XRRRRR

				if (riverX-2 < 1)			{zz=((-mapSizeX)+2);}
				else						{zz=2;}
				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)-(zz-0))][((riverY-0)+(z-0))] = flowCharacter;

			//	RXRRRR

				if (riverX-1 < 1)			{zz=((-mapSizeX)+1);}
				else						{zz=1;}
				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)-(zz-0))][((riverY-0)+(z-0))] = flowCharacter;

			//	RRXRRR

				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[(riverX-0)][((riverY-0)+(z-0))] = flowCharacter;

			//	RRRXRR

				if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
				else						{zz=1;}
				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = flowCharacter;

			//	RRRRXR

				if (riverX+2 > mapSizeX)	{zz=((-mapSizeX)+2);}
				else						{zz=2;}
				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = flowCharacter;

			//	RRRRRX

				if (riverX+3 > mapSizeX)	{zz=((-mapSizeX)+3);}
				else						{zz=3;}
				if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
				else						{z=1;}
				mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = flowCharacter;

			////////////////////////////////////////////

			//	XRRR

				if (riverX-1 < 1)			{zz=((-mapSizeX)+1);}
				else						{zz=1;}
				if (riverY+2 > mapSizeY)	{z=((-mapSizeY)+2);}
				else						{z=2;}
				mapArrayDev2[((riverX-0)-(zz-0))][((riverY-0)+(z-0))] = flowCharacter;

			//	RXRR

				if (riverY+2 > mapSizeY)	{z=((-mapSizeY)+2);}
				else						{z=2;}
				mapArrayDev2[(riverX-0)][((riverY-0)+(z-0))] = flowCharacter;

			//	RRXR

				if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
				else						{zz=1;}
				if (riverY+2 > mapSizeY)	{z=((-mapSizeY)+2);}
				else						{z=2;}
				mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = flowCharacter;

			//	RRRX

				if (riverX+2 > mapSizeX)	{zz=((-mapSizeX)+2);}
				else						{zz=2;}
				if (riverY+2 > mapSizeY)	{z=((-mapSizeY)+2);}
				else						{z=2;}
				mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = flowCharacter;

			////////////////////////////////////////////

			//	XR

				if (riverY+3 > mapSizeY)	{z=((-mapSizeY)+3);}
				else						{z=3;}
				mapArrayDev2[(riverX-0)][((riverY-0)+(z-0))] = flowCharacter;

			//	RX

				if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
				else						{zz=1;}
				if (riverY+3 > mapSizeY)	{z=((-mapSizeY)+3);}
				else						{z=3;}
				mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = flowCharacter;
			}
		}
		else
		{
	//		stage2Error.value = stage2Error.value + "\nRiver diameter: 2, X,Y: "+mapArrayDev[riverX][riverY];
	/*
			 XR
			 RR
	*/
			mapArrayDev2[riverX][riverY] = flowCharacter;

			if (riverX+1 > mapSizeX)	{z=((-mapSizeX)+1);}
			else						{z=1;}
			mapArrayDev2[((riverX-0)+(z-0))][riverY] = flowCharacter;

			if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
			else						{z=1;}
			mapArrayDev2[riverX][((riverY-0)+(z-0))] = flowCharacter;

			if (riverY+1 > mapSizeY)	{z=((-mapSizeY)+1);}
			else						{z=1;}
			if (riverX+1 > mapSizeX)	{zz=((-mapSizeX)+1);}
			else						{zz=1;}
			mapArrayDev2[((riverX-0)+(zz-0))][((riverY-0)+(z-0))] = flowCharacter;
		}
	}
	catch(err)
	{
		stage2Error.value += "\nERROR (plotRiver): "+riverX+","+riverY;
		stage2Error.scrollTop = stage2Error.scrollHeight;
	}
}

</script>

</head>

<body>

<script>
	browserCheck();
	initScreen();
	checkForAboutArrow();
	makeGo();
	if (specificBrowser == "Safari" || specificBrowser == "Chrome" || specificBrowser == "Opera")
	{
		main();
	}
</script>

</body>
</html>